import{r as n,u as S,Q as P,h as g,i as U,a0 as A,k as D,a1 as K,e as M,m as W,n as Q,f as z,S as G,g as H,a2 as J,o as v,s as y,a,w as l,a3 as O,b as s,d as r,T as X,v as Y,y as Z,a4 as ee,E as w,a5 as E,a6 as se}from"./index-bd78cdd5.js";/* empty css                        */import{_ as te}from"./auth-container-dcfbec9b.js";import{g as ae,h as oe,j as le}from"./app-cbc49648.js";import"./_plugin-vue_export-helper-b6a112e1.js";const ne={class:"flex-col login-p"},ie={style:{"margin-bottom":"40px"},class:"flex-center"},ce=s("h3",{class:"flex-1 login-p__title"},"\u767B\u5F55",-1),ue={class:"flex-1 flex justify-between"},de={class:"flex-1 flex-col justify-end login-p__btns"},re={key:0,class:"temp"},_e=s("div",{class:"otherType"},[s("span",{class:"line"}),s("span",{class:"title"},"\u5176\u4ED6\u767B\u5F55\u65B9\u5F0F")],-1),pe={class:"loginPanel normalPanel"},me={class:"waiting panelContent"},fe={class:"wrp_code"},ge=s("div",{class:"info"},[s("div",{class:"status status_browser js_status js_wx_default_tip",id:"wx_default_tip"},[s("p",null,"\u4F7F\u7528\u5FAE\u4FE1\u626B\u4E00\u626B\u767B\u5F55")]),s("div",{class:"status status_succ js_status js_wx_after_scan",style:{display:"none"},id:"wx_after_scan"},[s("i",{class:"status_icon icon38_msg succ"}),s("div",{class:"status_txt"},[s("h4",null,"\u626B\u63CF\u6210\u529F"),s("p",null,"\u5728\u5FAE\u4FE1\u4E2D\u8F7B\u89E6\u5141\u8BB8\u5373\u53EF\u767B\u5F55")])]),s("div",{class:"status status_fail js_status js_wx_after_cancel",style:{display:"none"},id:"wx_after_cancel"},[s("i",{class:"status_icon icon38_msg warn"}),s("div",{class:"status_txt"},[s("h4",null,"\u4F60\u5DF2\u53D6\u6D88\u6B64\u6B21\u767B\u5F55"),s("p",null,"\u4F60\u53EF\u518D\u6B21\u626B\u63CF\u767B\u5F55\uFF0C\u6216\u5173\u95ED\u7A97\u53E3")])])],-1),be={__name:"login",setup(ve){const L=n(localStorage.getItem("isWechat")),_=S(),q=P();g({data:{}}),U(()=>{document.title=`${A.title}-\u540E\u53F0\u767B\u5F55`});const p=n(null),i=g({account:"",pass:""}),$=g({account:[{required:!0,message:"\u8BF7\u8F93\u5165\u5E10\u53F7/\u624B\u673A\u53F7",trigger:"blur"}],pass:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"}]}),h=async t=>{const e=await le();e&&e.data.is_direct_app==1&&(e.data.app_link?window.open(e.data.app_link):w.error(e.data.empty_desc)),_.push({path:"/"}),console.log("asdasd")},m=n(!1),x=async t=>{if(!(!t||!await t.validate())){m.value=!0;try{const{data:c}=await ee(i);console.log(c,"kjlk;l;"),w({message:"\u767B\u5F55\u6210\u529F",type:"success"});const{setToken:u}=E();u(c.token),h(c.token)}catch(c){}m.value=!1}};n("https://baidu.com");const f=t=>{_.push({name:t,query:q.query})},k=n(""),b=n({random:""}),d=n(!1),T=async()=>{const t=await ae();t&&(k.value=t.data.code,b.value.random=t.data.random,d.value=!0,V())},V=async()=>{setTimeout(async()=>{const t=await oe({random:b.value.random});if(t){w({message:"\u767B\u5F55\u6210\u529F",type:"success"});const{setToken:e}=E();e(t.data.token),h(t.data.token),_.push({name:"index"})}else d.value&&V()},1e3)};return(t,e)=>{const c=D,u=K,j=M,C=W,I=Q,B=z,R=G,F=H,N=J;return v(),y("div",null,[a(te,{style:{"min-height":"700px"}},{default:l(()=>[O((v(),y("div",ne,[s("div",ie,[ce,a(u,{underline:!1,onClick:e[0]||(e[0]=o=>f("register"))},{default:l(()=>[r(" \u6CE8\u518C"),a(c,{class:"el-icon--right"},{default:l(()=>[a(X(se))]),_:1})]),_:1})]),a(I,{ref_key:"formRef",ref:p,model:i,"status-icon":"",rules:$,"label-width":"70px","hide-required-asterisk":""},{default:l(()=>[a(C,{label:"\u767B\u5F55\u8D26\u53F7",prop:"account"},{default:l(()=>[a(j,{modelValue:i.account,"onUpdate:modelValue":e[1]||(e[1]=o=>i.account=o),type:"text",placeholder:"\u5E10\u53F7/\u624B\u673A\u53F7"},null,8,["modelValue"])]),_:1}),a(C,{label:"\u767B\u5F55\u5BC6\u7801",prop:"pass"},{default:l(()=>[a(j,{modelValue:i.pass,"onUpdate:modelValue":e[2]||(e[2]=o=>i.pass=o),"show-password":"",type:"password",placeholder:"\u5BC6\u7801",onKeyup:e[3]||(e[3]=Y(o=>x(p.value),["enter"]))},null,8,["modelValue"])]),_:1}),s("div",ue,[a(u,{underline:!1,onClick:e[4]||(e[4]=o=>f("register"))},{default:l(()=>[r("\u6CE8\u518C")]),_:1}),a(u,{underline:!1,onClick:e[5]||(e[5]=o=>f("resetPass"))},{default:l(()=>[r("\u5FD8\u8BB0\u5BC6\u7801")]),_:1})])]),_:1},8,["model","rules"]),s("div",de,[a(B,{type:"primary",onClick:e[6]||(e[6]=o=>x(p.value))},{default:l(()=>[r("\u767B\u5F55")]),_:1})]),L.value==1?(v(),y("div",re,[_e,s("div",{class:"otherLogin"},[s("div",{onClick:T,class:"item"})])])):Z("",!0)])),[[N,m.value]])]),_:1}),a(F,{modelValue:d.value,"onUpdate:modelValue":e[7]||(e[7]=o=>d.value=o),title:"\u5FAE\u4FE1\u767B\u5F55",width:"360px"},{default:l(()=>[s("div",pe,[s("div",me,[s("div",fe,[a(R,{class:"qrcode lightBorder",src:k.value},null,8,["src"])]),ge])])]),_:1},8,["modelValue"])])}}};export{be as default};
