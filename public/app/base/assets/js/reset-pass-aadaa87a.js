import{i as T,a0 as I,u as N,Q as F,r as R,h as c,X as S,a9 as P,k as M,a1 as j,e as D,m as G,f as L,n as O,o as Q,s as X,a as e,w as n,b as r,d as m,T as z,x as A,E as f,aa as H,ad as J,a6 as K}from"./index-ea2bb68f.js";import{_ as W}from"./auth-container-a45f301b.js";import{_ as Y,v as Z}from"./captcha-177bf5a8.js";import"./_plugin-vue_export-helper-b6a112e1.js";const ee={class:"flex-col login-p"},te={style:{"margin-bottom":"40px"},class:"flex-center"},oe=r("h3",{class:"flex-1 login-p__title"},"\u5FD8\u8BB0\u5BC6\u7801",-1),se={class:"app-flex-left"},ae={class:"flex align-center"},le={class:"flex-1 flex-col justify-end login-p__btns"},x=60,de={__name:"reset-pass",setup(ne){T(()=>{document.title=`\u627E\u56DE\u5BC6\u7801-${I.title}`});let _="";const b=s=>{_=s.toUpperCase()},g=N(),V=F(),v=R(null),o=c({phone:"",code:"",password:"",captcha:""}),w=c({phone:[{required:!0,message:"\u8BF7\u8F93\u5165\u5E10\u53F7/\u624B\u673A\u53F7",trigger:"blur"}],code:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",trigger:"blur"}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"}]});let u;const a=c({value:x,posting:!1,counting:!1}),C=S(()=>a.counting?`${a.value} s\u53EF\u91CD\u53D1`:"\u53D1\u9001\u9A8C\u8BC1\u7801"),d=()=>{!u||(clearInterval(u),u=null)},k=()=>{d(),a.value=x,a.counting=!0,u=setInterval(()=>{const s=a.value-1;s>0?a.value=s:(d(),a.counting=!1)},1e3)};P(()=>d());const q=async()=>{if(!(a.posting||a.counting))if(o.captcha.toUpperCase()!=_)f({message:"\u8BF7\u5148\u8F93\u5165\u6B63\u786E\u7684\u56FE\u7247\u9A8C\u8BC1\u7801",type:"error"});else if(!Z(o.phone))f({message:"\u8BF7\u5148\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7\u7801",type:"error"});else{const s=await H(o.phone);s&&(a.posting=!0,k()),console.log(s)}},E=async s=>{if(!s||!await s.validate())return;await J(o)&&(f({message:"\u5F00\u59CB\u63D0\u4EA4...",type:"success"}),g.push({path:"/login",replace:!0}))},U=s=>{g.push({name:s,query:V.query})};return(s,t)=>{const h=M,$=j,i=D,p=G,y=L,B=O;return Q(),X("div",null,[e(W,null,{default:n(()=>[r("div",ee,[r("div",te,[oe,e($,{underline:!1,onClick:t[0]||(t[0]=l=>U("login"))},{default:n(()=>[m(" \u767B\u5F55"),e(h,{class:"el-icon--right"},{default:n(()=>[e(z(K))]),_:1})]),_:1})]),e(B,{ref_key:"formRef",ref:v,model:o,rules:w,"label-width":"84px","label-position":"left","hide-required-asterisk":""},{default:n(()=>[e(p,{label:"\u624B\u673A\u53F7\u7801",prop:"phone"},{default:n(()=>[e(i,{modelValue:o.phone,"onUpdate:modelValue":t[1]||(t[1]=l=>o.phone=l),type:"text",placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u5E10\u53F7"},null,8,["modelValue"])]),_:1}),e(p,{label:"\u56FE\u7247\u9A8C\u8BC1\u7801",prop:"captcha"},{default:n(()=>[r("div",se,[e(i,{modelValue:o.captcha,"onUpdate:modelValue":t[2]||(t[2]=l=>o.captcha=l),type:"text",placeholder:"\u8BF7\u8F93\u5165\u56FE\u7247\u9A8C\u8BC1\u7801"},null,8,["modelValue"]),e(Y,{onGetCaptcha:t[3]||(t[3]=l=>b(l))})])]),_:1}),e(p,{label:"\u77ED\u4FE1\u9A8C\u8BC1\u7801",prop:"code"},{default:n(()=>[r("div",ae,[e(i,{class:"flex-1",modelValue:o.code,"onUpdate:modelValue":t[4]||(t[4]=l=>o.code=l),type:"text",placeholder:"\u8BF7\u586B\u5199\u77ED\u4FE1\u9A8C\u8BC1\u7801"},null,8,["modelValue"]),e(y,{type:"primary",disabled:a.posting,onClick:q},{default:n(()=>[m(A(C.value),1)]),_:1},8,["disabled"])])]),_:1}),e(p,{label:"\u65B0\u5BC6\u7801",prop:"password"},{default:n(()=>[e(i,{modelValue:o.password,"onUpdate:modelValue":t[5]||(t[5]=l=>o.password=l),"show-password":"",type:"password",placeholder:"8-16\u4F4D\u5FC5\u987B\u5305\u542B\u6570\u5B57\u548C\u5B57\u6BCD"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),r("div",le,[e(y,{type:"primary",onClick:t[6]||(t[6]=l=>E(v.value))},{default:n(()=>[m("\u786E\u8BA4\u4FEE\u6539")]),_:1})])])]),_:1})])}}};export{de as default};
