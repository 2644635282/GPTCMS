import{r as n,h as q,e as z,m as L,f as M,n as W,S as A,g as G,o as c,s as f,b as e,F as H,t as J,a as t,w as d,c as K,y as F,d as g,x as C,E as i,D as O}from"./index-ea2bb68f.js";/* empty css                        */import{p as Q,a as X,b as Y,d as Z,e as ee,f as se}from"./app-6822b448.js";const te={class:"topTabStyle"},le={class:"tabStyleChild",style:{width:"160px"}},ae=["onClick"],oe={class:"user-blo"},ne={key:0},de={style:{display:"flex","justify-content":"flex-start"}},ie={key:1,class:"user-flex-2"},ue=e("div",{class:"user-flexl"},[e("div",{class:"item-user"}),e("div",null,[e("div",null,"\u5FAE\u4FE1"),e("div",{style:{color:"#999","font-size":"14px"}},"\u7ED1\u5B9A\u5FAE\u4FE1\u8D26\u53F7\u540E\uFF0C\u60A8\u53EF\u4F7F\u7528\u5FAE\u4FE1\u8D26\u53F7\u767B\u5F55\u7F51\u7AD9")])],-1),re={class:"loginPanel normalPanel"},ce={class:"waiting panelContent"},_e={class:"wrp_code"},pe=e("div",{class:"info"},[e("div",{class:"status status_browser js_status js_wx_default_tip",id:"wx_default_tip"},[e("p",null,"\u4F7F\u7528\u5FAE\u4FE1\u626B\u4E00\u626B\u7ED1\u5B9A")]),e("div",{class:"status status_succ js_status js_wx_after_scan",style:{display:"none"},id:"wx_after_scan"},[e("i",{class:"status_icon icon38_msg succ"}),e("div",{class:"status_txt"},[e("h4",null,"\u626B\u63CF\u6210\u529F"),e("p",null,"\u5728\u5FAE\u4FE1\u4E2D\u8F7B\u89E6\u5141\u8BB8\u5373\u53EF\u767B\u5F55")])]),e("div",{class:"status status_fail js_status js_wx_after_cancel",style:{display:"none"},id:"wx_after_cancel"},[e("i",{class:"status_icon icon38_msg warn"}),e("div",{class:"status_txt"},[e("h4",null,"\u4F60\u5DF2\u53D6\u6D88\u6B64\u6B21\u767B\u5F55"),e("p",null,"\u4F60\u53EF\u518D\u6B21\u626B\u63CF\u767B\u5F55\uFF0C\u6216\u5173\u95ED\u7A97\u53E3")])])],-1),we={__name:"user",setup(ve){const u=n(0),I=n([{id:1,name:"\u624B\u673A\u7ED1\u5B9A"},{id:2,name:"\u5FAE\u4FE1\u7ED1\u5B9A"}]),_=n(0),o=q({phone:"",verfiy:""}),h=n(""),p=n(),x=n(!1),y=n(!1),w=async()=>{const s=await Q();s&&(p.value=s.data,h.value=s.data.telephone,s.data.telephone?x.value=!0:x.value=!1,s.data.wxopenid?y.value=!0:y.value=!1,_.value=1)},S=s=>{_.value=s.id};let b=null;const U=async()=>{var s=/^0?1[3|4|5|6|7|8][0-9]\d{8}$/;if(o.phone){if(!s.test(o.phone)){i.error("\u8BF7\u5148\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7\u7801");return}}else{i.error("\u8BF7\u5148\u8F93\u5165\u624B\u673A\u53F7\u7801");return}await X({phone:o.phone})&&(u.value=60,b=setInterval(()=>{u.value==0?(clearInterval(b),b=null):u.value--},1e3))},j=async()=>{var s=/^0?1[3|4|5|6|7|8][0-9]\d{8}$/;if(o.phone){if(!s.test(o.phone)){i.error("\u8BF7\u5148\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7\u7801");return}}else{i.error("\u8BF7\u5148\u8F93\u5165\u624B\u673A\u53F7\u7801");return}if(!o.verfiy){i.error("\u8BF7\u5148\u8F93\u5165\u9A8C\u8BC1\u7801");return}await Y(o)&&i.success("\u7ED1\u5B9A\u6210\u529F")},D=n(),N=n([]),v=n(!1),k=n({random:""}),B=n(""),P=async()=>{if(y.value){await Z()&&(i.success("\u89E3\u7ED1\u6210\u529F"),w());return}const s=await ee();s&&(B.value=s.data.code,k.value.random=s.data.random,v.value=!0,E())},E=async()=>{setTimeout(async()=>{await se({random:k.value.random})?(i({message:"\u7ED1\u5B9A\u6210\u529F",type:"success"}),v.value=!1,w()):v.value&&E()},1e3)};return w(),(s,l)=>{const m=z,r=L,V=M,R=W,T=A,$=G;return c(),f("div",null,[e("div",te,[e("div",le,[(c(!0),f(H,null,J(I.value,(a,me)=>(c(),f("div",{class:O({tabSelect:a.id===_.value}),onClick:fe=>S(a)},C(a.name),11,ae))),256))])]),e("div",oe,[_.value==1?(c(),f("div",ne,[t(R,{style:{width:"600px"},ref_key:"ruleFormRef",ref:D,model:o,rules:N.value,"label-width":"120px",class:"demo-ruleForm","status-icon":""},{default:d(()=>[t(r,{label:"\u8D26\u6237"},{default:d(()=>[t(m,{disabled:!0,style:{width:"400px"},modelValue:p.value.un,"onUpdate:modelValue":l[0]||(l[0]=a=>p.value.un=a)},null,8,["modelValue"])]),_:1}),t(r,{label:"\u7528\u6237ID"},{default:d(()=>[t(m,{disabled:!0,style:{width:"400px"},modelValue:p.value.id,"onUpdate:modelValue":l[1]||(l[1]=a=>p.value.id=a)},null,8,["modelValue"])]),_:1}),x.value?(c(),K(r,{key:0,label:"\u5F53\u524D\u624B\u673A"},{default:d(()=>[t(m,{disabled:!0,style:{width:"400px"},modelValue:h.value,"onUpdate:modelValue":l[2]||(l[2]=a=>h.value=a)},null,8,["modelValue"])]),_:1})):F("",!0),t(r,{label:"\u65B0\u624B\u673A\u53F7"},{default:d(()=>[t(m,{style:{width:"400px"},modelValue:o.phone,"onUpdate:modelValue":l[3]||(l[3]=a=>o.phone=a)},null,8,["modelValue"])]),_:1}),t(r,{label:"\u9A8C\u8BC1\u7801"},{default:d(()=>[e("div",de,[t(m,{style:{width:"400px"},modelValue:o.verfiy,"onUpdate:modelValue":l[4]||(l[4]=a=>o.verfiy=a)},null,8,["modelValue"]),t(V,{style:{"margin-left":"14px"},type:"primary",disabled:u.value!=0,onClick:U},{default:d(()=>[g(C(u.value==0?"\u83B7\u53D6\u9A8C\u8BC1\u7801":u.value+"s"),1)]),_:1},8,["disabled"])])]),_:1}),t(r,{label:""},{default:d(()=>[t(V,{type:"primary",onClick:j},{default:d(()=>[g("\u786E\u8BA4")]),_:1})]),_:1})]),_:1},8,["model","rules"])])):_.value==2?(c(),f("div",ie,[ue,t(V,{style:{width:"90px"},type:"primary",onClick:P},{default:d(()=>[g(C(y.value?"\u89E3\u7ED1\u5FAE\u4FE1":"\u7ED1\u5B9A\u5FAE\u4FE1"),1)]),_:1})])):F("",!0)]),t($,{modelValue:v.value,"onUpdate:modelValue":l[5]||(l[5]=a=>v.value=a),title:"\u5FAE\u4FE1\u7ED1\u5B9A",width:"360px"},{default:d(()=>[e("div",re,[e("div",ce,[e("div",_e,[t(T,{class:"qrcode lightBorder",src:B.value},null,8,["src"])]),pe])])]),_:1},8,["modelValue"])])}}};export{we as default};
