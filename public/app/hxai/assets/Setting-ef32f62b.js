import{_ as Q,r as R,a as C,b as A,c as _,o as U,d as W,e as p,f as l,w as r,F as H,E as F,g as i,h as z,i as D,j as J,p as X,k as M}from"./index-b7084a6d.js";const G="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACfklEQVR4nO2c247DMAgFm9X+/y9336JI7iIGcNpKM4/NtUccQWzs4/l8PiTHz7tf4JtQLIBiARQLoFiA3/Wn4zg6dzzT63mf4Jf1ocGh4FkrU//iipEFUCzACxueoHp1DfuM+zLPQvdBd16JzWtkARQLENnwpJaPEIGLM1ehk1eS/8LIAigWIGXDGkHYB/YJch86eQdGFkCxABttuHpkPZT5pfbZuAMjC6BYgJQN76w8gySYORTQ/xdGFkCxAJENm7kmM1KaKSZrV62X9zGyAIoFOD5k+h4lygC/DT8FxQKkbBjkoxWU+1Cqas4/Zs6JLzeyAIoFSBWlGatmRl3WO68nI6s2TUcxsgCKBYi6aNCUejOvIWqG6te0RhZAsQAvitJmuGYyXXBDNMmeSZ1T3XEPIwuhWIDivOGd/aJBws24r/YIvw27KBbghQ1rPkKOCBpjAga7Q/97nxgjC6BYgGiktOa+qdIxQ63KLbfAGVkAxQIUh2hWmjPp46uramVqjJEFUCwAW2ERFJPjX4vINVPpNcbIAigWIFWUnuxrHhtv254avbliZAEUCxBNWNRmAaYGUqZW1g+uWzSyAIoFYEM0U61iiPFZCbPhHSgWoJsNa3P9N0w7ovfJPOthZCEUC7BxhUVzOdJ723u0YRfFAmzcmW2f+6a6vlf8NhxDsQAbd2abGmit5WvUl578+DWyAIoFePPObOMtN+MLGK8YWQDFAtyxJdRJxs7jDW/lcdEVIwugWIBbN0hsps7aGij0dIvSMRQLsHFntuayJnRofUStcLUoHUOxABt3ZltpGhM5q2Z5s+EYigX4lJ3ZvgIjC6BYAMUCKBZAsQCKBfgDr983udheyW8AAAAASUVORK5CYII=";const x=b=>(X("data-v-aa5b9f50"),b=b(),M(),b),K={class:"distribution-content"},L=x(()=>p("div",{class:"upload-img"},null,-1)),Z=x(()=>p("span",{class:"promotion-title"},"专属推广链接",-1)),j={class:"post-canvas"},$=["src"],T={key:0,class:"qr-mask"},ee=x(()=>p("img",{src:G},null,-1)),te={class:"post-canvas"},le=["src"],oe={key:0,class:"qr-mask"},re=x(()=>p("img",{src:G},null,-1)),se={class:"distribution-bottom"},ne={__name:"Setting",setup(b){const t=R({id:"",wid:"",status:0,senior_grade:"",second_grade:"",guiding_drawing:"",distribution_rule:"",copywriting_a:"",copywriting_b:"",copywriting_c:"",copywriting_d:"",withdrawal_rate:"",withdrawal_notice:"",agreement:"",poster_url_a_size:50,poster_url_a_x:0,poster_url_a_y:0,poster_url_b_size:50,poster_url_b_x:0,poster_url_b_y:0,poster_url_a:{bgW:0,bgH:0,qrW:80,qrH:80,qrX:0,qrY:0,bgUrl:""},poster_url_b:{bgW:0,bgH:0,qrW:80,qrH:80,qrX:0,qrY:0,bgUrl:""}}),v=C(!1),V=C(!1),y=C("");S();async function S(){const{data:s={}}=await A.post("/hxai/api/distribution/bg/setting/info",{wid:sessionStorage.getItem("wid")||1});s!=null&&s.data&&Object.keys(t).forEach(e=>{if(e=="poster_url_a"||e=="poster_url_b")try{t[e]=JSON.parse(s==null?void 0:s.data[e])}catch{t[e]={bgW:0,bgH:0,qrW:80,qrH:80,qrX:0,qrY:0,bgUrl:""}}else e in(s==null?void 0:s.data)&&(t[e]=s==null?void 0:s.data[e])})}async function Y(){t.wid=sessionStorage.getItem("wid")||t.wid;const s={...t};s.poster_url_a=JSON.stringify(s.poster_url_a),s.poster_url_b=JSON.stringify(s.poster_url_b);const{data:e={}}=await A.post("/hxai/api/distribution/bg/setting/update",s);e!=null&&e.data?F({message:"保存成功",type:"success"}):F.error((e==null?void 0:e.msg)||"保存失败")}function h(){const s=y.value;s&&s in t&&(t[s]=t[s]+"{{url}}",y.value="")}function w(s){y.value=s}function B(s=""){J("image/*",!1,e=>{let u=new FormData;u.append("file",e[0]),A.post("/hxai/api/uploadfile",u).then(a=>{var n,d;s=="poster_url_a"?v.value=!1:V.value=!1,t[s].bgUrl=(d=(n=a.data)==null?void 0:n.data)==null?void 0:d.url}).catch(a=>{console.error(a)})})}function E(){J("image/*",!1,s=>{let e=new FormData;e.append("file",s[0]),A.post("/hxai/api/uploadfile",e).then(u=>{var a,n;t.guiding_drawing=(n=(a=u.data)==null?void 0:a.data)==null?void 0:n.url}).catch(u=>{console.error(u)})})}function I(s,e){s=s+"",s&&(t[e]=s.replace(/[^\d^\.]+/g,"").replace(/^0+(\d)/,"$1").replace(/^\./,"0.").match(/^\d*(\.?\d{0,2})/g)[0]||"")}function N(s,e){e=="poster_url_a"?v.value=!0:V.value=!0;const u=s.target;t[e].bgW=u.width,t[e].bgH=u.height}function c(s,e,u,a,n){t[n].qrW=u??t[n].qrW,t[n].qrH=a??t[n].qrH,t[n].qrX=s??t[n].qrX,t[n].qrY=e??t[n].qrY}return(s,e)=>{const u=_("el-switch"),a=_("el-text"),n=_("el-form-item"),d=_("el-input"),O=_("el-image"),q=_("el-button"),k=_("dragResize"),P=_("el-form");return U(),W(H,null,[p("div",K,[l(P,{model:t,"label-position":"left"},{default:r(()=>[l(n,{label:"分销开关"},{default:r(()=>[l(u,{modelValue:t.status,"onUpdate:modelValue":e[0]||(e[0]=o=>t.status=o),"active-value":1,"inactive-value":0},null,8,["modelValue"]),l(a,{style:{"margin-left":"20px"}},{default:r(()=>[i("关闭时，【我的】页面关闭分销中心入口。")]),_:1})]),_:1}),l(n,{label:"绑定规则"},{default:r(()=>[l(a,{style:{color:"red"}},{default:r(()=>[i("通过邀请链接/海报进入，操作登录或者注册(包括微信登录)，触发关系绑定。无上级的新用户7天内可被绑定。")]),_:1})]),_:1}),l(n,{label:"分销收益"},{default:r(()=>[l(a,null,{default:r(()=>[i("充值、购买会员订单，实付金额的N%")]),_:1})]),_:1}),l(n,null,{default:r(()=>[l(a,null,{default:r(()=>[i("一级")]),_:1}),l(d,{modelValue:t.senior_grade,"onUpdate:modelValue":e[1]||(e[1]=o=>t.senior_grade=o),style:{width:"120px","margin-left":"20px"},placeholder:"请输入",onInput:e[2]||(e[2]=o=>I(o,"senior_grade"))},{suffix:r(()=>[i("%")]),_:1},8,["modelValue"]),l(a,{style:{"margin-left":"30px"}},{default:r(()=>[i("二级")]),_:1}),l(d,{modelValue:t.second_grade,"onUpdate:modelValue":e[3]||(e[3]=o=>t.second_grade=o),style:{width:"120px","margin-left":"20px"},placeholder:"请输入",onInput:e[4]||(e[4]=o=>I(o,"second_grade"))},{suffix:r(()=>[i("%")]),_:1},8,["modelValue"])]),_:1}),l(n,{label:"开通分销引导图"},{default:r(()=>[l(a,null,{default:r(()=>[i("建议尺寸2:1，500k以下。引导图显示在【我的】页面，非分销员的用户显示。")]),_:1})]),_:1}),l(n,null,{default:r(()=>[l(O,{src:t.guiding_drawing,"preview-src-list":[t.guiding_drawing]},{error:r(()=>[L]),_:1},8,["src","preview-src-list"]),l(q,{size:"small",type:"text",onClick:E,style:{"font-size":"14px"}},{default:r(()=>[i("点击上传")]),_:1})]),_:1}),l(n,{label:"分销规则"},{default:r(()=>[l(a,null,{default:r(()=>[i("简短地说明能赚多少钱，例如 推广下级购买100元会员，获得一级奖励20%，即20元。")]),_:1})]),_:1}),l(n,null,{default:r(()=>[l(d,{modelValue:t.distribution_rule,"onUpdate:modelValue":e[5]||(e[5]=o=>t.distribution_rule=o),type:"textarea",style:{width:"405px"},rows:"5",resize:"none",placeholder:"请输入"},null,8,["modelValue"])]),_:1}),l(n,{label:"推广文案"},{default:r(()=>[l(a,{style:{"font-size":"12px",cursor:"pointer"},onClick:e[6]||(e[6]=z(o=>h(),["stop"]))},{default:r(()=>[i("点击插入"),Z]),_:1})]),_:1}),l(n,null,{default:r(()=>[l(d,{placeholder:"请输入",modelValue:t.copywriting_a,"onUpdate:modelValue":e[7]||(e[7]=o=>t.copywriting_a=o),onClick:e[8]||(e[8]=o=>w("copywriting_a"))},null,8,["modelValue"])]),_:1}),l(n,null,{default:r(()=>[l(d,{placeholder:"请输入",modelValue:t.copywriting_b,"onUpdate:modelValue":e[9]||(e[9]=o=>t.copywriting_b=o),onClick:e[10]||(e[10]=o=>w("copywriting_b"))},null,8,["modelValue"])]),_:1}),l(n,null,{default:r(()=>[l(d,{placeholder:"请输入",modelValue:t.copywriting_c,"onUpdate:modelValue":e[11]||(e[11]=o=>t.copywriting_c=o),onClick:e[12]||(e[12]=o=>w("copywriting_c"))},null,8,["modelValue"])]),_:1}),l(n,null,{default:r(()=>[l(d,{placeholder:"请输入",modelValue:t.copywriting_d,"onUpdate:modelValue":e[13]||(e[13]=o=>t.copywriting_d=o),onClick:e[14]||(e[14]=o=>w("copywriting_d"))},null,8,["modelValue"])]),_:1}),l(n,{label:"推广海报图"},{default:r(()=>[l(a,null,{default:r(()=>[i("建议尺寸2:1，500k以下。上传海报图，可点中二维码拖拽位置及放大缩小。")]),_:1})]),_:1}),l(n,null,{default:r(()=>[p("div",j,[p("img",{class:"postimg",onLoad:e[15]||(e[15]=o=>N(o,"poster_url_a")),src:t.poster_url_a.bgUrl},null,40,$),v.value?(U(),W("div",T,[l(k,{class:"qrcode",onDragging:e[16]||(e[16]=(o,g,f,m)=>c(o,g,f,m,"poster_url_a")),onResizing:e[17]||(e[17]=(o,g,f,m)=>c(o,g,f,m,"poster_url_a")),w:t.poster_url_a.qrW,h:t.poster_url_a.qrH,x:t.poster_url_a.qrX,y:t.poster_url_a.qrY,lockAspectRatio:!0,resizable:!0,parent:!0,onClick:e[18]||(e[18]=z(()=>{},["stop"]))},{default:r(()=>[ee]),_:1},8,["w","h","x","y"])])):D("",!0)]),l(q,{size:"small",type:"text",onClick:e[19]||(e[19]=o=>B("poster_url_a")),style:{"font-size":"14px","margin-right":"40px"}},{default:r(()=>[i("上传海报①")]),_:1})]),_:1}),l(n,{label:"推广海报图"},{default:r(()=>[l(a,null,{default:r(()=>[i("尺寸2:1，建议500k以下")]),_:1})]),_:1}),l(n,null,{default:r(()=>[p("div",te,[p("img",{class:"postimg",onLoad:e[20]||(e[20]=o=>N(o,"poster_url_b")),src:t.poster_url_b.bgUrl},null,40,le),V.value?(U(),W("div",oe,[l(k,{class:"qrcode",onDragging:e[21]||(e[21]=(o,g,f,m)=>c(o,g,f,m,"poster_url_b")),onResizing:e[22]||(e[22]=(o,g,f,m)=>c(o,g,f,m,"poster_url_b")),w:t.poster_url_b.qrW,h:t.poster_url_b.qrH,x:t.poster_url_b.qrX,y:t.poster_url_b.qrY,lockAspectRatio:!0,resizable:!0,parent:!0,onClick:e[23]||(e[23]=z(()=>{},["stop"]))},{default:r(()=>[re]),_:1},8,["w","h","x","y"])])):D("",!0)]),l(q,{size:"small",type:"text",onClick:e[24]||(e[24]=o=>B("poster_url_b")),style:{"font-size":"14px","margin-right":"40px"}},{default:r(()=>[i("上传海报①")]),_:1})]),_:1}),l(n,{label:"提现费率"}),l(n,null,{default:r(()=>[l(d,{modelValue:t.withdrawal_rate,"onUpdate:modelValue":e[25]||(e[25]=o=>t.withdrawal_rate=o),style:{width:"120px"},placeholder:"请输入",onInput:e[26]||(e[26]=o=>I(o,"withdrawal_rate"))},{suffix:r(()=>[i("%")]),_:1},8,["modelValue"])]),_:1}),l(n,{label:"提现公告"}),l(n,null,{default:r(()=>[l(d,{placeholder:"请输入",modelValue:t.withdrawal_notice,"onUpdate:modelValue":e[27]||(e[27]=o=>t.withdrawal_notice=o)},null,8,["modelValue"])]),_:1}),l(n,{label:"分销用户协议"},{default:r(()=>[l(a,null,{default:r(()=>[i("需要详细的协议内容")]),_:1})]),_:1}),l(n,null,{default:r(()=>[l(d,{modelValue:t.agreement,"onUpdate:modelValue":e[28]||(e[28]=o=>t.agreement=o),type:"textarea",rows:"7",resize:"none",placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),p("div",se,[p("button",{type:"button",onClick:e[29]||(e[29]=o=>Y())},"保存")])],64)}}},ie=Q(ne,[["__scopeId","data-v-aa5b9f50"]]);export{ie as default};
