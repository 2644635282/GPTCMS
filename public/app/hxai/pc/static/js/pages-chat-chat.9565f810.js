(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-chat-chat"],{1106:function(t,e,a){"use strict";a("7a82");var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("f320")),o={name:"chat-item",props:{isLoading:{type:Boolean,default:!1},speaker:{type:String,default:"Self"},dynamicId:{type:String,default:"0"},text:{type:String,default:"&nbsp;"}},computed:{mdContenxt:function(){return n.default.render(this.text)}}};e.default=o},"117e":function(t,e,a){t.exports=a.p+"static/img/Vector-1.f353a102.svg"},1223:function(t,e,a){"use strict";a.r(e);var i=a("e637"),n=a("d614");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("ff22");var s=a("f0c5"),c=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"3e72cc1a",null,!1,i["a"],void 0);e["default"]=c.exports},"1eaa":function(t,e,a){"use strict";var i=a("5408"),n=a.n(i);n.a},2953:function(t,a,i){"use strict";i("7a82");var n=i("4ea4").default;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,i("4de4"),i("d3b7"),i("7db0"),i("14d9"),i("159b"),i("99af"),i("ac1f"),i("841c"),i("5319"),i("a434"),i("e25e"),i("5b81");var o,s=n(i("ade3")),c=n(i("c7eb")),r=n(i("1da1")),l=i("39e5"),d=n(i("bb13")),u=n(i("1223")),f=n(i("8180")),p=n(i("6af5")),h=i("f4cf"),m=n(i("c341")),v=null,g=null,x=null,b=(o={name:"easyChat",components:{chatItem:u.default},data:function(){return{isLoading:!1,showDelete:!1,pageLoading:!1,activeIndex:0,socketUrl:"",timeStr:"",clickMic:!1,inputcontent:"",bottomHeight:10,micHeight:255,formatedRecordTime:"00:00:00",recordTime:0,isShowTips:!1,isRecording:!1,isCancel:!1,socketTask:null,form:{},chatList:[],_audioContext:null,options:{},isVoice:!1,chatType:"",model_id:null,models:[],currentModel:null,selectModel:!1,context:m.default,prompts:[],showCollect:!1,showCollectId:0,showModels:!1}},onLoad:function(t){var e=this;return(0,r.default)((0,c.default)().mark((function a(){var i,n,o;return(0,c.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.startChat(t),uni.$on("updateUserInfo",(function(a){e.startChat(t),e.getInfo(),e.$u.post("/hxai/api/chat/getchatset").then((function(t){if(t){e.models=t.data.chatmodel.filter((function(t){return t.status})),e.showModels=1==t.data.chatmodel_status;var a=uni.getStorageSync("chatmodel");a&&(e.currentModel=e.models.find((function(t){return t.type==a}))),e.currentModel||(e.currentModel=e.models[0])}})),e.getRoles()})),e.isVoice=uni.getStorageSync("isVoice"),e.getInfo(),a.next=6,e.$u.post("/hxai/api/chat/getchatset");case 6:return i=a.sent,i&&(e.models=i.data.chatmodel.filter((function(t){return t.status})),e.showModels=1==i.data.chatmodel_status,n=uni.getStorageSync("chatmodel"),n&&(e.currentModel=e.models.find((function(t){return t.type==n}))),e.currentModel||(e.currentModel=e.models[0])),e.getRoles(),a.next=11,e.$u.post("/hxai/api/hot/classify",{classify_limit:4,son_limit:1});case 11:o=a.sent,e.prompts=null===o||void 0===o?void 0:o.data,document.title=m.default.appConfig.title;case 14:case"end":return a.stop()}}),a)})))()},mounted:function(){var t=this;this.$nextTick((function(){v=uni.getRecorderManager(),v.onStart((function(){g=setInterval((function(){t.recordTime+=1,t.formatedRecordTime=t.recordTime}),1e3)})),v.onStop((function(e){if(t.isCancel)t.formatedRecordTime="00:00:00",t.isCancel=!1,t.recordTime=0;else if(t.recordTime<1)t.formatedRecordTime="00:00:00",t.recordTime=0,t.$toast.center("发送时间太短");else{t.recordTime=0;var a=new Date,i={speaker:"Self",contentType:"audio",audioSrc:e.tempFilePath,createTime:a.getTime(),isUndo:!1,isDelete:!1};t.chatList.push(i),t.$nextTick((function(){t.formatedRecordTime="00:00:00"})),t.$refs.socket.sendAudioMsg(i)}}))})),uni.onKeyboardHeightChange((function(e){e.height>0?t.bottomHeight=e.height:t.$nextTick((function(){t.bottomHeight=10}))}))}},(0,s.default)(o,"components",{popup:d.default,chatItem:u.default,uniIcons:f.default,socketItem:p.default}),(0,s.default)(o,"computed",{isVip:function(){return"普通创作3.5"===this.currentModel.expend},getImageList:function(){var t=[];return this.chatList.forEach((function(e,a){"image"==e.contentType&&t.push(e.imageSrc)}),this),t},setButtonBg:function(){return this.isRecording?"bg-blue":"bg-gray"}}),(0,s.default)(o,"methods",{startChat:function(t){var e;x&&(x.close(),x=null),this.chatList=[],this.model_id=t.id,this.chatType=t.type||"chat",e=this.model_id?"".concat(location.origin).concat(location.pathname).concat(location.search,"#/pages/chat/chat?type=").concat(this.chatType,"&id=").concat(this.model_id):"".concat(location.origin).concat(location.pathname).concat(location.search,"#/pages/chat/chat?type=").concat(this.chatType),history.pushState({newUrl:e},document.title,e),this.getInfo()},deleteSession:function(){var t=this;"assist"==this.chatType?this.$u.api.assistDele({model_id:this.model_id}).then((function(e){t.showDelete=!1,t.chatList=[],t.getDataList()})).catch((function(t){console.log(t)})):this.$u.api.chatDele().then((function(){t.showDelete=!1,t.chatList=[],t.getDataList()})).catch((function(){console.log(e)}))},goChat:function(t){var e=this;return(0,r.default)((0,c.default)().mark((function a(){var i,n;return(0,c.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t){a.next=13;break}return a.prev=1,a.next=4,e.$u.api.assistIsHave({model_id:t.id});case 4:i=a.sent,i&&1==i.data.have?e.startChat({id:t.id,type:"assist"}):e.$toast.center("此模型仅VIP会员可用"),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](1),null!==(n=a.t0.data)&&void 0!==n&&n.msg&&e.$toast.center(a.t0.data.msg);case 11:a.next=14;break;case 13:e.startChat({type:"chat"});case 14:case"end":return a.stop()}}),a,null,[[1,8]])})))()},getRoles:function(){var t=this;return(0,r.default)((0,c.default)().mark((function e(){var a;return(0,c.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!m.default.roles){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$u.api.assistClassify();case 4:if(a=e.sent,a){e.next=7;break}return e.abrupt("return");case 7:(a.data||[]).forEach((function(e){e.open=!0,e.items=[],t.$u.api.assistList({classify_id:e.id,page:1,size:100}).then((function(t){t&&(e.items=t.data.item.filter((function(t){return t.status})))}))})),m.default.roles=a.data||[];case 9:case"end":return e.stop()}}),e)})))()},playVoice:function(t){var e=this;return(0,r.default)((0,c.default)().mark((function a(){return(0,c.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:e._audioContext&&e._audioContext.pause(),e._audioContext=null,e.createAudio(t);case 3:case"end":return a.stop()}}),a)})))()},createAudio:function(t){var e=this._audioContext=uni.createInnerAudioContext();return e.autoplay=!1,e.src=t,this._audioContext.play(),e},getVoice:function(t){var e=this;return(0,r.default)((0,c.default)().mark((function a(){var i,n;return(0,c.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=document.querySelector("#dynamic_".concat(t)),a.next=3,e.$u.api.chatVoice({content:i.textContent});case 3:n=a.sent,n&&e.playVoice(n.data);case 5:case"end":return a.stop()}}),a)})))()},goBack:function(){uni.navigateBack({delta:1})},getInfo:function(){var t=this;return(0,r.default)((0,c.default)().mark((function e(){var a;return(0,c.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=null,"chat"==t.chatType){e.next=15;break}return t.pageLoading=!0,e.prev=3,e.next=6,t.$u.api.assistInfo({id:t.model_id});case 6:a=e.sent,t.pageLoading=!1,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),t.pageLoading=!1;case 13:e.next=16;break;case 15:t.form=null;case 16:a&&(t.form=a.data),t.getDataList();case 18:case"end":return e.stop()}}),e,null,[[3,10]])})))()},getDataList:function(){var t=this;return(0,r.default)((0,c.default)().mark((function e(){var a,i,n,o,s,r;return(0,c.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=[],t.pageLoading=!0,e.prev=2,"chat"!=t.chatType){e.next=9;break}return e.next=6,t.$u.api.chatList();case 6:i=e.sent,e.next=12;break;case 9:return e.next=11,t.$u.api.assistChatList({model_id:t.model_id});case 11:i=e.sent;case 12:t.pageLoading=!1,e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](2),t.pageLoading=!1;case 18:i?(n=new Date,o={},i.data.forEach((function(t){o="我"==t.role?{id:t.id||0,status:t.status||0,speaker:"Self",contentType:"text",text:t.content,createTime:n.getTime(),isUndo:!1,isDelete:!1}:{id:t.id||0,status:t.status||0,speaker:"Others",contentType:"text",text:t.content,createTime:n.getTime(),isUndo:!1,isDelete:!1},a.push(o)})),0==a.length&&"chat"!=t.chatType&&(r=uni.getStorageSync("welcome"),a.push({speaker:"Others",contentType:"text",text:(null===(s=t.form)||void 0===s?void 0:s.hint_content)||r||"你好，我是智能AI助手！你现在可以向我提问了！",createTime:n.getTime(),isUndo:!1,isDelete:!1})),t.chatList=a,t.$nextTick((function(){t.$refs.chatListView&&(t.$refs.chatListView.$el.scrollTop=1e6)}))):t.chatList=[];case 19:case"end":return e.stop()}}),e,null,[[2,15]])})))()},getData:function(t){var e,a=this;t=encodeURIComponent(t),e="chat"==this.chatType?this.currentModel?"".concat(h.host,"/hxai/api/chat/send?message=").concat(t,"&chatmodel=").concat(this.currentModel.type):"".concat(h.host,"/hxai/api/chat/send?message=").concat(t):"".concat(h.host,"/hxai/api/rolechat/send?model_id=").concat(this.model_id,"&message=").concat(t),x=new l.EventSourcePolyfill(e,{headers:{wid:uni.getStorageSync("wid")||"1",token:uni.getStorageSync("clitoken")||""}});var i={text:"",speaker:"Others",contentType:"text",isUndo:!1,isDelete:!1,loading:!0,createTime:(new Date).getTime()};x.onopen=function(t){a.isLoading=!0,a.chatList.push(i),a.$nextTick((function(){a.scrollToBottom()})),document.querySelector("textarea").focus()},x.onmessage=function(t){i.text+=t.data.replace(i.text,""),a.$nextTick((function(){a.scrollToBottom()}))},x.onerror=function(t){x.close(),i.createTime=(new Date).getTime(),i.loading=!1,a.isLoading=!1,a.getDataList(),a.$u.api.userInfo().then((function(t){a.context.userInfo=t.data}))}},scrollToBottom:function(){if(this.$refs.chatListView){var t=this.$refs.chatListView.$el,e=t.scrollHeight-t.clientHeight;t.scrollTop=e-20}},sendMessage:function(t){var e=this;return(0,r.default)((0,c.default)().mark((function a(){var i,n;return(0,c.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(m.default.userInfo){a.next=3;break}return uni.$emit("requireLogin",""),a.abrupt("return");case 3:if(e.inputcontent){a.next=5;break}return a.abrupt("return");case 5:i=new Date,e.inputcontent="",t&&!e.isLoading&&(n={text:t},"chat"==e.chatType?n.type="chat":(n.type="rolechat",n.model_id=e.model_id),e.chatList.push({text:t,isUndo:!1,isDelete:!1,speaker:"Self",contentType:"text",createTime:i.getTime()}),e.$nextTick((function(){return e.scrollToBottom()})),e.$u.api.chatCheck(n).then((function(t){t?1!=t.data.code?(e.$nextTick((function(){e.inputcontent=""})),e.getData(t.data.text)):(e.$nextTick((function(){e.inputcontent=""})),e.$toast.center(t.data.text)):e.chatList.splice(e.chatList.length-1,1)})).catch((function(t){"无效的token"!=t.data.msg&&uni.$emit("requirevip",t.data.msg)})));case 8:case"end":return a.stop()}}),a)})))()},stopChat:function(t){x.close(),t.loading=!1,this.isLoading=!1},micHide:function(){this.bottomHeight=0,this.clickMic=!1},micTouchStart:function(t){this.isRecording=!0,v.start({format:"mp3"})},micTouchMove:function(t){},micTouchEnd:function(t){this.isRecording=!1,clearInterval(g),v.stop(),this.$refs.tips.hide()},undo:function(t){var e=parseInt(t.index);this.chatList[e].isUndo=!0},onReciveMessages:function(t){},ontext:function(t){var e=t.data;this.chatList.push(e)},onimage:function(t){var e=t.data;this.chatList.push(e)},onaudio:function(t){var e=t.data;this.chatList.push(e)},reEdit:function(t){this.inputcontent=t},copy:function(t){var e=this,a=t.replaceAll("<br/>","\n");a=a.replaceAll("&nbsp;"," "),uni.setClipboardData({data:a,success:function(){e.$toast.center("复制成功")}})},selectM:function(){var t=this;this.selectModel=!0,this.$nextTick((function(){t.$refs.modelDrop.$el.focus()}))},chooseModel:function(t){this.currentModel=t,uni.setStorageSync("chatmodel",t.type)},onclickCollect:function(t){var e=this;console.log(this.chatType,"this.chatType"),console.log(t,"item"),1==t.status?(this.showCollectId=t.id||0,this.showCollect=!0):"assist"==this.chatType?this.$u.api.assistCollect({model_id:this.model_id,collect_id:t.id||0}).then((function(a){e.$u.toast(a.msg),e.showCollect=!1;var i=e.chatList;i.forEach((function(e,a){e.id==t.id&&(1==e.status?i[a].status=0:i[a].status=1)})),e.chatList=i})).catch((function(t){console.log(t)})):"content"==this.chatType?this.$u.api.createCollect({model_id:this.model_id,collect_id:t.id||0}).then((function(a){e.$u.toast(a.msg),e.showCollect=!1;var i=e.chatList;i.forEach((function(e,a){e.id==t.id&&(1==e.status?i[a].status=0:i[a].status=1)})),e.chatList=i})).catch((function(t){console.log(t)})):"rolechat"==this.chatType?this.$u.api.assistCollect({model_id:this.model_id,collect_id:t.id||0}).then((function(a){e.$u.toast(a.msg),e.showCollect=!1;var i=e.chatList;i.forEach((function(e,a){e.id==t.id&&(1==e.status?i[a].status=0:i[a].status=1)})),e.chatList=i})).catch((function(t){console.log(t)})):this.$u.api.chatCollect({model_id:this.model_id,collect_id:t.id||0}).then((function(a){e.$u.toast(a.msg),e.showCollect=!1;var i=e.chatList;i.forEach((function(e,a){e.id==t.id&&(1==e.status?i[a].status=0:i[a].status=1)})),e.chatList=i})).catch((function(t){console.log(t)}))},collectSession:function(){var t=this;return(0,r.default)((0,c.default)().mark((function e(){return(0,c.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log(t.chatType),console.log(t.showCollectId,"showCollectId"),"assist"!=t.chatType&&"rolechat"!=t.chatType){e.next=8;break}return e.next=5,t.$u.api.assistCollect({model_id:t.model_id,collect_id:t.showCollectId||0}).then((function(e){t.$u.toast(e.msg),t.showCollect=!1;var a=t.chatList;a.forEach((function(e,i){e.id==t.showCollectId&&(1==e.status?a[i].status=0:a[i].status=1)})),t.chatList=a})).catch((function(t){console.log(t)}));case 5:e.sent,e.next=17;break;case 8:if("content"!=t.chatType){e.next=14;break}return e.next=11,t.$u.api.createCollect({model_id:t.model_id,collect_id:t.showCollectId||0}).then((function(e){t.$u.toast(e.msg),t.showCollect=!1;var a=t.chatList;a.forEach((function(e,i){e.id==t.showCollectId&&(1==e.status?a[i].status=0:a[i].status=1)})),t.chatList=a})).catch((function(t){console.log(t)}));case 11:e.sent,e.next=17;break;case 14:return e.next=16,t.$u.api.chatCollect({model_id:t.model_id,collect_id:t.showCollectId||0}).then((function(e){t.$u.toast(e.msg),t.showCollect=!1;var a=t.chatList;a.forEach((function(e,i){e.id==t.showCollectId&&(1==e.status?a[i].status=0:a[i].status=1)})),t.chatList=a})).catch((function(t){console.log(t)}));case 16:e.sent;case 17:case"end":return e.stop()}}),e)})))()}}),o);a.default=b},"3a6d":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".flex[data-v-558a8926]{display:flex}.align-center[data-v-558a8926]{align-items:center}.justify-center[data-v-558a8926]{justify-content:center}.rounded[data-v-558a8926]{border-radius:%?8?%}.border[data-v-558a8926]{border-width:%?1?%;border-style:solid;border-color:#dee2e6}.top-0[data-v-558a8926]{top:0}.left-0[data-v-558a8926]{left:0}.right-0[data-v-558a8926]{right:0}.bottom-0[data-v-558a8926]{bottom:0}.bg-opacity[data-v-558a8926]{background-color:transparent}.bg-white[data-v-558a8926]{background-color:#fff}.position-fixed[data-v-558a8926]{position:fixed}.free-animated[data-v-558a8926]{\n}.bottom-animated[data-v-558a8926]{-webkit-animation:slide-bottom .1s ease 1 0s;animation:slide-bottom .1s ease 1 0s}.z-index[data-v-558a8926]{\nz-index:9999\n}.z-index2[data-v-558a8926]{z-index:10000}",""]),t.exports=e},"3e0f":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var i={uniIcons:a("8180").default,chatItem:a("1223").default,popup:a("bb13").default,uPopup:a("f10e").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"chat-page"},[t.pageLoading?a("v-uni-view",{staticClass:"pageloading"},[a("v-uni-view",{staticClass:"loading gpticon-loading"})],1):t._e(),a("div",{staticClass:"chat-side-bar"},[a("v-uni-view",{staticClass:"side-menu"},[a("v-uni-view",{staticClass:"sub-menu-item",class:{active:"chat"==t.chatType},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goChat()}}},[a("v-uni-view",{staticClass:"sub-menu-icon robot"}),a("v-uni-view",{staticClass:"sub-menu-name"},[t._v("智能AI助手")])],1),t._l(t.context.roles,(function(e,i){return[e.items.length?a("v-uni-view",{staticClass:"menu-group",class:{opened:e.open}},[a("v-uni-view",{staticClass:"menu-item",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),e.open=!e.open}}},[a("v-uni-view",{staticClass:"menu-name"},[t._v(t._s(e.title))]),a("v-uni-view",{staticClass:"menu-toggle gpticon-go"})],1),a("v-uni-view",{staticClass:"sub-menu"},t._l(e.items,(function(e,i){return a("v-uni-view",{key:i,staticClass:"sub-menu-item",class:{active:e.id==t.model_id},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.goChat(e)}}},[a("v-uni-view",{staticClass:"sub-menu-icon",style:{backgroundImage:"url("+e.tp_url+")"}}),a("v-uni-view",{staticClass:"sub-menu-name",class:{isvip:e.vip_status}},[t._v(t._s(e.title))])],1)})),1)],1):t._e()]}))],2)],1),"chat"!=t.chatType||t.chatList.length?a("v-uni-view",{staticClass:"page-content"},[a("v-uni-view",{staticClass:"chat-info"},[a("v-uni-view",{staticClass:"role-info"},["chat"==t.chatType?[a("v-uni-view",{staticClass:"role-portrait robot"}),a("v-uni-view",{staticClass:"chat-detail"},[a("v-uni-view",{staticClass:"role-name"},[t._v("智能AI助手")]),t.form&&t.form.desc?a("v-uni-view",{staticClass:"chat-desc"},[t._v(t._s(t.form.desc))]):t._e()],1)]:t._e(),t.form?[a("v-uni-view",{staticClass:"role-portrait",style:{backgroundImage:"url("+t.form.tp_url+")"}}),a("v-uni-view",{staticClass:"chat-detail"},[a("v-uni-view",{staticClass:"role-name"},[t._v(t._s(t.form.title))]),t.form&&t.form.desc?a("v-uni-view",{staticClass:"chat-desc"},[t._v(t._s(t.form.desc))]):t._e()],1)]:t._e(),a("v-uni-view",{staticClass:"gpticon-delete",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showDelete=!0}}},[t._v("清空")])],2)],1),a("v-uni-view",{staticClass:"chat-pane"},[a("v-uni-view",{ref:"chatListView",staticClass:"chat-list"},t._l(t.chatList,(function(e,i){return 0==e.isDelete?a("v-uni-view",{key:i,staticClass:"chat-item",class:e.speaker},[t.form?a("v-uni-view",{staticClass:"protrait",style:{backgroundImage:"url("+("Self"==e.speaker?(t.context.userInfo||{}).headimgurl:t.form.tp_url)+")"}}):a("v-uni-view",{staticClass:"protrait",class:{robot:"Self"!=e.speaker},style:{backgroundImage:"url("+("Self"==e.speaker?(t.context.userInfo||{}).headimgurl:"")+")"}}),a("v-uni-view",{staticClass:"chat-content"},[a("chat-item",{attrs:{dynamicId:i.toString()+e.createTime,speaker:e.speaker,text:e.text,isLoading:i==t.chatList.length-1&&t.isLoading,contentType:e.contentType,imageSrc:e.imageSrc,imageList:t.getImageList,audioSrc:e.audioSrc,createTime:e.createTime,isUndo:e.isUndo}}),a("v-uni-view",{staticClass:"toolbtns"},["Self"==e.speaker?a("v-uni-view",{staticClass:"chat-edit gpticon-edit",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.reEdit(e.text)}}}):[e.loading?a("v-uni-view",{staticClass:"chat-edit stop gpticon-stop",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.stopChat(e)}}}):[a("v-uni-view",{staticClass:"chat-edit copy gpticon-copy",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.copy(e.text)}}}),1==t.isVoice?a("v-uni-view",{staticClass:"chat-edit voice gpticon-voice",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.getVoice(""+i+e.createTime)}}}):t._e(),e.status&&1==e.status?a("v-uni-view",{staticClass:"chat-edit icon-star gpticon-stared",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.onclickCollect(e)}}}):a("v-uni-view",{staticClass:"chat-edit icon-star gpticon-star",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.onclickCollect(e)}}})]]],2)],1)],1):t._e()})),1),a("v-uni-view",{staticClass:"large-chat-input-wrapper",staticStyle:{"margin-top":"0"}},[a("v-uni-view",{staticClass:"input-wrapper"},[a("v-uni-textarea",{staticClass:"input-body",attrs:{maxlength:"4000",rows:"4",placeholder:"输入您想问的...","confirm-type":"send"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.sendMessage(t.inputcontent)}},model:{value:t.inputcontent,callback:function(e){t.inputcontent="string"===typeof e?e.trim():e},expression:"inputcontent"}})],1),a("div",{staticClass:"chat-config-wrapper"},[a("v-uni-view",{staticClass:"model-wrapper"},[t.showModels&&t.currentModel?[a("v-uni-view",{staticClass:"model-select"},[t.selectModel?a("v-uni-view",{ref:"modelDrop",staticClass:"models",attrs:{tabindex:"1"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.selectModel=!1}}},t._l(t.models,(function(e){return a("v-uni-view",{staticClass:"model-item",attrs:{tabindex:"1"},on:{mousedown:function(a){arguments[0]=a=t.$handleEvent(a),t.chooseModel(e)}}},[a("v-uni-view",{staticClass:"label"},[t._v(t._s(e.nickname))]),t.currentModel==e?a("v-uni-view",{staticClass:"check gpticon-check"}):t._e()],1)})),1):t._e(),a("v-uni-view",{staticClass:"model-value",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectM.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"value"},[t._v(t._s(t.currentModel.nickname))]),a("v-uni-view",{staticClass:"select-icon gpticon-drop"})],1)],1),a("v-uni-view",[t._v(t._s(t.currentModel.expend)+t._s(t.context.unit)+"/次")]),a("v-uni-view",[t._v(t._s("普通创作3.5"===t.currentModel.nickname?" - VIP免费":"")+"\n\t\t\t\t\t\t\t\t\t  "+t._s("备用创作3.5"===t.currentModel.nickname?" - VIP免费":""))]),a("v-uni-view")]:t._e()],2),a("v-uni-view",{staticClass:"send-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendMessage(t.inputcontent)}}},[t._v("发送")])],1)],1)],1)],1):a("v-uni-view",{staticClass:"page-content",staticStyle:{background:"#fff","border-radius":"10px",margin:"20px"}},[a("v-uni-view",{staticClass:"prompt-list-wrapper"},[a("v-uni-view",{staticClass:"prompt-list"},t._l(t.prompts,(function(e,i){return a("v-uni-view",{key:i,staticClass:"prompt-group"},[a("v-uni-view",{staticClass:"prompt-icon",style:{backgroundImage:"url("+e.icon+")"}}),a("v-uni-view",{staticClass:"prompt-group-name"},[t._v(t._s(e.title))]),t._l(e.son,(function(e,i){return a("v-uni-view",{staticClass:"prompt-item",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.inputcontent=e.content,t.sendMessage(e.content)}}},[a("v-uni-view",{staticClass:"line-text"},[t._v(t._s(e.content))]),a("v-uni-view",{staticClass:"gpticon-line-arrow-right"})],1)}))],2)})),1)],1),a("v-uni-view",{staticClass:"chat-input-wrapper",staticStyle:{"margin-top":"0"}},[a("v-uni-input",{ref:"inputRef",staticClass:"chat-input",staticStyle:{"font-size":"15px"},attrs:{maxlength:"4000",rows:"4",placeholder:"输入您想问的...","confirm-type":"send","cursor-spacing":"40","adjust-position":!1},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.sendMessage(t.inputcontent)}},model:{value:t.inputcontent,callback:function(e){t.inputcontent=e},expression:"inputcontent"}}),a("v-uni-view",{staticClass:"chat-submit uniui-paperplane",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendMessage(t.inputcontent)}}},[a("uni-icons",{attrs:{type:"paperplane",color:"#3D3D60",size:"26"}})],1)],1)],1),a("popup",{ref:"micpop",attrs:{maskColor:!1,bottom:!0,bodyBgColor:"bg-white",id:"micpop"},on:{hide:function(e){arguments[0]=e=t.$handleEvent(e),t.micHide.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"col-1",staticStyle:{height:"100%"}},[a("v-uni-view",{staticClass:"flex align-center justify-center text-xl",staticStyle:{height:"20%"}},[t._v(t._s(t.formatedRecordTime))]),a("v-uni-view",{staticClass:"flex align-center justify-center",staticStyle:{height:"50%"}}),0==t.isRecording?a("v-uni-view",{staticClass:"flex align-center justify-center text-xl",staticStyle:{height:"20%"}},[t._v("点击录音")]):t._e(),1==t.isRecording?a("v-uni-view",{staticClass:"flex align-center justify-center text-xl",staticStyle:{height:"20%"}},[t._v("向上滑动取消")]):t._e()],1)],1),a("popup",{ref:"tips",attrs:{maskColor:!1,center:!0,bodyBgColor:"bg-white",mask:!1}},[a("v-uni-view",{staticClass:"col-1 radius",staticStyle:{width:"125px",height:"125px","background-color":"rgba(113, 113, 113, 0.7)"}},[a("v-uni-view",{staticClass:"flex align-center justify-center",staticStyle:{height:"50%","margin-top":"15px"}},[a("uni-icons",{attrs:{type:"refreshempty",size:"60"}})],1),a("v-uni-view",{staticClass:"flex justify-center align-center",staticStyle:{color:"#ffffff"}},[t._v("松手取消发送")])],1)],1),a("u-popup",{attrs:{mode:"center","border-radius":"10"},model:{value:t.showDelete,callback:function(e){t.showDelete=e},expression:"showDelete"}},[a("v-uni-view",{staticClass:"deleteSession"},[a("v-uni-view",{staticClass:"confirm-title"},[t._v("您确定要清除所有聊天记录?")]),a("v-uni-view",{staticClass:"confirm-msg"},[t._v("将清空所有对话中的聊天内容，此操作无法恢复。")]),a("v-uni-view",{staticClass:"confirm-btn"},[a("v-uni-view",{staticClass:"confirm-cancel",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showDelete=!1}}},[t._v("取消")]),a("v-uni-view",{staticClass:"confirm-ok",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.deleteSession.apply(void 0,arguments)}}},[t._v("确定")])],1)],1)],1),a("u-popup",{attrs:{mode:"center","border-radius":"10"},model:{value:t.showCollect,callback:function(e){t.showCollect=e},expression:"showCollect"}},[a("v-uni-view",{staticClass:"deleteSession"},[a("v-uni-view",{staticClass:"confirm-title"},[t._v("您确定要取消收藏吗?")]),a("v-uni-view",{staticClass:"confirm-msg"},[t._v("取消收藏后，可能再也找不到了哦。")]),a("v-uni-view",{staticClass:"confirm-btn"},[a("v-uni-view",{staticClass:"confirm-cancel",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showCollect=!1}}},[t._v("取消")]),a("v-uni-view",{staticClass:"confirm-ok",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.collectSession.apply(void 0,arguments)}}},[t._v("确定")])],1)],1)],1)],1)},o=[]},"3fb5":function(t,e,a){"use strict";a.r(e);var i=a("3e0f"),n=a("6153");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("7a84");var s=a("f0c5"),c=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"5f1f4f3a",null,!1,i["a"],void 0);e["default"]=c.exports},4998:function(t,e,a){"use strict";a("7a82");var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,o=i(a("c7eb")),s=i(a("1da1"));a("d3b7"),a("159b"),a("e9c4"),a("d401"),a("25f0"),a("14d9");var c={name:"socket-item",props:{socketurl:{type:String,default:""}},data:function(){return{}},mounted:function(){var t=this;this.$nextTick((function(){t.init(t.socketurl)}))},beforeDestroy:function(){n.close()},computed:{},methods:{init:function(t){var e=this;n=uni.connectSocket({url:t,data:function(){return{msg:"Hello"}},success:function(t){},fail:function(t){}}),n.onMessage((function(t){var a=JSON.parse(t.data),i=a.data,n="";switch(n=i.contentType?i.contentType:"image",n){case"text":e.onReciveText(i);break;case"image":e.onReciveImage(i);break;case"audio":e.onReciveAudio(i);break;default:break}}))},onReciveText:function(t){var e=new Date,a={speaker:"Others",text:t.text,contentType:"text",createTime:e.getTime(),isUndo:!1,isDelete:!1};this.$emit("ontext",{data:a})},onReciveImage:function(t){var e=this;t.forEach(function(){var t=(0,s.default)((0,o.default)().mark((function t(a,i){var n;return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="http://47.100.189.197/downloadchat/image/?url="+a.imageSrc,t.next=3,uni.downloadFile({url:n,success:function(t){a.imageSrc=t.tempFilePath;var i={speaker:a.speaker,contentType:a.contentType,imageSrc:a.imageSrc,createTime:a.createTime,isUndo:a.isUndo,isDelete:a.isDelete};e.$emit("onimage",{data:i})}});case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())},onReciveAudio:function(t){var e=this,a="http://47.100.189.197/downloadchat/audio/?url="+t.audioSrc;uni.downloadFile({url:a,success:function(a){t.audioSrc=a.tempFilePath,e.$emit("onaudio",{data:t})}})},sendTextMsg:function(t){var e={};e["data"]=t,n.send({data:JSON.stringify(e),success:function(t){},fail:function(t){}})},sendImageMsg:function(t){var e=[],a=[],i=new Date,o={};t.forEach((function(t,e){var i=new Object;i.uri=t,i.name=e.toString(),a.push(i)})),uni.uploadFile({url:"http://47.100.189.197/uploadchat/image/",files:a,formData:{count:t.length,userid:"3"},method:"POST",success:function(t){var a=JSON.parse(t.data),s=a.imageList;s.forEach((function(t,a){var n={speaker:"Others",contentType:"image",imageSrc:t,createTime:i.getTime(),isUndo:!1,isDelete:!1};e.push(n)})),o["data"]=e,n.send({data:JSON.stringify(o),success:function(t){},fail:function(t){}})}})},sendAudioMsg:function(t){var e={};uni.uploadFile({url:"http://47.100.189.197/uploadchat/audio/",filePath:t.audioSrc,name:"audiofile",formData:{userid:"3"},method:"POST",success:function(a){var i=JSON.parse(a.data),o=i.audiopath,s={speaker:"Others",contentType:t.contentType,audioSrc:o,createTime:t.createTime,isUndo:t.isUndo,isDelete:t.isDelete};e["data"]=s,n.send({data:JSON.stringify(e),success:function(t){},fail:function(t){}})}})},sendUndoMsg:function(){}}};e.default=c},5408:function(t,e,a){var i=a("3a6d");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("10066bf7",i,!0,{sourceMap:!1,shadowMode:!1})},6153:function(t,e,a){"use strict";a.r(e);var i=a("2953"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},"6af5":function(t,e,a){"use strict";a.r(e);var i=a("6b74"),n=a("ce30");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);var s=a("f0c5"),c=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"e9f1fde4",null,!1,i["a"],void 0);e["default"]=c.exports},"6b74":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{staticStyle:{display:"none"}})},n=[]},"6fd5":function(t,e,a){var i=a("7132");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("0771783c",i,!0,{sourceMap:!1,shadowMode:!1})},"70c9":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.status?a("div",{staticStyle:{"z-index":"9999",overflow:"hidden"}},[t.mask?a("v-uni-view",{staticClass:"position-fixed top-0 left-0 right-0 bottom-0 z-index",style:t.getMaskColor,on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.hide.apply(void 0,arguments)}}}):t._e(),a("div",{ref:"popup",staticClass:"position-fixed free-animated z-index bottom-animated ",class:t.getBodyClass,style:t.getBodyStyle},[t._t("default")],2)],1):t._e()},n=[]},7132:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".my-chat-item-content[data-v-3e72cc1a]{padding:10px 18px;box-shadow:0 2px 10px rgba(0,0,0,.05);border-radius:20px;display:inline-block;position:relative;height:auto;word-break:break-all;font-size:15px}.selfClass[data-v-3e72cc1a]{color:#000;background:linear-gradient(95.9deg,#9fffbe -.66%,#0cffec 101.97%)}.otherClass[data-v-3e72cc1a]{color:#6d8287}",""]),t.exports=e},7233:function(t,e,a){var i=a("24fb"),n=a("1de5"),o=a("fc93"),s=a("ba55"),c=a("edcd"),r=a("117e");e=i(!1);var l=n(o),d=n(s),u=n(c),f=n(r);e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\r\n * 使用的时候，请将下面的一行复制到您的uniapp项目根目录的uni.scss中即可\r\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \r\n */.chat-page[data-v-5f1f4f3a]{height:100%;display:flex;position:relative;background:#f0f4f4}.chat-page .page-content[data-v-5f1f4f3a]{padding:20px;overflow-y:auto;flex:1;display:flex}.chat-side-bar[data-v-5f1f4f3a]{width:220px;background:#fff;border-left:1px solid #f3f3f3;display:flex;flex-direction:column}.chat-side-bar .side-menu[data-v-5f1f4f3a]{flex:1;overflow-y:overlay;padding:16px}.chat-side-bar .side-menu .menu-group.opened .menu-toggle[data-v-5f1f4f3a]{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.chat-side-bar .side-menu .menu-group.opened .sub-menu[data-v-5f1f4f3a]{height:auto}.chat-side-bar .side-menu .menu-item[data-v-5f1f4f3a]{display:flex;align-items:center;padding:12px;cursor:pointer;margin-bottom:8px}.chat-side-bar .side-menu .menu-item .menu-name[data-v-5f1f4f3a]{flex:1}.chat-side-bar .side-menu .menu-item .menu-toggle[data-v-5f1f4f3a]{font-size:12px}.chat-side-bar .side-menu .sub-menu[data-v-5f1f4f3a]{padding:0 8px;height:0;overflow:hidden}.chat-side-bar .sub-menu-item[data-v-5f1f4f3a]{display:flex;padding:10px;border-radius:14px;cursor:pointer}.chat-side-bar .sub-menu-item[data-v-5f1f4f3a]:not(:last-child){margin-bottom:8px}.chat-side-bar .sub-menu-item[data-v-5f1f4f3a]:hover{background:rgba(231,252,249,.5098039215686274)}.chat-side-bar .sub-menu-item.active[data-v-5f1f4f3a]{color:#0bddc3;background:#e7fcf9}.chat-side-bar .sub-menu-item .sub-menu-icon[data-v-5f1f4f3a]{width:20px;height:20px;min-width:20px;margin-right:6px;background-size:contain;background-repeat:no-repeat;background-position:50%}.chat-side-bar .sub-menu-item .sub-menu-icon.robot[data-v-5f1f4f3a]{background-image:url('+l+')}.chat-side-bar .sub-menu-item .sub-menu-name[data-v-5f1f4f3a]{flex:1}.chat-side-bar .sub-menu-item .sub-menu-name.isvip[data-v-5f1f4f3a]{display:flex;align-items:center}.chat-side-bar .sub-menu-item .sub-menu-name.isvip[data-v-5f1f4f3a]::after{content:"";display:inline-block;background-image:url('+d+");background-repeat:no-repeat;background-size:contain;background-position:50%;min-width:1.4em;height:1em;margin-left:.5em}.chat-side-bar .sidebar-back[data-v-5f1f4f3a]{color:#0bddc3;border-radius:40px;border:1px solid #0bddc3;text-align:center;padding:10px;margin:50px 0;width:120px;align-self:center;text-decoration:none}.chat-side-bar .sidebar-back[data-v-5f1f4f3a]::before{font-size:.8em;margin-right:10px}@-webkit-keyframes rotate-data-v-5f1f4f3a{0%{-webkit-transform:rotate(0) scale(1.2);transform:rotate(0) scale(1.2)}100%{-webkit-transform:rotate(1turn) scale(1.2);transform:rotate(1turn) scale(1.2)}}@keyframes rotate-data-v-5f1f4f3a{0%{-webkit-transform:rotate(0) scale(1.2);transform:rotate(0) scale(1.2)}100%{-webkit-transform:rotate(1turn) scale(1.2);transform:rotate(1turn) scale(1.2)}}.pageloading[data-v-5f1f4f3a]{position:fixed;z-index:1000000000000000;background:rgba(0,0,0,.2);top:0;left:0;right:0;bottom:0}.pageloading .loading[data-v-5f1f4f3a]{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);font-size:40px;padding:40px;background:#fff;color:#888;border-radius:10px}.pageloading .loading[data-v-5f1f4f3a]:before{display:inline-block;-webkit-animation:rotate-data-v-5f1f4f3a 2s linear infinite;animation:rotate-data-v-5f1f4f3a 2s linear infinite}.deleteSession[data-v-5f1f4f3a]{padding:20px;display:flex;flex-direction:column;width:320px}.deleteSession .confirm-title[data-v-5f1f4f3a]{font-size:22px}.deleteSession .confirm-msg[data-v-5f1f4f3a]{margin:30px 0}.deleteSession .confirm-btn[data-v-5f1f4f3a]{display:flex;align-items:center;justify-content:space-between;-webkit-user-select:none;user-select:none}.deleteSession .confirm-btn .confirm-cancel[data-v-5f1f4f3a]{background:#e7fcf9}.deleteSession .confirm-btn .confirm-ok[data-v-5f1f4f3a]{color:#fff;background:#fe4f2f}.deleteSession .confirm-btn > *[data-v-5f1f4f3a]{padding:10px 30px;cursor:pointer;border-radius:10px}.line-text[data-v-5f1f4f3a]{display:-webkit-box;overflow:hidden;text-overflow:ellipsis;word-break:break-all;-webkit-box-orient:vertical;-webkit-line-clamp:2}.prompt-list-wrapper[data-v-5f1f4f3a]{flex:1;overflow-y:overlay;padding:20px 50px}.prompt-list-wrapper .prompt-list[data-v-5f1f4f3a]{grid-template-columns:repeat(auto-fill,minmax(260px,1fr));row-gap:20px;-webkit-column-gap:20px;column-gap:20px;display:grid}.prompt-list-wrapper .prompt-list .prompt-group[data-v-5f1f4f3a]{display:flex;flex-direction:column;align-items:center}.prompt-list-wrapper .prompt-list .prompt-group .prompt-icon[data-v-5f1f4f3a]{width:50px;height:50px;background-size:contain;background-repeat:no-repeat;background-position:50%}.prompt-list-wrapper .prompt-list .prompt-group .prompt-group-name[data-v-5f1f4f3a]{font-size:18px;margin:16px 0 30px}.prompt-list-wrapper .prompt-list .prompt-item[data-v-5f1f4f3a]{width:100%;padding:20px 30px;padding-right:36px;color:#9e9e9e;background:rgba(242,243,240,.6);border:1px solid #e7e7e7;position:relative;cursor:pointer;line-height:1.8em;border-radius:4px}.prompt-list-wrapper .prompt-list .prompt-item .gpticon-line-arrow-right[data-v-5f1f4f3a]{position:absolute;bottom:10px;right:24px}.page-content[data-v-5f1f4f3a]{flex-direction:column}.model-wrapper[data-v-5f1f4f3a]{display:flex;align-items:center;border-radius:20px;position:relative;z-index:1;font-size:12px;color:#888;flex:1;margin-right:20px}.model-wrapper .model-select[data-v-5f1f4f3a]{margin-right:10px;cursor:pointer}.model-wrapper .models[data-v-5f1f4f3a]{padding:10px;position:absolute;background:#fff;bottom:100%;box-shadow:0 0 8px rgba(0,0,0,.1);margin-bottom:4px;border-radius:5px;outline:none;padding:6px}.model-wrapper .models .model-item[data-v-5f1f4f3a]{font-size:13px;display:flex;align-items:center;padding:5px 6px;border-radius:3px}.model-wrapper .models .model-item[data-v-5f1f4f3a]:hover{background:#e7fcf9}.model-wrapper .models .model-item .label[data-v-5f1f4f3a]{margin-right:20px;flex:1}.model-wrapper .models .model-item[data-v-5f1f4f3a]:not(:last-child){margin-bottom:3px}.model-wrapper .models .model-item .check[data-v-5f1f4f3a]{color:#42cbbb}.model-wrapper .model-value[data-v-5f1f4f3a]{display:inline-flex;align-items:center;padding:5px 14px;border-radius:90px;box-shadow:0 0 8px rgba(0,0,0,.1)}.model-wrapper .model-value .value[data-v-5f1f4f3a]{margin-right:5px}.chat-pane[data-v-5f1f4f3a]{flex:1;display:flex;flex-direction:column;background:#fff;border-radius:10px;overflow:hidden}.chat-info[data-v-5f1f4f3a]{padding:10px 20px;padding-left:0}.chat-info .role-info[data-v-5f1f4f3a]{display:flex;align-items:center}.chat-info .role-info .gpticon-delete[data-v-5f1f4f3a]{display:flex;flex-direction:column;align-items:center;font-size:12px;-webkit-user-select:none;user-select:none;cursor:pointer;width:34px;height:34px;min-width:34px;min-height:34px;border-radius:50%;justify-content:center;color:#e12300;margin-left:20px}.chat-info .role-info .gpticon-delete[data-v-5f1f4f3a]:hover{color:#fe4f2f}.chat-info .role-info .gpticon-delete[data-v-5f1f4f3a]:before{margin-bottom:5px;font-size:14px}.chat-info .role-info .role-portrait[data-v-5f1f4f3a]{width:50px;min-width:50px;height:50px;border-radius:50%;background-position:50%;background-repeat:no-repeat;background-size:contain;margin-right:14px;border:2px solid #fff}.chat-info .role-info .role-portrait.robot[data-v-5f1f4f3a]{background-image:url("+l+')!important}.chat-info .role-info .role-name[data-v-5f1f4f3a]{font-size:18px;flex:1}.chat-info .role-info .switch-role[data-v-5f1f4f3a]{padding:10px 13px;background:#fff;color:#42cbbb;border-radius:25px;display:flex;align-items:center;line-height:1}.chat-info .role-info .switch-role .gpticon-switch[data-v-5f1f4f3a]{margin-right:5px}.chat-info .chat-detail[data-v-5f1f4f3a]{display:flex;flex-direction:column;flex:1;overflow:hidden}.chat-info .chat-desc[data-v-5f1f4f3a]{margin-top:4px;color:#3d3d60;line-height:1.6em;font-size:13px;color:#b2bcbf}.chat-list[data-v-5f1f4f3a]{flex:1;overflow-y:auto;background:#fff;padding:25px 0 30px}.chat-list .chat-item[data-v-5f1f4f3a]{display:flex;padding:10px}.chat-list .chat-item img[data-v-5f1f4f3a]{max-width:100%}.chat-list .chat-item.Self[data-v-5f1f4f3a]{flex-direction:row-reverse}.chat-list .chat-item.Self .toolbtns[data-v-5f1f4f3a]{justify-content:end}.chat-list .chat-item.Self .chat-content[data-v-5f1f4f3a]{margin-right:12px}.chat-list .chat-item.Others .chat-content[data-v-5f1f4f3a]{margin-left:12px}.chat-list .toolbtns[data-v-5f1f4f3a]{position:relative;display:flex;align-items:center;padding-top:8px;-webkit-column-gap:12px;column-gap:12px}.chat-list .chat-edit[data-v-5f1f4f3a]{background:#f5f5f5;width:34px;height:34px;min-width:34px;min-height:34px;display:flex;align-self:start;border-radius:50%;align-items:center;justify-content:center;flex-direction:column;color:#c7c7c7;font-size:11px;line-height:1em;cursor:pointer}.chat-list .chat-edit[data-v-5f1f4f3a]:hover{color:#777}.chat-list .chat-edit[data-v-5f1f4f3a]:after{display:inline-block;-webkit-transform:scale(.7);transform:scale(.7)}.chat-list .chat-edit.gpticon-edit[data-v-5f1f4f3a]:after{content:"编辑";font-size:12px}.chat-list .chat-edit.gpticon-copy[data-v-5f1f4f3a]:after{content:"复制";font-size:12px}.chat-list .chat-edit.gpticon-voice[data-v-5f1f4f3a]:after{content:"语音";font-size:12px}.chat-list .chat-edit.gpticon-delete[data-v-5f1f4f3a]:after{content:"清空";font-size:12px}.chat-list .chat-edit.gpticon-star[data-v-5f1f4f3a]:after{content:"收藏";font-size:12px}.chat-list .chat-edit.gpticon-star[data-v-5f1f4f3a]::before{background-image:url('+u+');background-size:12px;background-position:50%;background-repeat:no-repeat}.chat-list .chat-edit.gpticon-stared[data-v-5f1f4f3a]:after{content:"收藏";font-size:12px;color:#fe4f2f}.chat-list .chat-edit.gpticon-stared[data-v-5f1f4f3a]::before{background-image:url('+f+');background-size:12px;background-position:50%;background-repeat:no-repeat}.chat-list .chat-edit.gpticon-stop[data-v-5f1f4f3a]:after{content:"终止";font-size:12px}.chat-list .chat-edit.stop[data-v-5f1f4f3a]{color:red}.chat-list .protrait[data-v-5f1f4f3a]{width:25px;height:25px;min-width:25px;min-height:25px;background-size:cover;background-repeat:no-repeat;background-position:50%;border-radius:50%}.chat-list .protrait.robot[data-v-5f1f4f3a]{background-image:url('+l+")!important}",""]),t.exports=e},"7a84":function(t,e,a){"use strict";var i=a("82b1"),n=a.n(i);n.a},"7c85":function(t,e,a){"use strict";a.r(e);var i=a("d8ab"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},"82b1":function(t,e,a){var i=a("7233");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("b8e56c12",i,!0,{sourceMap:!1,shadowMode:!1})},bb13:function(t,e,a){"use strict";a.r(e);var i=a("70c9"),n=a("7c85");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("1eaa");var s=a("f0c5"),c=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"558a8926",null,!1,i["a"],void 0);e["default"]=c.exports},ce30:function(t,e,a){"use strict";a.r(e);var i=a("4998"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},d614:function(t,e,a){"use strict";a.r(e);var i=a("1106"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},d8ab:function(t,a,i){"use strict";i("7a82"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,i("a9e3"),i("99af"),i("ac1f");var n={props:{maskColor:{type:Boolean,default:!1},mask:{type:Boolean,default:!0},center:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},bodyWidth:{type:Number,default:0},bodyHeight:{type:Number,default:0},bodyBgColor:{type:String,default:"bg-opacity"},transformOrigin:{type:String,default:"left top"},tabbarHeight:{type:Number,default:0}},data:function(){return{status:!1,x:-1,y:-1,maxX:0,maxY:0}},mounted:function(){try{var t=uni.getSystemInfoSync();this.maxX=t.windowWidth-uni.upx2px(this.bodyWidth),this.maxY=t.windowHeight-uni.upx2px(this.bodyHeight)-uni.upx2px(this.tabbarHeight)}catch(e){}},computed:{getMaskColor:function(){var t=this.maskColor?.5:0;return"background-color: rgba(0,0,0,".concat(t,");")},getBodyClass:function(){if(this.center)return"left-0 right-0 bottom-0 top-0 flex align-center justify-center";var t=this.bottom?"left-0 right-0 bottom-0":"";return"".concat(this.bodyBgColor," ").concat(t)},getBodyStyle:function(){var t=this.x>-1?"left:".concat(this.x,"px;"):"",e=this.y>-1?"top:".concat(this.y,"px;"):"";return t+e}},methods:{show:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.status||(t>this.maxX&&this.$emit("outx"),this.x=t>this.maxX?this.maxX-uni.upx2px(.55*this.bodyWidth):t-uni.upx2px(this.bodyWidth/2),this.y=e>this.maxY?this.maxY:e+10,this.status=!0)},hide:function(){this.$emit("hide"),this.status=!1},showNodeInfo:function(t){uni.createSelectorQuery().in(this).select(t).boundingClientRect((function(t){console.log(t)})).exec()}}};a.default=n},e637:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"my-chat-item-content",class:"Others"==this.speaker?"otherClass":"selfClass",attrs:{id:"dynamic_"+this.dynamicId},domProps:{innerHTML:this._s(this.mdContenxt)}})},n=[]},ff22:function(t,e,a){"use strict";var i=a("6fd5"),n=a.n(i);n.a}}]);