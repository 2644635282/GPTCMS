(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-content-writer"],{"040a":function(t,e,a){"use strict";a.r(e);var n=a("c0fa"),i=a("90e30");for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);a("4d8e");var c=a("f0c5"),r=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,"21521c71",null,!1,n["a"],void 0);e["default"]=r.exports},"06b7":function(t,e,a){t.exports=a.p+"static/img/Vector-1.f353a102.svg"},2680:function(t,e,a){"use strict";a("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("a9e3"),a("99af"),a("ac1f");var n={props:{maskColor:{type:Boolean,default:!1},mask:{type:Boolean,default:!0},center:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},bodyWidth:{type:Number,default:0},bodyHeight:{type:Number,default:0},bodyBgColor:{type:String,default:"bg-opacity"},transformOrigin:{type:String,default:"left top"},tabbarHeight:{type:Number,default:0}},data:function(){return{status:!1,x:-1,y:-1,maxX:0,maxY:0}},mounted:function(){try{var t=uni.getSystemInfoSync();this.maxX=t.windowWidth-uni.upx2px(this.bodyWidth),this.maxY=t.windowHeight-uni.upx2px(this.bodyHeight)-uni.upx2px(this.tabbarHeight)}catch(e){}},computed:{getMaskColor:function(){var t=this.maskColor?.5:0;return"background-color: rgba(0,0,0,".concat(t,");")},getBodyClass:function(){if(this.center)return"left-0 right-0 bottom-0 top-0 flex align-center justify-center";var t=this.bottom?"left-0 right-0 bottom-0":"";return"".concat(this.bodyBgColor," ").concat(t)},getBodyStyle:function(){var t=this.x>-1?"left:".concat(this.x,"px;"):"",e=this.y>-1?"top:".concat(this.y,"px;"):"";return t+e}},methods:{show:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.status||(t>this.maxX&&this.$emit("outx"),this.x=t>this.maxX?this.maxX-uni.upx2px(.55*this.bodyWidth):t-uni.upx2px(this.bodyWidth/2),this.y=e>this.maxY?this.maxY:e+10,this.status=!0)},hide:function(){this.$emit("hide"),this.status=!1},showNodeInfo:function(t){uni.createSelectorQuery().in(this).select(t).boundingClientRect((function(t){console.log(t)})).exec()}}};e.default=n},"3a98":function(t,e,a){var n=a("61fb");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("28311373",n,!0,{sourceMap:!1,shadowMode:!1})},"3f3a":function(t,e,a){"use strict";a.r(e);var n=a("b778"),i=a("e262");for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);a("d5b6");var c=a("f0c5"),r=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,"558a8926",null,!1,n["a"],void 0);e["default"]=r.exports},"4d8e":function(t,e,a){"use strict";var n=a("3a98"),i=a.n(n);i.a},"5de9":function(t,e,a){var n=a("7312");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("0941e101",n,!0,{sourceMap:!1,shadowMode:!1})},"61fb":function(t,e,a){var n=a("24fb"),i=a("1de5"),o=a("5034"),c=a("1ee9"),r=a("3bb4"),s=a("06b7");e=n(!1);var d=i(o),l=i(c),u=i(r),p=i(s);e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\r\n * 使用的时候，请将下面的一行复制到您的uniapp项目根目录的uni.scss中即可\r\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \r\n */.chat-page[data-v-21521c71]{height:100%;display:flex;position:relative;background:#f0f4f4}.chat-page .page-content[data-v-21521c71]{padding:20px;overflow-y:auto;flex:1;display:flex}.chat-side-bar[data-v-21521c71]{width:220px;background:#fff;border-left:1px solid #f3f3f3;display:flex;flex-direction:column}.chat-side-bar .side-menu[data-v-21521c71]{flex:1;overflow-y:overlay;padding:16px}.chat-side-bar .side-menu .menu-group.opened .menu-toggle[data-v-21521c71]{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.chat-side-bar .side-menu .menu-group.opened .sub-menu[data-v-21521c71]{height:auto}.chat-side-bar .side-menu .menu-item[data-v-21521c71]{display:flex;align-items:center;padding:12px;cursor:pointer;margin-bottom:8px}.chat-side-bar .side-menu .menu-item .menu-name[data-v-21521c71]{flex:1}.chat-side-bar .side-menu .menu-item .menu-toggle[data-v-21521c71]{font-size:12px}.chat-side-bar .side-menu .sub-menu[data-v-21521c71]{padding:0 8px;height:0;overflow:hidden}.chat-side-bar .sub-menu-item[data-v-21521c71]{display:flex;padding:10px;border-radius:14px;cursor:pointer}.chat-side-bar .sub-menu-item[data-v-21521c71]:not(:last-child){margin-bottom:8px}.chat-side-bar .sub-menu-item[data-v-21521c71]:hover{background:rgba(231,252,249,.5098039215686274)}.chat-side-bar .sub-menu-item.active[data-v-21521c71]{color:#0bddc3;background:#e7fcf9}.chat-side-bar .sub-menu-item .sub-menu-icon[data-v-21521c71]{width:20px;height:20px;min-width:20px;margin-right:6px;background-size:contain;background-repeat:no-repeat;background-position:50%}.chat-side-bar .sub-menu-item .sub-menu-icon.robot[data-v-21521c71]{background-image:url('+d+')}.chat-side-bar .sub-menu-item .sub-menu-name[data-v-21521c71]{flex:1}.chat-side-bar .sub-menu-item .sub-menu-name.isvip[data-v-21521c71]{display:flex;align-items:center}.chat-side-bar .sub-menu-item .sub-menu-name.isvip[data-v-21521c71]::after{content:"";display:inline-block;background-image:url('+l+");background-repeat:no-repeat;background-size:contain;background-position:50%;min-width:1.4em;height:1em;margin-left:.5em}.chat-side-bar .sidebar-back[data-v-21521c71]{color:#0bddc3;border-radius:40px;border:1px solid #0bddc3;text-align:center;padding:10px;margin:50px 0;width:120px;align-self:center;text-decoration:none}.chat-side-bar .sidebar-back[data-v-21521c71]::before{font-size:.8em;margin-right:10px}.chat-page[data-v-21521c71]{\r\n  /* 内容面板 */}.chat-page .deleteSession[data-v-21521c71]{padding:20px;display:flex;flex-direction:column;width:300px}.chat-page .deleteSession .confirm-title[data-v-21521c71]{font-size:20px}.chat-page .deleteSession .confirm-msg[data-v-21521c71]{margin:30px 0}.chat-page .deleteSession .confirm-btn[data-v-21521c71]{display:flex;align-items:center;justify-content:space-between;-webkit-user-select:none;user-select:none}.chat-page .deleteSession .confirm-btn .confirm-cancel[data-v-21521c71]{background:#e7fcf9}.chat-page .deleteSession .confirm-btn .confirm-ok[data-v-21521c71]{color:#fff;background:#fe4f2f}.chat-page .deleteSession .confirm-btn > *[data-v-21521c71]{padding:10px 30px;cursor:pointer;border-radius:10px}.chat-page .chat-wrapper[data-v-21521c71]{width:380px;min-width:380px;margin-right:20px;background:#fff;padding:16px;border-radius:20px}.chat-page .chat-config-wrapper[data-v-21521c71]{display:flex;align-items:center;padding:0 0 10px}.chat-page .chat-config-wrapper .model-wrapper[data-v-21521c71]{display:flex;align-items:center;border-radius:20px;position:relative;z-index:1;font-size:12px;color:#888;flex:1;margin-right:20px;justify-content:space-between}.chat-page .chat-config-wrapper .model-wrapper .model-select[data-v-21521c71]{margin-right:10px;cursor:pointer}.chat-page .chat-config-wrapper .model-wrapper .models[data-v-21521c71]{padding:10px;position:absolute;background:#fff;bottom:100%;box-shadow:0 0 8px rgba(0,0,0,.1);margin-bottom:4px;border-radius:5px;outline:none;padding:6px}.chat-page .chat-config-wrapper .model-wrapper .models .model-item[data-v-21521c71]{font-size:13px;display:flex;align-items:center;padding:5px 6px;border-radius:3px}.chat-page .chat-config-wrapper .model-wrapper .models .model-item[data-v-21521c71]:hover{background:#e7fcf9}.chat-page .chat-config-wrapper .model-wrapper .models .model-item .label[data-v-21521c71]{margin-right:20px;flex:1}.chat-page .chat-config-wrapper .model-wrapper .models .model-item[data-v-21521c71]:not(:last-child){margin-bottom:3px}.chat-page .chat-config-wrapper .model-wrapper .models .model-item .check[data-v-21521c71]{color:#42cbbb}.chat-page .chat-config-wrapper .model-wrapper .model-value[data-v-21521c71]{display:inline-flex;align-items:center;padding:5px 14px;border-radius:90px;box-shadow:0 0 8px rgba(0,0,0,.1)}.chat-page .chat-config-wrapper .model-wrapper .model-value .value[data-v-21521c71]{margin-right:5px}.chat-page .pane-title[data-v-21521c71]{color:#3d3d60;font-size:18px;margin-bottom:12px;margin-left:15px;font-weight:400}.chat-page uni-textarea[data-v-21521c71]{background:#fff;border-radius:20px;width:100%;margin-bottom:20px;padding:15px;box-sizing:border-box;font-size:.9em;height:300px;border:1px solid #f0f4f4}.chat-page .btns[data-v-21521c71]{display:flex;align-items:center;margin-bottom:20px}.chat-page .btns uni-button[data-v-21521c71]{border-radius:70px;border:none;padding:16px 25px;line-height:1;font-size:16px}.chat-page .btns uni-button[data-v-21521c71]::after, .chat-page .btns uni-button[data-v-21521c71]::before{display:none}.chat-page .btns uni-button .icon[data-v-21521c71]{display:inline-block;margin-right:10px;position:relative;top:2px}.chat-page .btns .clear[data-v-21521c71]{border:1px solid #d9d9d9;color:#888}@-webkit-keyframes rotate-data-v-21521c71{0%{-webkit-transform:rotate(0) scale(1.2);transform:rotate(0) scale(1.2)}100%{-webkit-transform:rotate(1turn) scale(1.2);transform:rotate(1turn) scale(1.2)}}@keyframes rotate-data-v-21521c71{0%{-webkit-transform:rotate(0) scale(1.2);transform:rotate(0) scale(1.2)}100%{-webkit-transform:rotate(1turn) scale(1.2);transform:rotate(1turn) scale(1.2)}}.chat-page .btns .save[data-v-21521c71]{margin-left:20px;flex:1;background:linear-gradient(95.9deg,#9fffbe -.66%,#0cffec 101.97%)}.chat-page .btns .save .gpticon-loading[data-v-21521c71]{-webkit-animation:rotate-data-v-21521c71 2s linear infinite;animation:rotate-data-v-21521c71 2s linear infinite}.chat-page .content-pane[data-v-21521c71]{padding:16px;background:#fff;border-radius:20px;overflow:hidden;display:flex;flex-direction:column;flex:1}.chat-page .content-pane .pane-content[data-v-21521c71]{overflow-y:overlay;flex:1}.chat-page .content-wrapper[data-v-21521c71]{border-radius:20px;background:linear-gradient(95.9deg,rgba(159,255,190,.2) -.66%,rgba(12,255,236,.2) 101.97%)}.chat-page .content-wrapper .content-box[data-v-21521c71]{padding:15px;display:flex;align-items:start}.chat-page .content-wrapper .content[data-v-21521c71]{display:flex;align-items:start;padding:0 15px;flex:1;word-break:break-all;-webkit-user-select:text;user-select:text}.chat-page .content-wrapper .protrait[data-v-21521c71]{margin-right:10px;border-radius:50%;width:30px;height:30px;min-width:30px;min-height:30px;background-repeat:no-repeat;background-position:50%;background-size:cover;background-image:url("+d+")}.chat-page .content-wrapper .content-q[data-v-21521c71]{color:#6d8287}.chat-page .content-wrapper .content-a[data-v-21521c71]{font-size:16px;color:#6d8287}.chat-page .content-wrapper .a-wrapper[data-v-21521c71]{border-radius:20px;background:#fff;border:1px solid #9fffbe}.chat-page .content-wrapper .a-btns[data-v-21521c71]{display:flex;justify-content:end;padding:0 20px 20px}.chat-page .content-wrapper .a-btns > *[data-v-21521c71]{border-radius:30px;padding:6px 10px;font-size:12px;line-height:1.4em}.chat-page .content-wrapper .a-btns > *[data-v-21521c71]:before{margin-right:3px;position:relative;top:2px}.chat-page .content-wrapper .a-btns .a-rewrite[data-v-21521c71]{background:#dbfcef;color:#78bf8f;margin-left:15px;margin-left:15px}.chat-page .content-wrapper .a-btns .a-copy[data-v-21521c71]{margin-left:15px;color:#ccab93;background:#fff3ea}.chat-page .content-wrapper .a-btns .gpticon-star[data-v-21521c71]::before{background-color:#fff;background-position:50%;background-repeat:no-repeat;background-image:url("+u+");background-size:12px}.chat-page .content-wrapper .a-btns .gpticon-star[data-v-21521c71]{font-size:12px}.chat-page .content-wrapper .a-btns .gpticon-stared[data-v-21521c71]{font-size:12px;color:#fe4f2f}.chat-page .content-wrapper .a-btns .gpticon-stared[data-v-21521c71]::before{background-image:url("+p+");background-size:12px;background-position:50%;background-repeat:no-repeat}",""]),t.exports=e},7312:function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,".flex[data-v-558a8926]{display:flex}.align-center[data-v-558a8926]{align-items:center}.justify-center[data-v-558a8926]{justify-content:center}.rounded[data-v-558a8926]{border-radius:%?8?%}.border[data-v-558a8926]{border-width:%?1?%;border-style:solid;border-color:#dee2e6}.top-0[data-v-558a8926]{top:0}.left-0[data-v-558a8926]{left:0}.right-0[data-v-558a8926]{right:0}.bottom-0[data-v-558a8926]{bottom:0}.bg-opacity[data-v-558a8926]{background-color:transparent}.bg-white[data-v-558a8926]{background-color:#fff}.position-fixed[data-v-558a8926]{position:fixed}.free-animated[data-v-558a8926]{\n}.bottom-animated[data-v-558a8926]{-webkit-animation:slide-bottom .1s ease 1 0s;animation:slide-bottom .1s ease 1 0s}.z-index[data-v-558a8926]{\nz-index:9999\n}.z-index2[data-v-558a8926]{z-index:10000}",""]),t.exports=e},"90e30":function(t,e,a){"use strict";a.r(e);var n=a("b89a"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},a645:function(t,e,a){"use strict";a("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={form:{model:function(){return{}},rules:function(){return{}},errorType:"message",borderBottom:!0,labelPosition:"left",labelWidth:45,labelAlign:"left",labelStyle:function(){return{}}}}},b778:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.status?a("div",{staticStyle:{"z-index":"9999",overflow:"hidden"}},[t.mask?a("v-uni-view",{staticClass:"position-fixed top-0 left-0 right-0 bottom-0 z-index",style:t.getMaskColor,on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.hide.apply(void 0,arguments)}}}):t._e(),a("div",{ref:"popup",staticClass:"position-fixed free-animated z-index bottom-animated ",class:t.getBodyClass,style:t.getBodyStyle},[t._t("default")],2)],1):t._e()},i=[]},b89a:function(t,e,a){"use strict";a("7a82");var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("d3b7"),a("159b"),a("4de4"),a("7db0"),a("99af"),a("14d9"),a("ac1f"),a("5319"),a("5b81");var i=n(a("c7eb")),o=n(a("1da1")),c=n(a("ade3")),r=n(a("1572")),s=(n(a("3f3a")),n(a("a645")),a("eade")),d=a("3612"),l=n(a("29a2")),u=null,p={name:"easyChat",data:function(){var t;return t={chatList:[],model_id:null,form:{},message:"",placeholder:"",isLoading:!1,isChecking:!1,userInfo:{},context:r.default},(0,c.default)(t,"model_id",null),(0,c.default)(t,"models",[]),(0,c.default)(t,"currentModel",null),(0,c.default)(t,"selectModel",!1),(0,c.default)(t,"showCollect",!1),(0,c.default)(t,"showCollectId",0),(0,c.default)(t,"showModels",!1),t},onLoad:function(t){var e=this;return(0,o.default)((0,i.default)().mark((function a(){var n;return(0,i.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.model_id=t.id,e.placeholder=t.msg,e.getInfo(),a.next=5,e.$u.api.userInfo();case 5:e.userInfo=a.sent,e.userInfo=(null===(n=e.userInfo)||void 0===n?void 0:n.data)||{},r.default.writerTemplates?r.default.writerTemplates.forEach((function(t){t.open=t.items.some((function(t){return t.id==e.model_id}))})):uni.navigateTo({url:"/pages/content/content"}),document.title=r.default.appConfig.title;case 9:case"end":return a.stop()}}),a)})))()},computed:{answer:function(){var t=this.chatList.filter((function(t){return"我"!=t.role}));return t.length?t.pop():null},question:function(){var t=this.chatList.filter((function(t){return"我"==t.role}));return t.length?t.pop():null}},methods:{mdContenxt:function(t){return l.default.render(t)},save:function(){var t=this;return(0,o.default)((0,i.default)().mark((function e(){return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$u.api.createDele({model_id:t.model_id}).then((function(e){e&&(t.chatList=[],t.getDataList())})).catch((function(t){}));case 1:case"end":return e.stop()}}),e)})))()},goBack:function(){uni.navigateBack({delta:1})},getInfo:function(){var t=this;return(0,o.default)((0,i.default)().mark((function e(){return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$u.api.createInfo({id:t.model_id}).then((function(e){t.form=e.data})),t.getDataList(),t.$u.post("/hxai/api/chat/getchatset").then((function(e){if(e){t.models=e.data.chatmodel.filter((function(t){return t.status})),t.showModels=1==e.data.chatmodel_status;var a=uni.getStorageSync("chatmodel");a&&(t.currentModel=t.models.find((function(t){return t.type==a}))),t.currentModel||(t.currentModel=t.models[0])}}));case 3:case"end":return e.stop()}}),e)})))()},getDataList:function(){var t=this;return(0,o.default)((0,i.default)().mark((function e(){var a;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$u.api.createChatList({model_id:t.model_id});case 2:a=e.sent,t.chatList=a.data;case 4:case"end":return e.stop()}}),e)})))()},getData:function(t){var e,a=this,n="".concat(s.host,"/hxai/api/createchat/send?model_id=").concat(this.model_id,"&message=").concat(t,"&chatmodel=").concat(null===(e=this.currentModel)||void 0===e?void 0:e.type);u=new d.EventSourcePolyfill(n,{headers:{wid:uni.getStorageSync("wid")||"1",token:uni.getStorageSync("clitoken")||""}});var i={speaker:"Others",contentType:"text",content:""};this.isLoading=!0,u.onopen=function(t){var e=new Date;i.createTime=e.getTime(),a.chatList.push(i),a.$nextTick((function(){a.scrollToBottom()}))},u.onmessage=function(t){a.$nextTick((function(){i.content+=t.data,a.scrollToBottom()}))},u.onerror=function(t){u.close(),a.isLoading=!1,a.getDataList(),uni.$emit("updateUserInfo"),a.$nextTick((function(){a.scrollToBottom()}))}},stopWriting:function(){this.isLoading=!1,u.close()},scrollToBottom:function(){this.$refs.pageContent&&this.$refs.pageContent.$el.scrollTo({top:1e6,behavior:"smooth"})},sendMessage:function(t){var e=this;return(0,o.default)((0,i.default)().mark((function a(){var n;return(0,i.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r.default.userInfo){a.next=3;break}return uni.$emit("requireLogin",""),a.abrupt("return");case 3:n=new Date,t&&!e.isLoading&&(e.isChecking=!0,e.$u.api.chatCheck({text:t,type:"createchat",model_id:e.model_id}).then((function(t){t&&(1!=t.data.code?(e.chatList.push({role:"我",speaker:"Self",contentType:"text",content:t.data.text,createTime:n.getTime()}),e.getData(t.data.text)):e.$toast.center(t.data.text))})).catch((function(t){"无效的token"!=t.data.msg&&uni.$emit("requirevip",t.data.msg)})).finally((function(){e.isChecking=!1})));case 5:case"end":return a.stop()}}),a)})))()},copy:function(t){var e=this,a=t.replaceAll("<br/>","\n");a=a.replaceAll("&nbsp;"," "),uni.setClipboardData({data:a,success:function(){e.$toast.center("复制成功")}})},goChat:function(t){var e=this;return(0,o.default)((0,i.default)().mark((function a(){var n,o;return(0,i.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.$u.api.createIsHave({model_id:t.id});case 3:n=a.sent,n&&1==n.data.have?uni.navigateTo({url:"/pages/content/writer?id=".concat(t.id,"&msg=").concat(encodeURIComponent(t.hint_content))}):e.$toast.center("此模型仅VIP会员可用"),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),null!==(o=a.t0.data)&&void 0!==o&&o.msg&&e.$toast.center(a.t0.data.msg);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},selectM:function(){var t=this;this.selectModel=!0,this.$nextTick((function(){t.$refs.modelDrop.$el.focus()}))},chooseModel:function(t){this.currentModel=t,uni.setStorageSync("chatmodel",t.type)},onclickCollect:function(t){var e=this;1==t.status?(this.showCollectId=t.id||0,this.showCollect=!0):this.$u.api.createCollect({model_id:this.model_id,collect_id:t.id||0}).then((function(a){e.$u.toast(a.msg),e.showCollect=!1;var n=e.chatList;n.forEach((function(e,a){e.id==t.id&&(1==e.status?n[a].status=0:n[a].status=1)})),e.chatList=n})).catch((function(t){console.log(t)}))},collectSession:function(){var t=this;return(0,o.default)((0,i.default)().mark((function e(){return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$u.api.createCollect({model_id:t.model_id,collect_id:t.showCollectId||0}).then((function(e){t.$u.toast(e.msg),t.showCollect=!1;var a=t.chatList;a.forEach((function(e,n){e.id==t.showCollectId&&(1==e.status?a[n].status=0:a[n].status=1)})),t.chatList=a})).catch((function(t){console.log(t)}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})))()}}};e.default=p},c0fa:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return n}));var n={uPopup:a("4260").default},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"chat-page"},[a("div",{staticClass:"chat-side-bar"},[a("v-uni-view",{staticClass:"side-menu"},t._l(t.context.writerTemplates,(function(e,n){return a("v-uni-view",{staticClass:"menu-group",class:{opened:e.open}},[a("v-uni-view",{staticClass:"menu-item",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),e.open=!e.open}}},[a("v-uni-view",{staticClass:"menu-name"},[t._v(t._s(e.title))]),a("v-uni-view",{staticClass:"menu-toggle gpticon-go"})],1),a("v-uni-view",{staticClass:"sub-menu"},t._l(e.items,(function(e,n){return a("v-uni-view",{key:n,staticClass:"sub-menu-item",class:{active:e.id==t.model_id},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.goChat(e)}}},[a("v-uni-view",{staticClass:"sub-menu-icon",style:{backgroundImage:"url("+e.tp_url+")"}}),a("v-uni-view",{staticClass:"sub-menu-name"},[t._v(t._s(e.title))])],1)})),1)],1)})),1),a("router-link",{staticClass:"sidebar-back gpticon-back",attrs:{to:"/pages/content/content"}},[t._v("返回")])],1),a("v-uni-view",{ref:"pageContent",staticClass:"page-content"},[a("v-uni-view",{staticClass:"chat-wrapper"},[a("v-uni-view",{staticClass:"pane-title"},[t._v(t._s(t.form.title))]),a("v-uni-textarea",{attrs:{rows:"4",placeholder:t.placeholder,maxlength:"4000"},model:{value:t.message,callback:function(e){t.message="string"===typeof e?e.trim():e},expression:"message"}}),t.showModels?a("div",{staticClass:"chat-config-wrapper"},[t.currentModel?a("v-uni-view",{staticClass:"model-wrapper"},[a("v-uni-view",{staticClass:"model-select"},[t.selectModel?a("v-uni-view",{ref:"modelDrop",staticClass:"models",attrs:{tabindex:"1"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.selectModel=!1}}},t._l(t.models,(function(e){return a("v-uni-view",{staticClass:"model-item",attrs:{tabindex:"1"},on:{mousedown:function(a){arguments[0]=a=t.$handleEvent(a),t.chooseModel(e)}}},[a("v-uni-view",{staticClass:"label"},[t._v(t._s(e.nickname))]),t.currentModel==e?a("v-uni-view",{staticClass:"check gpticon-check"}):t._e()],1)})),1):t._e(),a("v-uni-view",{staticClass:"model-value",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectM.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"value"},[t._v(t._s(t.currentModel.nickname))]),a("v-uni-view",{staticClass:"select-icon gpticon-drop"})],1)],1),a("v-uni-view",[t._v(t._s(t.currentModel.expend)+t._s(t.context.unit)+"/次")])],1):t._e()],1):t._e(),a("v-uni-view",{staticClass:"btns"},[a("v-uni-button",{staticClass:"clear",attrs:{disabled:t.isLoading},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.message=""}}},[a("span",{staticClass:"gpticon-delete icon"}),a("span",[t._v("清空输入")])]),t.isLoading?a("v-uni-button",{staticClass:"save",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.stopWriting.apply(void 0,arguments)}}},[t.isLoading?a("span",{staticClass:"gpticon-loading icon"}):t._e(),a("span",[t._v("终止创作")])]):a("v-uni-button",{staticClass:"save",attrs:{disabled:t.isLoading||!t.message||t.isChecking},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendMessage(t.message)}}},[t.isLoading?a("span",{staticClass:"gpticon-loading icon"}):t._e(),a("span",[t._v("开始创作")])])],1)],1),a("v-uni-view",{staticClass:"content-pane"},[a("v-uni-view",{staticClass:"pane-title"},[t._v("生成文案")]),a("v-uni-view",{staticClass:"pane-content"},[t.answer||t.question?a("v-uni-view",{staticClass:"content-wrapper"},[t.question?a("v-uni-view",{staticClass:"content-box content-q"},[a("v-uni-view",{staticClass:"protrait q-protrait",style:{backgroundImage:"url("+t.userInfo.headimgurl+")"}}),a("v-uni-view",{staticClass:"content q-content"},[t._v(t._s(t.question.content))])],1):t._e(),t.answer?a("v-uni-view",{staticClass:"a-wrapper"},[a("v-uni-view",{staticClass:"content-box content-a"},[a("v-uni-view",{staticClass:"protrait a-protrait"}),a("v-uni-view",{staticClass:"mdcontent",domProps:{innerHTML:t._s(t.mdContenxt(t.answer.content))}})],1),t.isLoading?t._e():a("v-uni-view",{staticClass:"a-btns"},[t.answer.status&&1==t.answer.status?a("v-uni-view",{staticClass:"icon-star gpticon-stared",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onclickCollect(t.answer)}}},[t._v("已收藏")]):a("v-uni-view",{staticClass:"icon-star gpticon-star",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onclickCollect(t.answer)}}},[t._v("收藏")]),t.question?a("v-uni-view",{staticClass:"a-rewrite gpticon-reload",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendMessage(t.question.content),t.message=t.question.content}}},[t._v("重新创作")]):t._e(),t.answer?a("v-uni-view",{staticClass:"a-copy gpticon-copy",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.copy(t.answer.content)}}},[t._v("复制文案")]):t._e()],1)],1):t._e()],1):t._e()],1)],1)],1),a("u-popup",{attrs:{mode:"center","border-radius":"10"},model:{value:t.showCollect,callback:function(e){t.showCollect=e},expression:"showCollect"}},[a("v-uni-view",{staticClass:"deleteSession"},[a("v-uni-view",{staticClass:"confirm-title"},[t._v("您确定要取消收藏吗?")]),a("v-uni-view",{staticClass:"confirm-msg"},[t._v("取消收藏后，可能再也找不到了哦。")]),a("v-uni-view",{staticClass:"confirm-btn"},[a("v-uni-view",{staticClass:"confirm-cancel",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showCollect=!1}}},[t._v("取消")]),a("v-uni-view",{staticClass:"confirm-ok",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.collectSession.apply(void 0,arguments)}}},[t._v("确定")])],1)],1)],1)],1)},o=[]},d5b6:function(t,e,a){"use strict";var n=a("5de9"),i=a.n(n);i.a},e262:function(t,e,a){"use strict";a.r(e);var n=a("2680"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a}}]);