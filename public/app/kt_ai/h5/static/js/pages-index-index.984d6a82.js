(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{"058c":function(e,t,i){"use strict";i.r(t);var n=i("4003"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a},"178c":function(e,t,i){"use strict";i.r(t);var n=i("aa8c"),a=i("410d");for(var o in a)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(o);var r=i("f0c5"),s=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"f9c8e200",null,!1,n["a"],void 0);t["default"]=s.exports},"29ab":function(e,t,i){"use strict";i.r(t);var n=i("f5b0"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a},"2d88":function(e,t,i){"use strict";i("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={toast:{zIndex:10090,loading:!1,text:"",icon:"",type:"",loadingMode:"",show:"",overlay:!1,position:"center",params:function(){},duration:2e3,isTab:!1,url:"",callback:null,back:!1}}},"2ebc":function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return n}));var n={uniIcons:i("6075").default,uImage:i("8083").default,chatItem:i("9058").default,popup:i("0cc8").default,uPopup:i("7cd7").default,zRecord:i("b3d5").default},a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"s-back"},[i("v-uni-view",{staticClass:"s-back",style:{paddingTop:e.statusbarHeight+"px"}},[i("v-uni-view",{staticClass:"s-back"},[i("v-uni-view",{staticClass:"s-back"},[i("v-uni-view",{staticClass:"index-line1",staticStyle:{color:"#fff"}},[e.isShowHightPaint?i("v-uni-view",{staticClass:"index1",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.jumpHighPaint.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"index1-text",staticStyle:{"margin-left":"8px","margin-top":"4px","margin-bottom":"4px"}},[e._v("AI绘画")])],1):i("v-uni-view",{staticClass:"index1",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.subscribe.apply(void 0,arguments)}}},[i("uni-icons",{attrs:{type:"plus-filled",color:"#000",size:"30"}}),i("v-uni-view",{staticClass:"index1-text"},[e._v("订阅")])],1),i("v-uni-view",{staticClass:"index2"},[e._v(e._s(e.pageTitle))]),i("v-uni-view",{staticClass:"index3"},[i("v-uni-view",{staticStyle:{width:"80px",display:"flex","justify-content":"flex-end"}},[e.isCanPaint?i("v-uni-image",{staticStyle:{width:"34px",height:"30px"},attrs:{src:"/static/tabbar/5_a.png"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.goPaint.apply(void 0,arguments)}}}):e._e()],1)],1)],1),i("v-uni-scroll-view",{staticClass:"scrollView",style:{background:"#1A2134",paddingBottom:"20px",width:e.screenWidth+"px",height:e.screenHeight-e.bottomHeight-e.statusbarHeight-108+"px",position:"relative"},attrs:{"scroll-y":"true","scroll-x":"true","scroll-top":e.scrollTopHeight,"show-scrollbar":"true","scroll-into-view":e.getScrollView,"scroll-with-animation":"true"}},[i("v-uni-view",{attrs:{id:"scroll-view-content"}},[e._l(e.themeList,(function(t,n){return i("v-uni-view",{key:n,staticClass:"index-line-mb12"},[i("v-uni-view",{staticClass:"index-line3"},[i("u-image",{staticStyle:{"margin-right":"6px"},attrs:{src:t.icon,width:"50",height:"50"}}),e._v(e._s(t.title))],1),e._l(t.son,(function(t,n){return i("v-uni-view",{key:n,staticClass:"index-line2",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.sendMessage(t.content)}}},[i("v-uni-text",[e._v(e._s(t.content))]),i("uni-icons",{staticStyle:{"margin-left":"6px"},attrs:{type:"arrow-right",color:"#80E58B",size:"20"}})],1)}))],2)})),e._l(e.chatList,(function(t,n){return 0==t.isDelete?i("v-uni-view",{key:n,class:"Self"==t.speaker?"index-flex-right":"index-flex-left"},["Self"==t.speaker&&t.isUndo?i("div",{staticClass:"index-no"},[e._v("!")]):e._e(),i("chat-item",{attrs:{dynamicId:n.toString(),speaker:t.speaker,text:t.text,textTemp:e.textTemp,isLoading:n==e.chatList.length-1&&e.isLoading,contentType:t.contentType,imageSrc:t.imageSrc,imageList:e.getImageList,audioSrc:t.audioSrc,isUndo:t.isUndo},on:{undo:function(t){arguments[0]=t=e.$handleEvent(t),e.undo.apply(void 0,arguments)},delete:function(t){arguments[0]=t=e.$handleEvent(t),e.deleted.apply(void 0,arguments)}}}),"Others"==t.speaker&&1==e.isVoice?i("div",{staticClass:"index-mt12"},[i("v-uni-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:"/static/img/voice.png"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getVoice(n)}}})],1):e._e()],1):e._e()}))],2),i("div",{staticStyle:{width:"100%"},style:{height:e.isEmpty?"280rpx":"260rpx"}})],1)],1),i("v-uni-view",{staticStyle:{position:"absolute",bottom:"0px"},style:{width:e.screenWidth+"px"}},[i("v-uni-view",{staticStyle:{"margin-bottom":"10px",padding:"0 16px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("v-uni-view",[1==e.form.chatmodel_status&&e.form.chatmodel.length>0?i("v-uni-view",{staticStyle:{background:"#1A2134",border:"1px solid #80E58B",color:"#80E58B","border-radius":"30px",padding:"6px 14px"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.isShowModel=!0}}},[e._v(e._s(e.form.chatmodel[e.current].nickname||e.form.chatmodel[e.current].type)),i("uni-icons",{staticStyle:{"margin-left":"10px"},attrs:{type:"bottom",color:"#80E58B",size:"10"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendMessage(e.inputcontent)}}})],1):e._e()],1),e.form.chatmodel.length>0?i("v-uni-view",{staticStyle:{color:"#999",background:"#1A2134",padding:"6px 10px","border-radius":"20px"}},[e._v("每次消耗"+e._s(e.form.chatmodel[e.current].expend+e.unit))]):e._e()],1),i("v-uni-view",{staticClass:"bottomClass",staticStyle:{"background-color":"rgb(21, 21, 32)"},style:"position: abosolute;bottom:"+(e.bottomHeight+60).toString()+"px;left:0;right:0;width:auto;display:block"},[i("v-uni-view",{staticClass:"new-bottom"},[i("v-uni-view",{staticClass:"index-inp uni-row uni-flex",staticStyle:{"align-content":"center","justify-content":"center"}},[i("div",{staticClass:"example1 out"},[i("div",{staticClass:"inputClass in"},[i("v-uni-textarea",{ref:"inputRef",staticClass:"index-inp-inner",staticStyle:{"font-size":"30rpx"},attrs:{maxlength:-1,"auto-height":!0,placeholder:"输入您想问的...","confirm-type":"send","cursor-spacing":"40"},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.sendMessage.apply(void 0,arguments)},keyboardheightchange:function(t){arguments[0]=t=e.$handleEvent(t),e.getKeyBoradHeight.apply(void 0,arguments)}},model:{value:e.inputcontent,callback:function(t){e.inputcontent=t},expression:"inputcontent"}})],1)])]),i("uni-icons",{staticStyle:{margin:"0 10px"},attrs:{type:"paperplane",color:"#80E58B",size:"25"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendMessage(e.inputcontent)}}})],1)],1)],1)],1)],1),i("popup",{ref:"micpop",attrs:{maskColor:!1,bottom:!0,bodyBgColor:"bg-white",id:"micpop"},on:{hide:function(t){arguments[0]=t=e.$handleEvent(t),e.micHide.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"col-1",staticStyle:{height:"100%"}},[i("v-uni-view",{staticClass:"flex align-center justify-center text-xl",staticStyle:{height:"20%"}},[e._v(e._s(e.formatedRecordTime))]),i("v-uni-view",{staticClass:"flex align-center justify-center",staticStyle:{height:"50%"}},[i("v-uni-button",{staticClass:"cu-btn cuIcon  shadow",class:e.setButtonBg,staticStyle:{width:"200rpx",height:"200rpx"},attrs:{id:"micbutton"},on:{touchmove:function(t){arguments[0]=t=e.$handleEvent(t),e.micTouchMove.apply(void 0,arguments)},touchend:function(t){arguments[0]=t=e.$handleEvent(t),e.micTouchEnd.apply(void 0,arguments)},touchstart:function(t){arguments[0]=t=e.$handleEvent(t),e.micTouchStart.apply(void 0,arguments)}}},[i("uni-icons",{attrs:{type:"mic",size:"40"}})],1)],1),0==e.isRecording?i("v-uni-view",{staticClass:"flex align-center justify-center text-xl",staticStyle:{height:"20%"}},[e._v("点击录音")]):e._e(),1==e.isRecording?i("v-uni-view",{staticClass:"flex align-center justify-center text-xl",staticStyle:{height:"20%"}},[e._v("向上滑动取消")]):e._e()],1)],1),i("popup",{ref:"tips",attrs:{maskColor:!1,center:!0,bodyBgColor:"bg-white",mask:!1}},[i("v-uni-view",{staticClass:"col-1 radius",staticStyle:{width:"250rpx",height:"250rpx","background-color":"rgba(113,113,113,0.7)"}},[i("v-uni-view",{staticClass:"flex align-center justify-center ",staticStyle:{height:"50%","margin-top":"30rpx"}},[i("uni-icons",{attrs:{type:"refreshempty",size:"60"}})],1),i("v-uni-view",{staticClass:"flex justify-center align-center ",staticStyle:{color:"#ffffff"}},[e._v("松手取消发送")])],1)],1),i("u-popup",{attrs:{mode:"center","border-radius":"60"},model:{value:e.isShowDele,callback:function(t){e.isShowDele=t},expression:"isShowDele"}},[i("v-uni-view",{staticClass:"edit-chat"},[i("v-uni-view",{staticClass:"title"},[e._v("您确定要清除所有聊天记录?")]),i("v-uni-view",{staticClass:"title2"},[e._v("将清空所有对话中的聊天内容，此操作无法恢复。")]),i("v-uni-view",{staticClass:"center"},[i("v-uni-view",{staticClass:"bottom"},[i("v-uni-view",{staticClass:"btn8",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.isShowDele=!1}}},[e._v("取消")]),i("v-uni-view",{staticClass:"btn9",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.save.apply(void 0,arguments)}}},[e._v("确定")])],1)],1)],1)],1),i("u-popup",{attrs:{mode:"bottom","border-radius":"60"},model:{value:e.isShowModel,callback:function(t){e.isShowModel=t},expression:"isShowModel"}},[i("v-uni-view",{staticClass:"edit11"},[i("v-uni-view",{staticClass:"center"},[e._v("切换模型")]),i("v-uni-radio-group",{on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.radioChange.apply(void 0,arguments)}}},e._l(e.form.chatmodel,(function(t,n){return i("v-uni-label",{key:t.value,staticClass:"line1"},[i("v-uni-view",[i("v-uni-radio",{attrs:{color:"rgb(128, 229, 139)",value:n,checked:n==e.temp}})],1),i("v-uni-view",{staticStyle:{"margin-left":"10px",color:"#fff","font-size":"16px"}},[e._v(e._s(t.nickname||t.type))])],1)})),1),i("v-uni-view",{staticClass:"center"},[i("v-uni-view",{staticClass:"bottom"},[i("v-uni-view",{staticClass:"btn8",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.isShowModel=!1}}},[e._v("取消")]),i("v-uni-view",{staticClass:"btn9",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.save1.apply(void 0,arguments)}}},[e._v("保存")])],1)],1)],1)],1),i("z-record",{ref:"recordRef"})],1)},o=[]},3576:function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\n * 使用的时候，请将下面的一行复制到您的uniapp项目根目录的uni.scss中即可\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \n */.z-record[data-v-5df00c0e]{height:100vh;color:#fff;display:flex;justify-content:center;align-items:center;flex-direction:column}.z-record .box[data-v-5df00c0e]{margin:20px;background:linear-gradient(90deg,#7cd887,#75ccd1);min-height:%?220?%;border-radius:15px;padding:14px}.z-record .blo[data-v-5df00c0e]{display:flex;justify-content:center;align-items:center;flex-direction:column}.z-record .icon[data-v-5df00c0e]{width:40px;height:40px;display:flex;justify-content:center;align-items:center;border-radius:50%;background:#515151;margin-top:20px;margin-bottom:6px}.z-record .flex-2[data-v-5df00c0e]{padding:80px 70px 30px;width:100%;display:flex;align-items:center;justify-content:space-between}.z-record .bottom[data-v-5df00c0e]{position:fixed;bottom:0}.z-record .bottom .txt[data-v-5df00c0e]{display:flex;justify-content:center;margin-bottom:%?100?%}.z-record .back[data-v-5df00c0e]{position:relative;z-index:2;padding:20px;height:50px;width:100vw;background:#2f313f;display:flex;justify-content:center}.z-record .rel[data-v-5df00c0e]{position:relative}.z-record .hu[data-v-5df00c0e]{z-index:1;position:absolute;background:#2f313f;top:%?-80?%;left:0;width:100vw;height:%?200?%;border-radius:50%}.z-record .mic[data-v-5df00c0e]{position:absolute;z-index:3;top:-30px;left:calc(50% - 20px)}',""]),e.exports=t},3901:function(e,t,i){"use strict";i("7a82");var n=i("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("14d9"),i("d401"),i("d3b7"),i("25f0"),i("159b"),i("4de4"),i("a434"),i("ac1f"),i("e25e");var a,o,r=n(i("c7eb")),s=n(i("1da1")),c=n(i("ade3")),d=n(i("f8dd")),u=n(i("b3d5")),l=(n(i("596e")),n(i("ff52"))),f=(i("36c7"),i("70dd")),p=i("be97"),g=i("e985"),h=n(i("0cc8")),m=n(i("9058")),v=n(i("6075")),x=n(i("96e9")),y=(n(i("2d88")),null),w=null,S=(a={name:"easyChat",components:{chatItem:m.default,ZRecord:u.default},data:function(){var e;return e={isLoadingText:!1,isShowHightPaint:!1,isCanPaint:!1,source:null,unit:"",websocket:null,temp:0,current:0,form:{},isShowModel:!1,deleIdx:0,isShowDele:!1,scrollTopHeight:0,textTemp:"",isLoading:!1,activeIndex:0,socketUrl:"",timeStr:"",clickMic:!1,scrollview:"",inputcontent:"",screenHeight:0,bottomHeight:10,micHeight:255,formatedRecordTime:"00:00:00",recordTime:0,isShowTips:!1,isRecording:!1,isCancel:!1,socketTask:null,texts:[],idx:0,themeList:[],chatList:[]},(0,c.default)(e,"screenHeight",0),(0,c.default)(e,"screenWidth",0),(0,c.default)(e,"statusbarHeight",0),(0,c.default)(e,"isEmpty",!0),(0,c.default)(e,"pageTitle",""),(0,c.default)(e,"isVoice",!1),e},onLoad:function(e){var t=this;return(0,s.default)((0,r.default)().mark((function i(){var n,a;return(0,r.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return uni.setStorageSync("isMiniprogram",e.isMiniprogram),e.url&&("/pages/my/my"==e.url?uni.switchTab({url:e.url}):uni.navigateTo({url:e.url})),i.next=4,t.$onLaunched;case 4:return t.isVoice=uni.getStorageSync("isVoice"),t.isCanPaint=uni.getStorageSync("isCanPaint"),t.isShowHightPaint=(0,p.getHighDrawConfig)(),o=t,o.pageTitle=uni.getStorageSync("pageTitle")||"聊天",uni.setNavigationBarTitle({title:o.pageTitle}),t.screenWidth=uni.getStorageSync("screenWidth"),t.statusbarHeight=uni.getStorageSync("statusBarHeight")+40,t.screenHeight=uni.getStorageSync("screenHeight"),uni.getStorageSync("indexIdx")&&(o.current=uni.getStorageSync("indexIdx"),o.temp=uni.getStorageSync("indexIdx")),i.next=16,o.getModelData();case 16:return i.next=18,o.getThemeData();case 18:return i.next=20,o.getDataList();case 20:o.chatList.length>0&&(o.isEmpty=!1),o.unit=uni.getStorageSync("unit"),o=t,window.navigator.userAgent.toLowerCase(),(0,l.default)(o),n=localStorage.getItem("userId"),a=localStorage.getItem("isJumpMini"),n&&"1"==a&&(d.default.miniProgram.postMessage({data:{userId:n}}),setTimeout((function(){localStorage.setItem("isJumpMini","0"),d.default.miniProgram.navigateBack({delta:1})}),400));case 28:case"end":return i.stop()}}),i)})))()},mounted:function(){var e=this;uni.getSystemInfo({success:function(t){e.$nextTick((function(){e.screenHeight=t.windowHeight}))}}),this.$nextTick((function(){y=uni.getRecorderManager(),y.onStart((function(){w=setInterval((function(){e.recordTime+=1,e.formatedRecordTime=e.recordTime}),1e3)})),y.onStop((function(t){if(e.isCancel)e.formatedRecordTime="00:00:00",e.isCancel=!1,e.recordTime=0;else if(e.recordTime<1)e.formatedRecordTime="00:00:00",e.recordTime=0,uni.showToast({icon:"none",title:"发送时间太短",duration:1e3});else{e.recordTime=0;var i=new Date,n={speaker:"Self",contentType:"audio",audioSrc:t.tempFilePath,createTime:i.getTime(),isUndo:!1,isDelete:!1};e.chatList.push(n);var a="dynamic_"+(e.chatList.length-1>-1?e.chatList.length-1:0).toString();e.$nextTick((function(){e.scrollview=a,e.formatedRecordTime="00:00:00"})),e.$refs.socket.sendAudioMsg(n)}}))})),uni.onKeyboardHeightChange((function(t){e.scrollview="null";var i="dynamic_"+(e.chatList.length-1>-1?e.chatList.length-1:0).toString();t.height>0?(e.$nextTick((function(){e.scrollview=i})),e.bottomHeight=t.height):e.$nextTick((function(){e.bottomHeight=10})),console.log(e.bottomHeight,"cccccc")}))}},(0,c.default)(a,"components",{popup:h.default,chatItem:m.default,uniIcons:v.default,socketItem:x.default}),(0,c.default)(a,"computed",{getImageList:function(){var e=[];return this.chatList.forEach((function(t,i){"image"==t.contentType&&e.push(t.imageSrc)}),this),e},getScrollView:function(){return this.scrollview},setButtonBg:function(){return this.isRecording?"bg-blue":"bg-gray"}}),(0,c.default)(a,"methods",{jumpHighPaint:function(){uni.navigateTo({url:"/pages/plugin/paint/index/index"})},goPaint:function(){uni.navigateTo({url:"/pages/paint/paint"})},radioChange:function(e){this.temp=e.detail.value,console.log(e.detail.value)},save1:function(){var e=this;return(0,s.default)((0,r.default)().mark((function t(){return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.current=e.temp,uni.setStorageSync("indexIdx",e.current),e.isShowModel=!1;case 3:case"end":return t.stop()}}),t)})))()},getModelData:function(){return(0,s.default)((0,r.default)().mark((function e(){var t;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.$u.api.chatModel();case 2:if(t=e.sent,!t){e.next=10;break}if(o.form=t.data,o.form.chatmodel=o.form.chatmodel.filter((function(e){if(0!=e.status)return e})),0!=o.form.chatmodel.length){e.next=9;break}return o.current=0,e.abrupt("return");case 9:o.current>=o.form.chatmodel.length&&(o.current=o.form.chatmodel.length-1);case 10:case"end":return e.stop()}}),e)})))()},getThemeData:function(){return(0,s.default)((0,r.default)().mark((function e(){var t;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.$u.api.chatTheme({classify_limit:4,son_limit:1});case 2:t=e.sent,t&&(o.themeList=t.data);case 4:case"end":return e.stop()}}),e)})))()},save:function(){var e=this;return(0,s.default)((0,r.default)().mark((function t(){var i;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$u.api.chatDele();case 2:i=t.sent,i&&(e.isShowDele=!1,e.chatList=[],e.getDataList());case 4:case"end":return t.stop()}}),t)})))()},handleVoice:function(e){this.isVoice=e},playVoice:function(e){var t=this;return(0,s.default)((0,r.default)().mark((function i(){return(0,r.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:t._audioContext&&t._audioContext.pause(),t._audioContext=null,t.createAudio(e);case 3:case"end":return i.stop()}}),i)})))()},createAudio:function(e){var t=this._audioContext=uni.createInnerAudioContext();return t.autoplay=!1,t.src=e,this._audioContext.play(),t},getVoice:function(e){return(0,s.default)((0,r.default)().mark((function t(){var i;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.$u.api.chatVoice({content:(0,f.handleSymbolVoice)(o.chatList[e].text)});case 2:i=t.sent,i&&o.playVoice(i.data);case 4:case"end":return t.stop()}}),t)})))()},getDataList:function(){var e=this;return(0,s.default)((0,r.default)().mark((function t(){var i,n,a,s;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.$u.api.chatList();case 2:i=t.sent,i&&(n=new Date,a={},i.data.forEach((function(t){a="我"==t.role?{speaker:"Self",contentType:"text",text:t.content,createTime:n.getTime(),isUndo:!1,isDelete:!1}:{speaker:"Others",contentType:"text",text:(0,f.handleSymbol)(t.content),createTime:n.getTime(),isUndo:!1,isDelete:!1},e.chatList.push(a)})),0==e.chatList.length&&(s=uni.getStorageSync("welcome"),a={speaker:"Others",contentType:"text",text:null!==s&&void 0!==s?s:"你好",createTime:n.getTime(),isUndo:!1,isDelete:!1}),setTimeout((function(){o.scrollToBottom()}),50));case 4:case"end":return t.stop()}}),t)})))()},getData:function(e){this.isLoadingText=!0;var t=uni.getStorageSync("host")||"",i="";o.form.chatmodel.length>0&&(i=o.form.chatmodel[o.current].type);var n=t+"/gptcms/api/chat/send?message="+encodeURIComponent(e)+"&chatmodel="+i;o.source=new g.EventSourcePolyfill(n,{headers:{wid:uni.getStorageSync("wid")||"1",token:uni.getStorageSync("h5Token")||""}}),o.source.onopen=function(e){var t=new Date;o.isLoading=!0,o.isLoadingText=!0;var i={speaker:"Others",contentType:"text",text:"",createTime:t.getTime(),isUndo:!1,isDelete:!1};console.log(o.chatList,"ddddddd"),o.chatList.push(i);(o.chatList.length-1>-1?o.chatList.length-1:0).toString();o.$nextTick((function(){o.scrollToBottom()}))},o.source.onmessage=function(e){console.log(e.data,"sdfdsfsdf");(o.chatList.length-1>-1?o.chatList.length-1:0).toString();o.$nextTick((function(){o.textTemp+=e.data,o.scrollToBottom()}))},o.source.onerror=function(e){var t=new Date;o.source.close(),o.isLoading=!1,o.isLoadingText=!1,o.chatList.splice(o.chatList.length-1,1);var i={speaker:"Others",contentType:"text",text:(0,f.handleSymbol)(o.textTemp),createTime:t.getTime(),isUndo:!1,isDelete:!1};o.chatList.push(i);(o.chatList.length-1>-1?o.chatList.length-1:0).toString();o.$nextTick((function(){o.textTemp="",o.isLoading=!1,setTimeout((function(){o.scrollToBottom()}),100)}))}},scrollToBottom:function(){var e=this;uni.createSelectorQuery().in(o).select("#scroll-view-content").boundingClientRect((function(t){var i=t.height-(o.screenHeight-o.bottomHeight-o.statusbarHeight-200);i>0&&(e.scrollTopHeight=i)})).exec()},subscribe:function(){uni.navigateTo({url:"/pages/subscribe/subscribe"})},readmethod:function(){},longpressmethod:function(e){var t=this,i=(e.target.id,0),n=0;uni.createSelectorQuery().in(this).select("#test1").boundingClientRect((function(e){var a=e.left,o=e.right;n=(a+o)/2,i=e.top,t.$refs.popup.show(n,i)})).exec()},computeDate:function(e,t){if(e){var i=new Date;if(t>0){var n=this.chatList[t-1].createTime;if(e-n>6e4){i.setTime(e);var a=i.toString(),o=a.split(" ")[4];return o}return""}return""}return""},setDatetimeStyle:function(e,t){if(e){if(t>0){var i=this.chatList[t-1].createTime;return e-i>6e4?"justify-content: center;align-content: center;margin-bottom: 25rpx;font-size: 25rpx;":""}return""}return""},sendMessage:function(e){(0,f.debounce)((function(){o.sendMessage1(e)}))},sendMessage1:function(e){var t=this;return(0,s.default)((0,r.default)().mark((function i(){var n,a,o,s,c;return(0,r.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n="",n="string"==typeof e?e:e.detail.value,a=new Date,!n||t.isLoading||t.isLoadingText){i.next=8;break}return i.next=6,t.$u.api.chatCheck({text:n,type:"chat"});case 6:o=i.sent,o&&(console.log(o.code,"sssss"),1!=o.data.code?(s={speaker:"Self",contentType:"text",text:o.data.text,createTime:a.getTime(),isUndo:!1,isDelete:!1},t.chatList.push(s),c="dynamic_"+(t.chatList.length-1>-1?t.chatList.length-1:0).toString(),t.$nextTick((function(){t.inputcontent="",t.scrollview=c})),t.getData(o.data.text)):(t.$nextTick((function(){t.inputcontent="",t.scrollview=id})),t.$u.toast(o.data.text)));case 8:case"end":return i.stop()}}),i)})))()},checkPermission:function(){return(0,s.default)((0,r.default)().mark((function e(){return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",1);case 1:case"end":return e.stop()}}),e)})))()},micClick:function(){var e=this;return(0,s.default)((0,r.default)().mark((function t(){return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs["recordRef"].show();case 1:case"end":return t.stop()}}),t)})))()},imageClick:function(){var e=this,t=new Date,i=[];uni.chooseImage({sourceType:["album"],count:6,success:function(n){var a=n.tempFilePaths;a.forEach((function(n,a){var o={speaker:"Self",contentType:"image",imageSrc:n,createTime:t.getTime(),isUndo:!1,isDelete:!1};e.chatList.push(o),i.push(n)})),setTimeout((function(){var t="dynamic_"+(e.chatList.length-1>-1?e.chatList.length-1:0).toString();e.scrollview=t}),500),e.$refs.socket.sendImageMsg(i)},fail:function(e){}})},cameraClick:function(){var e=this,t=new Date;uni.chooseImage({sourceType:["camera"],success:function(i){var n=i.tempFilePaths;n.forEach((function(i,n){var a={speaker:"Self",contentType:"image",imageSrc:i,createTime:t.getTime(),isUndo:!1,isDelete:!1};e.chatList.push(a)})),setTimeout((function(){var t="dynamic_"+(e.chatList.length-1>-1?e.chatList.length-1:0).toString();e.scrollview=t}),500)},fail:function(e){}})},getKeyBoradHeight:function(e){},micHide:function(){this.bottomHeight=0,this.clickMic=!1},micTouchStart:function(e){this.isRecording=!0,y.start({format:"mp3"})},micTouchMove:function(e){var t=this.screenHeight-this.bottomHeight+e.currentTarget.offsetTop;e.touches[0].clientY<t&&!this.isShowTips&&(this.isCancel=!0,this.isShowTips=!0,this.$refs.tips.show()),e.touches[0].clientY>=t&&(this.isCancel=!1,this.isShowTips=!1,this.$refs.tips.hide())},micTouchEnd:function(e){this.isRecording=!1,clearInterval(w),y.stop(),this.$refs.tips.hide()},undo:function(e){var t=parseInt(e.index);this.chatList[t].isUndo=!0,console.log(this.scrollview)},deleted:function(e){this.deleIdx=parseInt(e),this.isShowDele=!0},onReciveMessages:function(e){},ontext:function(e){var t=this,i=e.data;this.chatList.push(i);var n="dynamic_"+(this.chatList.length-1>-1?this.chatList.length-1:0).toString();this.$nextTick((function(){t.scrollview=n}))},onimage:function(e){var t=this,i=e.data;this.chatList.push(i);var n="dynamic_"+(this.chatList.length-1>-1?this.chatList.length-1:0).toString();setTimeout((function(){t.scrollview=n}),500)},onaudio:function(e){var t=this,i=e.data;this.chatList.push(i);var n="dynamic_"+(this.chatList.length-1>-1?this.chatList.length-1:0).toString();setTimeout((function(){t.scrollview=n}),500)}}),(0,c.default)(a,"beforeDestroy",(function(){o.source&&(o.source.close(),o.source=null)})),a);t.default=S},4003:function(e,t,i){"use strict";i("7a82");var n=i("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("e9c4"),i("ac1f"),i("00b4"),i("caad"),i("d3b7");var a,o=n(i("c7eb")),r=n(i("1da1")),s=(n(i("178c")),uni.getRecorderManager()),c=uni.createInnerAudioContext();c.autoplay=!0;var d={props:{},data:function(){return{inputcontent:"",isShowPop:!1,voicePath:"",isRecording:!0,status:!1,recorder:null}},created:function(){var e=this;return(0,r.default)((0,o.default)().mark((function t(){return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,s.onStop((function(e){console.log("recorder stop"+JSON.stringify(e)),a.voicePath=e.tempFilePath,console.log(a.voicePath,"sdsdsd")}));case 2:case"end":return t.stop()}}),t)})))()},methods:{upload:function(){uni.chooseFile({count:1,extension:[".pdf",".doc",".xlsx",".docx",".xls",".mp3"],success:function(e){var t=e.tempFilePaths;console.log(t,"aaaaaa"),a.getText(t[0])}})},getUniText:function(e){var t=this,i=uni.getStorageSync("host")+"/gptcms/api/uploadfile",n=uni.getStorageSync("wid"),o=uni.getStorageSync("h5Token");uni.uploadFile({url:i,filePath:e,name:"",formData:{},header:{wid:n,token:o},success:function(e){a.isRecording=!1;var i=t.toJson&&t.$u.test.jsonString(e.data)?JSON.parse(e.data):e.data;console.log(e,i,"22222aaaaa"),[200,201,204].includes(e.statusCode)?console.log(e,"aaaaa"):console.log("上传失败")},fail:function(e){console.log(e,"ggggg"),a.isRecording=!1},complete:function(e){a.isRecording=!1,console.log(e,"enddddd")}})},getH5Text:function(e){var t=new window.File([e.data],"test.mp3",{type:"audio/mpeg"}),i=new FormData;i.append("file",t);var n=uni.getStorageSync("host")+"/gptcms/api/tool/videottext",a=uni.getStorageSync("wid"),o=uni.getStorageSync("h5Token");fetch(n,{method:"POST",headers:{wid:a,token:o},body:i}).then((function(e){console.log(e,"fffffff")}))},handlerOnCahnger:function(){this.status?this.$refs["mumu-recorder"].stop():this.$refs["mumu-recorder"].start(),this.status=!this.status},handlerSuccess:function(e){console.log(e),a.getH5Text(e)},handlerError:function(e){switch(a.isRecording=!1,e){case"101":this.$u.toast("当前浏览器版本较低，请更换浏览器使用，推荐在微信中打开。");break;case"201":this.$u.toast("麦克风权限被拒绝，请刷新页面后授权麦克风权限。");break;default:this.$u.toast("未知错误，请刷新页面重试");break}},recordMove:function(e){var t=e.currentTarget.offsetTop;e.touches[0].clientY<t&&this.isShowTips,e.touches[0].clientY},startRecord:function(){console.log("开始录音"),a.isRecording=!0,this.$refs["mumu-recorder"].start(),this.status=!this.status},endRecord:function(){console.log("录音结束"),this.$refs["mumu-recorder"].stop(),this.status=!this.status},close:function(){this.isShowPop=!0},sendMessage:function(){},show:function(){a.isShowPop=!0}}};t.default=d},"410d":function(e,t,i){"use strict";i.r(t);var n=i("e634"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a},4166:function(e,t,i){"use strict";var n=i("9dc6"),a=i.n(n);a.a},"57fe":function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\n * 使用的时候，请将下面的一行复制到您的uniapp项目根目录的uni.scss中即可\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \n */.example1.out[data-v-2b463215]{width:100%;padding:2px;border-radius:%?40?%;background:linear-gradient(90deg,#b46a80,#739b83)}.example1 .in[data-v-2b463215]{width:calc(100vw - 70px);width:calc(100% - 20px);height:100%;background:#151520;border-radius:%?40?%}.inputClass[data-v-2b463215]{background-color:initial;align-content:center;padding:5px 10px 5px 10px;font-size:%?30?%;width:100%}.scrollView[data-v-2b463215]{position:fixed;right:0;left:0;top:0;\n  /* padding-left: 10px;\n\t\t\tpadding-right: 10px;\n\t\t\tpadding-top: 10px; */width:auto}.bottomClass[data-v-2b463215]{padding:10px 12px;background:#151520;border-top-left-radius:20px;border-top-right-radius:20px;display:flex;justify-content:flex-start;align-items:center;flex-direction:row}.uni-row[data-v-2b463215]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.uni-flex[data-v-2b463215]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.s-back[data-v-2b463215]{background:#1a2134}.index-inp[data-v-2b463215]{width:100%}.index-inp-inner[data-v-2b463215]{width:calc(100% - 14px);height:36px;color:#fff;padding:0 10px}.index-ml10[data-v-2b463215]{margin-right:10px}.index-flex-right[data-v-2b463215]{display:flex;justify-content:flex-end}.index-flex-left[data-v-2b463215]{display:flex;justify-content:flex-start}.index-no[data-v-2b463215]{margin-left:12px;margin-top:12px;background:#aa4b4f;display:flex;justify-content:center;align-items:center;padding:0 %?26?%;color:#fff;height:%?60?%;border-radius:%?40?%}.index-mt12[data-v-2b463215]{margin-top:16px;margin-right:12px}.index-line1[data-v-2b463215]{padding:12px;display:flex;align-items:center}.index1[data-v-2b463215]{padding:0;display:flex;justify-content:center;align-items:center;border-radius:20px;background:#e6d08d;color:#5f3d22}.index1-text[data-v-2b463215]{margin-left:2px;margin-right:10px;font-size:16px}.index2[data-v-2b463215]{font-size:%?36?%;flex:1;display:flex;justify-content:center}.index3-mr4[data-v-2b463215]{margin-right:%?16?%}.index-line3[data-v-2b463215]{display:flex;align-items:center;margin:%?24?%;color:#fff;font-size:%?32?%}.index-line2[data-v-2b463215]{margin:%?30?% %?24?%;background:#323249;border-radius:10px;padding:%?28?%;color:#a3a3b7;font-size:%?32?%;display:flex;justify-content:space-between;align-items:center}.index-line-mb12[data-v-2b463215]{margin-bottom:%?60?%}.edit-chat[data-v-2b463215]{background:rgba(21,21,32,.9);padding:20px}.edit-chat .title[data-v-2b463215]{color:#fff;font-size:18px;margin-bottom:20px}.edit-chat .title2[data-v-2b463215]{color:#999;font-size:14px}.edit-chat .bottom[data-v-2b463215]{margin-top:20px;display:flex;justify-content:space-between;width:300px}.edit-chat .bottom .btn8[data-v-2b463215]{width:130px;height:36px;color:#fff;border-radius:%?80?%;border:1px solid #7cd887;display:flex;justify-content:center;align-items:center;margin-right:%?30?%}.edit-chat .bottom .btn9[data-v-2b463215]{color:#fff;width:130px;height:36px;background-image:linear-gradient(0deg,#7cd887,#75ccd1);border-radius:%?80?%;display:flex;justify-content:center;align-items:center}.edit11[data-v-2b463215]{background:rgba(21,21,32,.9);padding:20px}.edit11 .center[data-v-2b463215]{display:flex;justify-content:center;align-items:center;color:#fff;font-size:20px}.edit11 .cell[data-v-2b463215]{padding:10px 0;font-size:16px;display:flex;border-bottom:1px solid #1f1f2f}.edit11 .cell .left[data-v-2b463215]{display:inline-block;width:70px;text-align:right;color:#a4a4a4}.edit11 .cell .right[data-v-2b463215]{margin-left:4px;color:#fff}.edit11 .bottom[data-v-2b463215]{margin-top:20px;display:flex;justify-content:space-between;width:300px}.edit11 .bottom .btn8[data-v-2b463215]{width:130px;height:36px;border-radius:%?80?%;border:1px solid #7cd887;display:flex;justify-content:center;align-items:center;margin-right:%?30?%}.edit11 .bottom .btn9[data-v-2b463215]{width:130px;height:36px;background-image:linear-gradient(0deg,#7cd887,#75ccd1);border-radius:%?80?%;display:flex;justify-content:center;align-items:center}.line1[data-v-2b463215]{display:flex;justify-content:flex-start;align-items:center;margin:20px 0}.btn-right[data-v-2b463215]{display:flex;justify-content:flex-end;margin-right:14px}.circle-btn[data-v-2b463215]{width:70px;height:70px;display:flex;justify-content:center;align-items:center;background-image:linear-gradient(0deg,#7cd887,#75ccd1);border-radius:50%;font-size:16px;color:#fff}.new-bottom[data-v-2b463215]{display:flex;align-items:flex-end;margin-bottom:30px}',""]),e.exports=t},"5c0d":function(e,t,i){"use strict";i.r(t);var n=i("3901"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a},"5eff":function(e,t,i){"use strict";var n=i("e591"),a=i.n(n);a.a},"72cd":function(e,t,i){"use strict";i.r(t);var n=i("2ebc"),a=i("5c0d");for(var o in a)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(o);i("5eff");var r=i("f0c5"),s=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"2b463215",null,!1,n["a"],void 0);t["default"]=s.exports},8083:function(e,t,i){"use strict";i.r(t);var n=i("d8c4"),a=i("29ab");for(var o in a)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(o);i("4166");var r=i("f0c5"),s=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"4c7366fc",null,!1,n["a"],void 0);t["default"]=s.exports},9523:function(e,t,i){i("7a82");var n=i("a395");e.exports=function(e,t,i){return t=n(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e},e.exports.__esModule=!0,e.exports["default"]=e.exports},"9dc6":function(e,t,i){var n=i("df50");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("461f355a",n,!0,{sourceMap:!1,shadowMode:!1})},aa8c:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){}));var n=function(){var e=this.$createElement,t=this._self._c||e;return t("v-uni-view",{staticClass:"recorder"})},a=[]},b3d5:function(e,t,i){"use strict";i.r(t);var n=i("c7cd"),a=i("058c");for(var o in a)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(o);i("f014");var r=i("f0c5"),s=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"5df00c0e",null,!1,n["a"],void 0);t["default"]=s.exports},c7cd:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return n}));var n={uPopup:i("7cd7").default,uniIcons:i("6075").default,mumuRecorder:i("178c").default},a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("u-popup",{attrs:{"mask-close-able":!1,"custom-style":{background:"transparent",width:"100vw",height:"100vh",color:"#fff"},mode:"bottom","border-radius":"0"},model:{value:e.isShowPop,callback:function(t){e.isShowPop=t},expression:"isShowPop"}},[i("v-uni-view",{staticClass:"z-record"},[i("v-uni-view",{staticClass:"box"},[i("v-uni-textarea",{ref:"inputRef",staticClass:"index-inp-inner",staticStyle:{"font-size":"30rpx"},attrs:{maxlength:-1,"auto-height":!0,"placeholder-style":{color:"#fff"},placeholder:"...","confirm-type":"send","cursor-spacing":"40"},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.sendMessage.apply(void 0,arguments)}},model:{value:e.inputcontent,callback:function(t){e.inputcontent=t},expression:"inputcontent"}})],1),i("v-uni-view",{},[e._v("轻触气泡可以修改文字")]),i("v-uni-view",{staticClass:"flex-2"},[i("v-uni-view",{staticClass:"blo",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.close.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"icon"},[i("uni-icons",{attrs:{type:"closeempty",color:"#80E58B",size:"25"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.micClick.apply(void 0,arguments)}}})],1),e._v("取消")],1),i("v-uni-view",{staticClass:"blo",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendMessage.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"icon"},[i("uni-icons",{attrs:{type:"checkmarkempty",color:"#80E58B",size:"25"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.micClick.apply(void 0,arguments)}}})],1),e._v("发送")],1)],1),i("v-uni-view",{staticClass:"bottom"},[i("v-uni-view",{staticClass:"txt"},[e._v("按住说话，松开识别")]),i("v-uni-view",{staticClass:"rel"},[i("v-uni-view",{staticClass:"hu"}),i("v-uni-view",{staticClass:"back"}),i("v-uni-text",{on:{touchmove:function(t){arguments[0]=t=e.$handleEvent(t),e.recordMove.apply(void 0,arguments)},mouseup:function(t){arguments[0]=t=e.$handleEvent(t),e.endRecord.apply(void 0,arguments)},mousedown:function(t){arguments[0]=t=e.$handleEvent(t),e.startRecord.apply(void 0,arguments)}}},[i("uni-icons",{staticClass:"mic",attrs:{type:"mic",color:"#80E58B",size:"40"}})],1),i("mumu-recorder",{ref:"mumu-recorder",on:{success:function(t){arguments[0]=t=e.$handleEvent(t),e.handlerSuccess.apply(void 0,arguments)},error:function(t){arguments[0]=t=e.$handleEvent(t),e.handlerError.apply(void 0,arguments)}}})],1)],1)],1)],1)},o=[]},c82d:function(e,t,i){var n=i("3576");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("9e6fc4f8",n,!0,{sourceMap:!1,shadowMode:!1})},d8c4:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return n}));var n={uIcon:i("4b49").default},a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"img",style:[e.wrapStyle,e.backgroundStyle],on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onClick.apply(void 0,arguments)}}},[e.isError?e._e():i("v-uni-image",{staticClass:"img__image",style:{borderRadius:"circle"==e.shape?"50%":e.$u.addUnit(e.borderRadius)},attrs:{src:e.src,mode:e.mode,"lazy-load":e.lazyLoad,"show-menu-by-longpress":e.showMenuByLongpress},on:{error:function(t){arguments[0]=t=e.$handleEvent(t),e.onErrorHandler.apply(void 0,arguments)},load:function(t){arguments[0]=t=e.$handleEvent(t),e.onLoadHandler.apply(void 0,arguments)}}}),e.showLoading&&e.loading?i("v-uni-view",{staticClass:"img__loading",style:{borderRadius:"circle"==e.shape?"50%":e.$u.addUnit(e.borderRadius),backgroundColor:this.bgColor}},[e.$slots.loading?e._t("loading"):i("u-icon",{attrs:{name:e.loadingIcon,width:e.width,height:e.height}})],2):e._e(),e.showError&&e.isError&&!e.loading?i("v-uni-view",{staticClass:"img__error",style:{borderRadius:"circle"==e.shape?"50%":e.$u.addUnit(e.borderRadius)}},[e.$slots.error?e._t("error"):i("u-icon",{attrs:{name:e.errorIcon,width:e.width,height:e.height}})],2):e._e()],1)},o=[]},df50:function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\n * 使用的时候，请将下面的一行复制到您的uniapp项目根目录的uni.scss中即可\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \n */.img[data-v-4c7366fc]{position:relative;transition:opacity .5s ease-in-out}.img__image[data-v-4c7366fc]{width:100%;height:100%}.img__loading[data-v-4c7366fc], .img__error[data-v-4c7366fc]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#f3f4f6;color:#909399;font-size:%?46?%}',""]),e.exports=t},e383:function(e,t,i){var n,a=i("9523").default;i("ac1f"),i("466d"),i("c975"),i("14d9"),i("5319"),i("e9c4"),function(o,r){n=function(){return function(e,t){if(!e.jWeixin){var i,n,o={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest",openEnterpriseRedPacket:"getRecevieBizHongBaoRequest",startSearchBeacons:"startMonitoringBeacons",stopSearchBeacons:"stopMonitoringBeacons",onSearchBeacons:"onBeaconsInRange",consumeAndShareCard:"consumedShareCard",openAddress:"editAddress"},r=function(){var e={};for(var t in o)e[o[t]]=t;return e}(),s=e.document,c=s.title,d=navigator.userAgent.toLowerCase(),u=navigator.platform.toLowerCase(),l=!(!u.match("mac")&&!u.match("win")),f=-1!=d.indexOf("wxdebugger"),p=-1!=d.indexOf("micromessenger"),g=-1!=d.indexOf("android"),h=-1!=d.indexOf("iphone")||-1!=d.indexOf("ipad"),m=(n=d.match(/micromessenger\/(\d+\.\d+\.\d+)/)||d.match(/micromessenger\/(\d+\.\d+)/))?n[1]:"",v={initStartTime:R(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},x={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:h?1:g?2:-1,clientVersion:m,url:encodeURIComponent(location.href)},y={},w={_completes:[]},S={state:0,data:{}};A((function(){v.initEndTime=R()}));var b=!1,k=[],T=(i={config:function(t){B("config",y=t);var i=!1!==y.check;A((function(){if(i)C(o.config,{verifyJsApiList:V(y.jsApiList),verifyOpenTagList:V(y.openTagList)},function(){w._complete=function(e){v.preVerifyEndTime=R(),S.state=1,S.data=e},w.success=function(e){x.isPreVerifyOk=0},w.fail=function(e){w._fail?w._fail(e):S.state=-1};var e=w._completes;return e.push((function(){!function(){if(!(l||f||y.debug||m<"6.0.2"||x.systemType<0)){var e=new Image;x.appId=y.appId,x.initTime=v.initEndTime-v.initStartTime,x.preVerifyTime=v.preVerifyEndTime-v.preVerifyStartTime,T.getNetworkType({isInnerInvoke:!0,success:function(t){x.networkType=t.networkType;var i="https://mp.yunzd.cn/sdk/report?v="+x.version+"&o="+x.isPreVerifyOk+"&s="+x.systemType+"&c="+x.clientVersion+"&a="+x.appId+"&n="+x.networkType+"&i="+x.initTime+"&p="+x.preVerifyTime+"&u="+x.url;e.src=i}})}}()})),w.complete=function(t){for(var i=0,n=e.length;i<n;++i)e[i]();w._completes=[]},w}()),v.preVerifyStartTime=R();else{S.state=1;for(var e=w._completes,t=0,n=e.length;t<n;++t)e[t]();w._completes=[]}})),T.invoke||(T.invoke=function(t,i,n){e.WeixinJSBridge&&WeixinJSBridge.invoke(t,L(i),n)},T.on=function(t,i){e.WeixinJSBridge&&WeixinJSBridge.on(t,i)})},ready:function(e){0!=S.state?e():(w._completes.push(e),!p&&y.debug&&e())},error:function(e){m<"6.0.2"||(-1==S.state?e(S.data):w._fail=e)},checkJsApi:function(e){C("checkJsApi",{jsApiList:V(e.jsApiList)},(e._complete=function(e){if(g){var t=e.checkResult;t&&(e.checkResult=JSON.parse(t))}e=function(e){var t=e.checkResult;for(var i in t){var n=r[i];n&&(t[n]=t[i],delete t[i])}return e}(e)},e))},onMenuShareTimeline:function(e){M(o.onMenuShareTimeline,{complete:function(){C("shareTimeline",{title:e.title||c,desc:e.title||c,img_url:e.imgUrl||"",link:e.link||location.href,type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareAppMessage:function(e){M(o.onMenuShareAppMessage,{complete:function(t){"favorite"===t.scene?C("sendAppMessage",{title:e.title||c,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""}):C("sendAppMessage",{title:e.title||c,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareQQ:function(e){M(o.onMenuShareQQ,{complete:function(){C("shareQQ",{title:e.title||c,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareWeibo:function(e){M(o.onMenuShareWeibo,{complete:function(){C("shareWeiboApp",{title:e.title||c,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareQZone:function(e){M(o.onMenuShareQZone,{complete:function(){C("shareQZone",{title:e.title||c,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},updateTimelineShareData:function(e){C("updateTimelineShareData",{title:e.title,link:e.link,imgUrl:e.imgUrl},e)},updateAppMessageShareData:function(e){C("updateAppMessageShareData",{title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl},e)},startRecord:function(e){C("startRecord",{},e)},stopRecord:function(e){C("stopRecord",{},e)},onVoiceRecordEnd:function(e){M("onVoiceRecordEnd",e)},playVoice:function(e){C("playVoice",{localId:e.localId},e)},pauseVoice:function(e){C("pauseVoice",{localId:e.localId},e)},stopVoice:function(e){C("stopVoice",{localId:e.localId},e)},onVoicePlayEnd:function(e){M("onVoicePlayEnd",e)},uploadVoice:function(e){C("uploadVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadVoice:function(e){C("downloadVoice",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},translateVoice:function(e){C("translateVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},chooseImage:function(e){C("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"],sourceType:e.sourceType||["album","camera"]},(e._complete=function(e){if(g){var t=e.localIds;try{t&&(e.localIds=JSON.parse(t))}catch(e){}}},e))},getLocation:function(e){},previewImage:function(e){C(o.previewImage,{current:e.current,urls:e.urls},e)},uploadImage:function(e){C("uploadImage",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadImage:function(e){C("downloadImage",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},getLocalImgData:function(e){!1===b?(b=!0,C("getLocalImgData",{localId:e.localId},(e._complete=function(e){if(b=!1,0<k.length){var t=k.shift();wx.getLocalImgData(t)}},e))):k.push(e)},getNetworkType:function(e){C("getNetworkType",{},(e._complete=function(e){e=function(e){var t=e.errMsg;e.errMsg="getNetworkType:ok";var i=e.subtype;if(delete e.subtype,i)e.networkType=i;else{var n=t.indexOf(":"),a=t.substring(n+1);switch(a){case"wifi":case"edge":case"wwan":e.networkType=a;break;default:e.errMsg="getNetworkType:fail"}}return e}(e)},e))},openLocation:function(e){C("openLocation",{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""},e)}},a(i,"getLocation",(function(e){C(o.getLocation,{type:(e=e||{}).type||"wgs84"},(e._complete=function(e){delete e.type},e))})),a(i,"hideOptionMenu",(function(e){C("hideOptionMenu",{},e)})),a(i,"showOptionMenu",(function(e){C("showOptionMenu",{},e)})),a(i,"closeWindow",(function(e){C("closeWindow",{},e=e||{})})),a(i,"hideMenuItems",(function(e){C("hideMenuItems",{menuList:e.menuList},e)})),a(i,"showMenuItems",(function(e){C("showMenuItems",{menuList:e.menuList},e)})),a(i,"hideAllNonBaseMenuItem",(function(e){C("hideAllNonBaseMenuItem",{},e)})),a(i,"showAllNonBaseMenuItem",(function(e){C("showAllNonBaseMenuItem",{},e)})),a(i,"scanQRCode",(function(e){C("scanQRCode",{needResult:(e=e||{}).needResult||0,scanType:e.scanType||["qrCode","barCode"]},(e._complete=function(e){if(h){var t=e.resultStr;if(t){var i=JSON.parse(t);e.resultStr=i&&i.scan_code&&i.scan_code.scan_result}}},e))})),a(i,"openAddress",(function(e){C(o.openAddress,{},(e._complete=function(e){e=function(e){return e.postalCode=e.addressPostalCode,delete e.addressPostalCode,e.provinceName=e.proviceFirstStageName,delete e.proviceFirstStageName,e.cityName=e.addressCitySecondStageName,delete e.addressCitySecondStageName,e.countryName=e.addressCountiesThirdStageName,delete e.addressCountiesThirdStageName,e.detailInfo=e.addressDetailInfo,delete e.addressDetailInfo,e}(e)},e))})),a(i,"openProductSpecificView",(function(e){C(o.openProductSpecificView,{pid:e.productId,view_type:e.viewType||0,ext_info:e.extInfo},e)})),a(i,"addCard",(function(e){for(var t=e.cardList,i=[],n=0,a=t.length;n<a;++n){var r=t[n],s={card_id:r.cardId,card_ext:r.cardExt};i.push(s)}C(o.addCard,{card_list:i},(e._complete=function(e){var t=e.card_list;if(t){for(var i=0,n=(t=JSON.parse(t)).length;i<n;++i){var a=t[i];a.cardId=a.card_id,a.cardExt=a.card_ext,a.isSuccess=!!a.is_succ,delete a.card_id,delete a.card_ext,delete a.is_succ}e.cardList=t,delete e.card_list}},e))})),a(i,"chooseCard",(function(e){C("chooseCard",{app_id:y.appId,location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:e.timestamp+"",nonce_str:e.nonceStr},(e._complete=function(e){e.cardList=e.choose_card_info,delete e.choose_card_info},e))})),a(i,"openCard",(function(e){for(var t=e.cardList,i=[],n=0,a=t.length;n<a;++n){var r=t[n],s={card_id:r.cardId,code:r.code};i.push(s)}C(o.openCard,{card_list:i},e)})),a(i,"consumeAndShareCard",(function(e){C(o.consumeAndShareCard,{consumedCardId:e.cardId,consumedCode:e.code},e)})),a(i,"chooseWXPay",(function(e){C(o.chooseWXPay,P(e),e)})),a(i,"openEnterpriseRedPacket",(function(e){C(o.openEnterpriseRedPacket,P(e),e)})),a(i,"startSearchBeacons",(function(e){C(o.startSearchBeacons,{ticket:e.ticket},e)})),a(i,"stopSearchBeacons",(function(e){C(o.stopSearchBeacons,{},e)})),a(i,"onSearchBeacons",(function(e){M(o.onSearchBeacons,e)})),a(i,"openEnterpriseChat",(function(e){C("openEnterpriseChat",{useridlist:e.userIds,chatname:e.groupName},e)})),a(i,"launchMiniProgram",(function(e){C("launchMiniProgram",{targetAppId:e.targetAppId,path:function(e){if("string"==typeof e&&0<e.length){var t=e.split("?")[0],i=e.split("?")[1];return t+=".html",void 0!==i?t+"?"+i:t}}(e.path),envVersion:e.envVersion},e)})),a(i,"openBusinessView",(function(e){C("openBusinessView",{businessType:e.businessType,queryString:e.queryString||"",envVersion:e.envVersion},(e._complete=function(e){if(g){var t=e.extraData;if(t)try{e.extraData=JSON.parse(t)}catch(t){e.extraData={}}}},e))})),a(i,"miniProgram",{navigateBack:function(e){e=e||{},A((function(){C("invokeMiniProgramAPI",{name:"navigateBack",arg:{delta:e.delta||1}},e)}))},navigateTo:function(e){A((function(){C("invokeMiniProgramAPI",{name:"navigateTo",arg:{url:e.url}},e)}))},redirectTo:function(e){A((function(){C("invokeMiniProgramAPI",{name:"redirectTo",arg:{url:e.url}},e)}))},switchTab:function(e){A((function(){C("invokeMiniProgramAPI",{name:"switchTab",arg:{url:e.url}},e)}))},reLaunch:function(e){A((function(){C("invokeMiniProgramAPI",{name:"reLaunch",arg:{url:e.url}},e)}))},postMessage:function(e){A((function(){C("invokeMiniProgramAPI",{name:"postMessage",arg:e.data||{}},e)}))},getEnv:function(t){A((function(){t({miniprogram:"miniprogram"===e.__wxjs_environment})}))}}),i),_=1,I={};return s.addEventListener("error",(function(e){if(!g){var t=e.target,i=t.tagName,n=t.src;if(("IMG"==i||"VIDEO"==i||"AUDIO"==i||"SOURCE"==i)&&-1!=n.indexOf("wxlocalresource://")){e.preventDefault(),e.stopPropagation();var a=t["wx-id"];if(a||(a=_++,t["wx-id"]=a),I[a])return;I[a]=!0,wx.ready((function(){wx.getLocalImgData({localId:n,success:function(e){t.src=e.localData}})}))}}}),!0),s.addEventListener("load",(function(e){if(!g){var t=e.target,i=t.tagName;if(t.src,"IMG"==i||"VIDEO"==i||"AUDIO"==i||"SOURCE"==i){var n=t["wx-id"];n&&(I[n]=!1)}}}),!0),t&&(e.wx=e.jWeixin=T),T}function C(t,i,n){e.WeixinJSBridge?WeixinJSBridge.invoke(t,L(i),(function(e){E(t,e,n)})):B(t,n)}function M(t,i,n){e.WeixinJSBridge?WeixinJSBridge.on(t,(function(e){n&&n.trigger&&n.trigger(e),E(t,e,i)})):B(t,n||i)}function L(e){return(e=e||{}).appId=y.appId,e.verifyAppId=y.appId,e.verifySignType="sha1",e.verifyTimestamp=y.timestamp+"",e.verifyNonceStr=y.nonceStr,e.verifySignature=y.signature,e}function P(e){return{timeStamp:e.timestamp+"",nonceStr:e.nonceStr,package:e.package,paySign:e.paySign,signType:e.signType||"SHA1"}}function E(e,t,i){"openEnterpriseChat"!=e&&"openBusinessView"!==e||(t.errCode=t.err_code),delete t.err_code,delete t.err_desc,delete t.err_detail;var n=t.errMsg;n||(n=t.err_msg,delete t.err_msg,n=function(e,t){var i=e,n=r[i];n&&(i=n);var a="ok";if(t){var o=t.indexOf(":");"confirm"==(a=t.substring(o+1))&&(a="ok"),"failed"==a&&(a="fail"),-1!=a.indexOf("failed_")&&(a=a.substring(7)),-1!=a.indexOf("fail_")&&(a=a.substring(5)),"access denied"!=(a=(a=a.replace(/_/g," ")).toLowerCase())&&"no permission to execute"!=a||(a="permission denied"),"config"==i&&"function not exist"==a&&(a="ok"),""==a&&(a="fail")}return i+":"+a}(e,n),t.errMsg=n),(i=i||{})._complete&&(i._complete(t),delete i._complete),n=t.errMsg||"",y.debug&&!i.isInnerInvoke&&alert(JSON.stringify(t));var a=n.indexOf(":");switch(n.substring(a+1)){case"ok":i.success&&i.success(t);break;case"cancel":i.cancel&&i.cancel(t);break;default:i.fail&&i.fail(t)}i.complete&&i.complete(t)}function V(e){if(e){for(var t=0,i=e.length;t<i;++t){var n=e[t],a=o[n];a&&(e[t]=a)}return e}}function B(e,t){if(!(!y.debug||t&&t.isInnerInvoke)){var i=r[e];i&&(e=i),t&&t._complete&&delete t._complete,console.log('"'+e+'",',t||"")}}function R(){return(new Date).getTime()}function A(t){p&&(e.WeixinJSBridge?t():s.addEventListener&&s.addEventListener("WeixinJSBridgeReady",t,!1))}}(o)}.call(t,i,t,e),void 0===n||(e.exports=n)}(window)},e591:function(e,t,i){var n=i("57fe");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("2c394228",n,!0,{sourceMap:!1,shadowMode:!1})},e634:function(e,t,i){"use strict";i("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("c975"),i("d3b7"),i("159b"),i("14d9"),i("3ca3"),i("ddb0"),i("2b3d"),i("9861"),i("d401"),i("25f0"),i("a434"),i("acd8");var n={data:function(){return{isUserMedia:!1,stream:null,audio:null,recorder:null,chunks:[],startTime:0}},mounted:function(){if(-1===origin.indexOf("https"))throw this.$emit("error","100"),"请在 https 环境中使用本插件。";if(!navigator.mediaDevices||!window.MediaRecorder)throw this.$emit("error","101"),"当前浏览器不支持";this.getRecorderManager()},methods:{getRecorderManager:function(){var e=this;this.audio=document.createElement("audio"),navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){e.isUserMedia=!0,t.getTracks().forEach((function(e){e.stop()}))})).catch((function(t){e.onErrorHandler(t)}))},start:function(){var e=this;if(!this.isUserMedia)return console.log("设备不支持");this.chunks=[],navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){e.startTime=(new Date).getTime(),e.stream=t,e.recorder=new MediaRecorder(t),e.recorder.ondataavailable=e.getRecordingData,e.recorder.onstop=e.saveRecordingData,e.recorder.start()})).catch((function(t){e.onErrorHandler(t)}))},stop:function(){this.recorder.stop(),this.stream.getTracks().forEach((function(e){e.stop()}))},getRecordingData:function(e){this.chunks.push(e.data)},saveRecordingData:function(){var e=new Blob(this.chunks,{type:"audio/mp3"}),t=URL.createObjectURL(e),i=(new Date).getTime(),n=(i-this.startTime).toString().split("");n.splice(n.length-2),n.splice(n.length-1,0,"."),n=parseFloat(n.join(""));var a={data:e,duration:n,localUrl:t};this.$emit("success",a)},onErrorHandler:function(e){if(console.log(e),"NotAllowedError"===e.name)throw this.$emit("error","201"),"用户拒绝了当前的浏览器实例的访问请求";if("NotReadableError"===e.name)throw this.$emit("error","101"),"当前浏览器不支持";throw this.$emit("error","500"),"调用失败，原因不详"}},destroyed:function(){this.stop()}};t.default=n},f014:function(e,t,i){"use strict";var n=i("c82d"),a=i.n(n);a.a},f5b0:function(e,t,i){"use strict";i("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("a9e3");var n={name:"img",props:{src:{type:String,default:""},mode:{type:String,default:"aspectFill"},width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:"auto"},shape:{type:String,default:"square"},borderRadius:{type:[String,Number],default:0},lazyLoad:{type:Boolean,default:!0},showMenuByLongpress:{type:Boolean,default:!0},loadingIcon:{type:String,default:"photo"},errorIcon:{type:String,default:"error-circle"},showLoading:{type:Boolean,default:!0},showError:{type:Boolean,default:!0},fade:{type:Boolean,default:!0},webp:{type:Boolean,default:!1},duration:{type:[String,Number],default:500},bgColor:{type:String,default:"#f3f4f6"}},data:function(){return{isError:!1,loading:!0,opacity:1,durationTime:this.duration,backgroundStyle:{}}},watch:{src:{immediate:!0,handler:function(e){e?this.isError=!1:(this.isError=!0,this.loading=!1)}}},computed:{wrapStyle:function(){var e={};return e.width=this.$u.addUnit(this.width),e.height=this.$u.addUnit(this.height),e.borderRadius="circle"==this.shape?"50%":this.$u.addUnit(this.borderRadius),e.overflow=this.borderRadius>0?"hidden":"visible",this.fade&&(e.opacity=this.opacity,e.transition="opacity ".concat(Number(this.durationTime)/1e3,"s ease-in-out")),e}},methods:{onClick:function(){this.$emit("click")},onErrorHandler:function(e){this.loading=!1,this.isError=!0,this.$emit("error",e)},onLoadHandler:function(){var e=this;if(this.loading=!1,this.isError=!1,this.$emit("load"),!this.fade)return this.removeBgColor();this.opacity=0,this.durationTime=0,setTimeout((function(){e.durationTime=e.duration,e.opacity=1,setTimeout((function(){e.removeBgColor()}),e.durationTime)}),50)},removeBgColor:function(){this.backgroundStyle={backgroundColor:"transparent"}}}};t.default=n},f8dd:function(e,t,i){var n=i("9523").default;i("ac1f"),i("466d"),i("c975"),i("14d9"),i("5319"),i("e9c4"),function(t,i){e.exports=function(e,t){if(!e.jWeixin){var i,a,o={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest",openEnterpriseRedPacket:"getRecevieBizHongBaoRequest",startSearchBeacons:"startMonitoringBeacons",stopSearchBeacons:"stopMonitoringBeacons",onSearchBeacons:"onBeaconsInRange",consumeAndShareCard:"consumedShareCard",openAddress:"editAddress"},r=function(){var e={};for(var t in o)e[o[t]]=t;return e}(),s=e.document,c=s.title,d=navigator.userAgent.toLowerCase(),u=navigator.platform.toLowerCase(),l=!(!u.match("mac")&&!u.match("win")),f=-1!=d.indexOf("wxdebugger"),p=-1!=d.indexOf("micromessenger"),g=-1!=d.indexOf("android"),h=-1!=d.indexOf("iphone")||-1!=d.indexOf("ipad"),m=(a=d.match(/micromessenger\/(\d+\.\d+\.\d+)/)||d.match(/micromessenger\/(\d+\.\d+)/))?a[1]:"",v={initStartTime:R(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},x={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:h?1:g?2:-1,clientVersion:m,url:encodeURIComponent(location.href)},y={},w={_completes:[]},S={state:0,data:{}};A((function(){v.initEndTime=R()}));var b=!1,k=[],T=(i={config:function(t){B("config",y=t);var i=!1!==y.check;A((function(){if(i)C(o.config,{verifyJsApiList:V(y.jsApiList),verifyOpenTagList:V(y.openTagList)},function(){w._complete=function(e){v.preVerifyEndTime=R(),S.state=1,S.data=e},w.success=function(e){x.isPreVerifyOk=0},w.fail=function(e){w._fail?w._fail(e):S.state=-1};var e=w._completes;return e.push((function(){!function(){if(!(l||f||y.debug||m<"6.0.2"||x.systemType<0)){var e=new Image;x.appId=y.appId,x.initTime=v.initEndTime-v.initStartTime,x.preVerifyTime=v.preVerifyEndTime-v.preVerifyStartTime,T.getNetworkType({isInnerInvoke:!0,success:function(t){x.networkType=t.networkType;var i="https://mp.yunzd.cn/sdk/report?v="+x.version+"&o="+x.isPreVerifyOk+"&s="+x.systemType+"&c="+x.clientVersion+"&a="+x.appId+"&n="+x.networkType+"&i="+x.initTime+"&p="+x.preVerifyTime+"&u="+x.url;e.src=i}})}}()})),w.complete=function(t){for(var i=0,n=e.length;i<n;++i)e[i]();w._completes=[]},w}()),v.preVerifyStartTime=R();else{S.state=1;for(var e=w._completes,t=0,n=e.length;t<n;++t)e[t]();w._completes=[]}})),T.invoke||(T.invoke=function(t,i,n){e.WeixinJSBridge&&WeixinJSBridge.invoke(t,L(i),n)},T.on=function(t,i){e.WeixinJSBridge&&WeixinJSBridge.on(t,i)})},ready:function(e){0!=S.state?e():(w._completes.push(e),!p&&y.debug&&e())},error:function(e){m<"6.0.2"||(-1==S.state?e(S.data):w._fail=e)},checkJsApi:function(e){C("checkJsApi",{jsApiList:V(e.jsApiList)},(e._complete=function(e){if(g){var t=e.checkResult;t&&(e.checkResult=JSON.parse(t))}e=function(e){var t=e.checkResult;for(var i in t){var n=r[i];n&&(t[n]=t[i],delete t[i])}return e}(e)},e))},onMenuShareTimeline:function(e){M(o.onMenuShareTimeline,{complete:function(){C("shareTimeline",{title:e.title||c,desc:e.title||c,img_url:e.imgUrl||"",link:e.link||location.href,type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareAppMessage:function(e){M(o.onMenuShareAppMessage,{complete:function(t){"favorite"===t.scene?C("sendAppMessage",{title:e.title||c,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""}):C("sendAppMessage",{title:e.title||c,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareQQ:function(e){M(o.onMenuShareQQ,{complete:function(){C("shareQQ",{title:e.title||c,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareWeibo:function(e){M(o.onMenuShareWeibo,{complete:function(){C("shareWeiboApp",{title:e.title||c,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareQZone:function(e){M(o.onMenuShareQZone,{complete:function(){C("shareQZone",{title:e.title||c,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},updateTimelineShareData:function(e){C("updateTimelineShareData",{title:e.title,link:e.link,imgUrl:e.imgUrl},e)},updateAppMessageShareData:function(e){C("updateAppMessageShareData",{title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl},e)},startRecord:function(e){C("startRecord",{},e)},stopRecord:function(e){C("stopRecord",{},e)},onVoiceRecordEnd:function(e){M("onVoiceRecordEnd",e)},playVoice:function(e){C("playVoice",{localId:e.localId},e)},pauseVoice:function(e){C("pauseVoice",{localId:e.localId},e)},stopVoice:function(e){C("stopVoice",{localId:e.localId},e)},onVoicePlayEnd:function(e){M("onVoicePlayEnd",e)},uploadVoice:function(e){C("uploadVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadVoice:function(e){C("downloadVoice",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},translateVoice:function(e){C("translateVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},chooseImage:function(e){C("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"],sourceType:e.sourceType||["album","camera"]},(e._complete=function(e){if(g){var t=e.localIds;try{t&&(e.localIds=JSON.parse(t))}catch(e){}}},e))},getLocation:function(e){},previewImage:function(e){C(o.previewImage,{current:e.current,urls:e.urls},e)},uploadImage:function(e){C("uploadImage",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadImage:function(e){C("downloadImage",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},getLocalImgData:function(e){!1===b?(b=!0,C("getLocalImgData",{localId:e.localId},(e._complete=function(e){if(b=!1,0<k.length){var t=k.shift();wx.getLocalImgData(t)}},e))):k.push(e)},getNetworkType:function(e){C("getNetworkType",{},(e._complete=function(e){e=function(e){var t=e.errMsg;e.errMsg="getNetworkType:ok";var i=e.subtype;if(delete e.subtype,i)e.networkType=i;else{var n=t.indexOf(":"),a=t.substring(n+1);switch(a){case"wifi":case"edge":case"wwan":e.networkType=a;break;default:e.errMsg="getNetworkType:fail"}}return e}(e)},e))},openLocation:function(e){C("openLocation",{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""},e)}},n(i,"getLocation",(function(e){C(o.getLocation,{type:(e=e||{}).type||"wgs84"},(e._complete=function(e){delete e.type},e))})),n(i,"hideOptionMenu",(function(e){C("hideOptionMenu",{},e)})),n(i,"showOptionMenu",(function(e){C("showOptionMenu",{},e)})),n(i,"closeWindow",(function(e){C("closeWindow",{},e=e||{})})),n(i,"hideMenuItems",(function(e){C("hideMenuItems",{menuList:e.menuList},e)})),n(i,"showMenuItems",(function(e){C("showMenuItems",{menuList:e.menuList},e)})),n(i,"hideAllNonBaseMenuItem",(function(e){C("hideAllNonBaseMenuItem",{},e)})),n(i,"showAllNonBaseMenuItem",(function(e){C("showAllNonBaseMenuItem",{},e)})),n(i,"scanQRCode",(function(e){C("scanQRCode",{needResult:(e=e||{}).needResult||0,scanType:e.scanType||["qrCode","barCode"]},(e._complete=function(e){if(h){var t=e.resultStr;if(t){var i=JSON.parse(t);e.resultStr=i&&i.scan_code&&i.scan_code.scan_result}}},e))})),n(i,"openAddress",(function(e){C(o.openAddress,{},(e._complete=function(e){e=function(e){return e.postalCode=e.addressPostalCode,delete e.addressPostalCode,e.provinceName=e.proviceFirstStageName,delete e.proviceFirstStageName,e.cityName=e.addressCitySecondStageName,delete e.addressCitySecondStageName,e.countryName=e.addressCountiesThirdStageName,delete e.addressCountiesThirdStageName,e.detailInfo=e.addressDetailInfo,delete e.addressDetailInfo,e}(e)},e))})),n(i,"openProductSpecificView",(function(e){C(o.openProductSpecificView,{pid:e.productId,view_type:e.viewType||0,ext_info:e.extInfo},e)})),n(i,"addCard",(function(e){for(var t=e.cardList,i=[],n=0,a=t.length;n<a;++n){var r=t[n],s={card_id:r.cardId,card_ext:r.cardExt};i.push(s)}C(o.addCard,{card_list:i},(e._complete=function(e){var t=e.card_list;if(t){for(var i=0,n=(t=JSON.parse(t)).length;i<n;++i){var a=t[i];a.cardId=a.card_id,a.cardExt=a.card_ext,a.isSuccess=!!a.is_succ,delete a.card_id,delete a.card_ext,delete a.is_succ}e.cardList=t,delete e.card_list}},e))})),n(i,"chooseCard",(function(e){C("chooseCard",{app_id:y.appId,location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:e.timestamp+"",nonce_str:e.nonceStr},(e._complete=function(e){e.cardList=e.choose_card_info,delete e.choose_card_info},e))})),n(i,"openCard",(function(e){for(var t=e.cardList,i=[],n=0,a=t.length;n<a;++n){var r=t[n],s={card_id:r.cardId,code:r.code};i.push(s)}C(o.openCard,{card_list:i},e)})),n(i,"consumeAndShareCard",(function(e){C(o.consumeAndShareCard,{consumedCardId:e.cardId,consumedCode:e.code},e)})),n(i,"chooseWXPay",(function(e){C(o.chooseWXPay,P(e),e)})),n(i,"openEnterpriseRedPacket",(function(e){C(o.openEnterpriseRedPacket,P(e),e)})),n(i,"startSearchBeacons",(function(e){C(o.startSearchBeacons,{ticket:e.ticket},e)})),n(i,"stopSearchBeacons",(function(e){C(o.stopSearchBeacons,{},e)})),n(i,"onSearchBeacons",(function(e){M(o.onSearchBeacons,e)})),n(i,"openEnterpriseChat",(function(e){C("openEnterpriseChat",{useridlist:e.userIds,chatname:e.groupName},e)})),n(i,"launchMiniProgram",(function(e){C("launchMiniProgram",{targetAppId:e.targetAppId,path:function(e){if("string"==typeof e&&0<e.length){var t=e.split("?")[0],i=e.split("?")[1];return t+=".html",void 0!==i?t+"?"+i:t}}(e.path),envVersion:e.envVersion},e)})),n(i,"openBusinessView",(function(e){C("openBusinessView",{businessType:e.businessType,queryString:e.queryString||"",envVersion:e.envVersion},(e._complete=function(e){if(g){var t=e.extraData;if(t)try{e.extraData=JSON.parse(t)}catch(t){e.extraData={}}}},e))})),n(i,"miniProgram",{navigateBack:function(e){e=e||{},A((function(){C("invokeMiniProgramAPI",{name:"navigateBack",arg:{delta:e.delta||1}},e)}))},navigateTo:function(e){A((function(){C("invokeMiniProgramAPI",{name:"navigateTo",arg:{url:e.url}},e)}))},redirectTo:function(e){A((function(){C("invokeMiniProgramAPI",{name:"redirectTo",arg:{url:e.url}},e)}))},switchTab:function(e){A((function(){C("invokeMiniProgramAPI",{name:"switchTab",arg:{url:e.url}},e)}))},reLaunch:function(e){A((function(){C("invokeMiniProgramAPI",{name:"reLaunch",arg:{url:e.url}},e)}))},postMessage:function(e){A((function(){C("invokeMiniProgramAPI",{name:"postMessage",arg:e.data||{}},e)}))},getEnv:function(t){A((function(){t({miniprogram:"miniprogram"===e.__wxjs_environment})}))}}),i),_=1,I={};return s.addEventListener("error",(function(e){if(!g){var t=e.target,i=t.tagName,n=t.src;if(("IMG"==i||"VIDEO"==i||"AUDIO"==i||"SOURCE"==i)&&-1!=n.indexOf("wxlocalresource://")){e.preventDefault(),e.stopPropagation();var a=t["wx-id"];if(a||(a=_++,t["wx-id"]=a),I[a])return;I[a]=!0,wx.ready((function(){wx.getLocalImgData({localId:n,success:function(e){t.src=e.localData}})}))}}}),!0),s.addEventListener("load",(function(e){if(!g){var t=e.target,i=t.tagName;if(t.src,"IMG"==i||"VIDEO"==i||"AUDIO"==i||"SOURCE"==i){var n=t["wx-id"];n&&(I[n]=!1)}}}),!0),t&&(e.wx=e.jWeixin=T),T}function C(t,i,n){e.WeixinJSBridge?WeixinJSBridge.invoke(t,L(i),(function(e){E(t,e,n)})):B(t,n)}function M(t,i,n){e.WeixinJSBridge?WeixinJSBridge.on(t,(function(e){n&&n.trigger&&n.trigger(e),E(t,e,i)})):B(t,n||i)}function L(e){return(e=e||{}).appId=y.appId,e.verifyAppId=y.appId,e.verifySignType="sha1",e.verifyTimestamp=y.timestamp+"",e.verifyNonceStr=y.nonceStr,e.verifySignature=y.signature,e}function P(e){return{timeStamp:e.timestamp+"",nonceStr:e.nonceStr,package:e.package,paySign:e.paySign,signType:e.signType||"SHA1"}}function E(e,t,i){"openEnterpriseChat"!=e&&"openBusinessView"!==e||(t.errCode=t.err_code),delete t.err_code,delete t.err_desc,delete t.err_detail;var n=t.errMsg;n||(n=t.err_msg,delete t.err_msg,n=function(e,t){var i=e,n=r[i];n&&(i=n);var a="ok";if(t){var o=t.indexOf(":");"confirm"==(a=t.substring(o+1))&&(a="ok"),"failed"==a&&(a="fail"),-1!=a.indexOf("failed_")&&(a=a.substring(7)),-1!=a.indexOf("fail_")&&(a=a.substring(5)),"access denied"!=(a=(a=a.replace(/_/g," ")).toLowerCase())&&"no permission to execute"!=a||(a="permission denied"),"config"==i&&"function not exist"==a&&(a="ok"),""==a&&(a="fail")}return i+":"+a}(e,n),t.errMsg=n),(i=i||{})._complete&&(i._complete(t),delete i._complete),n=t.errMsg||"",y.debug&&!i.isInnerInvoke&&alert(JSON.stringify(t));var a=n.indexOf(":");switch(n.substring(a+1)){case"ok":i.success&&i.success(t);break;case"cancel":i.cancel&&i.cancel(t);break;default:i.fail&&i.fail(t)}i.complete&&i.complete(t)}function V(e){if(e){for(var t=0,i=e.length;t<i;++t){var n=e[t],a=o[n];a&&(e[t]=a)}return e}}function B(e,t){if(!(!y.debug||t&&t.isInnerInvoke)){var i=r[e];i&&(e=i),t&&t._complete&&delete t._complete,console.log('"'+e+'",',t||"")}}function R(){return(new Date).getTime()}function A(t){p&&(e.WeixinJSBridge?t():s.addEventListener&&s.addEventListener("WeixinJSBridgeReady",t,!1))}}(t)}(window)},ff52:function(e,t,i){"use strict";i("7a82");var n=i("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return r.apply(this,arguments)};var a=n(i("c7eb")),o=n(i("1da1"));function r(){return r=(0,o.default)((0,a.default)().mark((function e(t){var n,o,r,s,c,d,u,l;return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i("e383"),o={},r={},window.location.href,s=window.location.href,c=window.location.href.split("#")[0],s=c+"#/",console.log(s,"window.location.href"),d=uni.getStorageSync("wid")||"1",console.log(c,"domain"),e.next=12,t.$u.api.configShareSdk({url:c});case 12:return u=e.sent,u&&(r=u.data),console.log(r,"ccccc"),n.config({debug:!1,appId:r.appId,timestamp:r.timestamp,nonceStr:r.nonceStr,signature:r.signature,jsApiList:["updateAppMessageShareData","updateTimelineShareData","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","onMenuShareAppMessage","onMenuShareTimeline"]}),console.log("aaaaaaa"),e.next=19,t.$u.api.configH5();case 19:l=e.sent,l&&(o=l.data),setTimeout((function(){n.ready((function(){var e=localStorage.getItem("userId");console.log(o,"asddsadsadasd"),n.updateAppMessageShareData({title:o.title,desc:o.share_desc,link:s+"pages/index/index?wid="+d+"&inviteId="+e,imgUrl:o.share_image,success:function(e){console.log(e,"分享成功updateAppMessageShareData")}}),n.updateTimelineShareData({title:o.title,desc:o.share_desc,link:s+"pages/index/index?wid="+d+"&inviteId="+e,imgUrl:o.share_image,success:function(e){console.log(e,"分享成功updateTimelineShareData")}}),n.onMenuShareTimeline({title:o.title,desc:o.share_desc,link:s+"pages/index/index?wid="+d+"&inviteId="+e,imgUrl:o.share_image,success:function(e){console.log(e,"分享成功onMenuShareTimeline")}}),n.onMenuShareAppMessage({title:o.title,desc:o.share_desc,link:s+"pages/index/index?wid="+d+"&inviteId="+e,imgUrl:o.share_image,success:function(e){console.log("分享成功onMenuShareAppMessage",e)}}),n.onMenuShareQQ({title:o.title,desc:o.share_desc,link:s+"pages/index/index?wid="+d+"&inviteId="+e,imgUrl:o.share_image,success:function(){}}),n.onMenuShareWeibo({title:o.title,desc:o.share_desc,link:s+"pages/index/index?wid="+d+"&inviteId="+e,imgUrl:o.share_image,success:function(){}}),n.onMenuShareQZone({title:o.title,desc:o.share_desc,link:s+"pages/index/index?wid="+d+"&inviteId="+e,imgUrl:o.share_image,success:function(){}}),console.log("asdasdsad1111")}))}),2e3);case 22:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}}}]);