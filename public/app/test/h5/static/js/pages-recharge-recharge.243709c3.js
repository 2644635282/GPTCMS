(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-recharge-recharge"],{"039a":function(e,t,a){"use strict";var i=a("13dc"),n=a.n(i);n.a},"13dc":function(e,t,a){var i=a("f5ce");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("3869c3a9",i,!0,{sourceMap:!1,shadowMode:!1})},1420:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return i}));var i={uPopup:a("cfd9").default},n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"recharge"},[a("v-uni-view",{staticClass:"page-header"},[a("v-uni-view",{staticClass:"back-icon gpticon-back",staticStyle:{color:"#fff"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.goBack.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"page-title"})],1),a("v-uni-view",{staticClass:"page-content"},[a("v-uni-view",{staticClass:"card-wrapper"},[a("v-uni-view",{staticClass:"vip-card"},[a("v-uni-view",{staticClass:"vip-text"},[a("v-uni-view",{staticClass:"vip"},[a("v-uni-view",{staticClass:"vip-title"},[a("v-uni-view",{staticClass:"leftCount"},[e._v(e._s(e.num))]),e._v(e._s(e.context.unit))],1)],1),a("v-uni-view",{staticClass:"vip-desc"},[e._v("余额")])],1),a("v-uni-view",{staticClass:"vip-hat"})],1)],1),a("v-uni-view",{staticClass:"rechage-tip"},[a("v-uni-view",{staticClass:"rechage-title"},[e._v("充值套餐")]),a("v-uni-view",{staticClass:"rechage-decoration"})],1),a("v-uni-view",{staticClass:"vip-package"},e._l(e.priceList,(function(t,i){return a("v-uni-view",{key:i,staticClass:"package-item",class:{selected:e.vipPack==t},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.vipPack=t}}},[a("v-uni-view",{staticClass:"pack-name"},[e._v(e._s(t.title||"默认"))]),a("v-uni-view",{staticClass:"pack-price"},[e._v(e._s(e.formatPrice(t.price)))]),a("v-uni-view",{staticClass:"pack-orginal"},[e._v(e._s(t.old_price))]),a("v-uni-view",{staticClass:"pack-price-day"},[e._v(e._s(t.number)+e._s(e.context.unit))])],1)})),1),a("v-uni-view",{staticClass:"pay-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.pay.apply(void 0,arguments)}}},[e._v("立即充值")])],1),a("u-popup",{attrs:{mode:"center","border-radius":"40"},model:{value:e.isShowPop,callback:function(t){e.isShowPop=t},expression:"isShowPop"}},[a("v-uni-view",{staticClass:"confirm-dialog"},[a("v-uni-view",{staticClass:"confirm-content"},[a("v-uni-view",{staticClass:"line7"},[e._v("是否要放弃充值")]),e.priceList.length>0?a("v-uni-view",{staticClass:"line8"},[e._v("优惠力度低至"+e._s(e.priceList[0].number)+e._s(e.context.unit)+e._s(e.priceList[0].price)+"元")]):e._e()],1),a("v-uni-view",{staticClass:"confirm-btns"},[a("v-uni-view",{staticClass:"confirm-btn cancel",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.jumpBack1.apply(void 0,arguments)}}},[e._v("狠心放弃")]),a("v-uni-view",{staticClass:"confirm-btn confirm",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.pay.apply(void 0,arguments)}}},[e._v("继续支付")])],1)],1)],1),a("u-popup",{attrs:{mode:"center","border-radius":"40"},model:{value:e.showConfirmResult,callback:function(t){e.showConfirmResult=t},expression:"showConfirmResult"}},[a("v-uni-view",{staticClass:"confirm-dialog"},[a("v-uni-view",{staticClass:"confirm-content"},[a("v-uni-view",{staticClass:"line7",staticStyle:{"max-width":"80vw"}},[e._v("你已支付成功，如果页面没有自动跳转，请安返回键回到主页面并刷新页面")])],1),a("v-uni-view",{staticStyle:{height:"60px"}})],1)],1)],1)},r=[]},"1b91":function(e,t,a){"use strict";a.r(t);var i=a("d263"),n=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t["default"]=n.a},"304a":function(e,t,a){"use strict";a("7a82");var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("d3b7"),a("ac1f"),a("00b4"),a("caad"),a("2532"),a("e9c4"),a("466d");var n=i(a("c7eb")),r=i(a("1da1"));function c(){return c=(0,r.default)((0,n.default)().mark((function e(t,a){var i,r,c,s,p;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$u.api[a.api](a.data);case 2:if(i=e.sent,!i){e.next=25;break}if(t.orderId=i.data.order_id,r=i.data,!JSON.stringify(r).includes("支付成功")){e.next=8;break}return e.abrupt("return",0);case 8:if(c=window.navigator.userAgent.toLowerCase(),s="micromessenger"==c.match(/MicroMessenger/i),!s){e.next=16;break}return e.next=13,o(r);case 13:return e.abrupt("return",e.sent);case 16:if(p=/(iPhone|iPad|iPod|iOS|Android|Linux armv8l|Linux armv7l|Linux aarch64)/i.test(navigator.platform),!p){e.next=22;break}return window.location.href=r.payconfig.mweb_url,e.abrupt("return",{isTimer:!0});case 22:return e.abrupt("return",{isTimer:!0,showPic:!0,code_url:r.payconfig.code_url});case 23:e.next=26;break;case 25:return e.abrupt("return",!1);case 26:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function o(e){return new Promise((function(t){"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",s,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",s),document.attachEvent("onWeixinJSBridgeReady",s)):(0,r.default)((0,n.default)().mark((function a(){var i;return(0,n.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,s(e);case 2:i=a.sent,t(!!i);case 4:case"end":return a.stop()}}),a)})))()}))}function s(e){return new Promise((function(t){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.payconfig.appId,timeStamp:e.payconfig.timeStamp,nonceStr:e.payconfig.nonceStr,package:e.payconfig.package,signType:e.payconfig.signType,paySign:e.payconfig.paySign},(function(e){"get_brand_wcpay_request:ok"==e.err_msg?t(!0):"get_brand_wcpay_request:cancel"===e.err_msg&&t(!1)}))}))}var p={pay:function(e,t){return c.apply(this,arguments)},weixinPay:function(e){return new Promise((function(t){uni.requestPayment({timeStamp:e.payconfig.timeStamp,nonceStr:e.payconfig.nonceStr,package:e.payconfig.package,paySign:e.payconfig.paySign,signType:e.payconfig.signType,success:function(){console.log(98),t(!0)},fail:function(){console.log(102),t(!1)}})}))},isZero:function(e){return!uni.$u.test.isEmpty(e)||!isNaN(e)}};t.default=p},a8ff:function(e,t,a){"use strict";a.r(t);var i=a("1420"),n=a("1b91");for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);a("039a");var c=a("f0c5"),o=Object(c["a"])(n["default"],i["b"],i["c"],!1,null,"e6eb21ce",null,!1,i["a"],void 0);t["default"]=o.exports},ab21:function(e,t,a){e.exports=a.p+"static/img/icon-viphat.3dc3b4d4.png"},d263:function(e,t,a){"use strict";a("7a82");var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("ac1f"),a("466d"),a("d401"),a("d3b7"),a("25f0"),a("a9e3");var n=i(a("c7eb")),c=i(a("1da1")),o=i(a("304a")),s=i(a("0208")),p={name:"subscribe",components:{},data:function(){return{timer2:null,isShowPop:!1,activeIdx:0,priceList:[],orderId:"",num:0,statusbarHeight:0,vipPack:null,context:s.default,showConfirmResult:!1}},onLoad:function(e){e.num&&(this.num=e.num),this.statusbarHeight=uni.getStorageSync("statusBarHeight")},mounted:function(){this.getData()},beforeDestroy:function(){clearInterval(this.timer2),this.timer2=null},destroyed:function(){},computed:{},methods:{jumpBack1:function(){uni.navigateBack({delta:1})},jumpBack:function(){this.isShowPop=!0},pay:function(){var e=this;return(0,c.default)((0,n.default)().mark((function t(){return(0,n.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s.default.userInfo){t.next=3;break}return e.$u.api.configWechat().then((function(e){if(e&&e.data){var t=window.navigator.userAgent.toLowerCase(),a="micromessenger"==t.match(/MicroMessenger/i);a?uni.navigateTo({url:"/pages/wechatLogin/wechatLogin?redirect="+encodeURIComponent(location.href)}):uni.navigateTo({url:"/pages/login/login"})}})).catch((function(e){uni.navigateTo({url:"/pages/login/login"})})),t.abrupt("return");case 3:o.default.pay(e,{api:"marketOrderCreate",data:{setmeal_type:"recharge",setmeal_id:e.vipPack.id,buy_number:1}}).then((function(t){r.isTimer?(r.showPic&&(e.src=r.code_url,e.isShowPop1=!0),e.timer2=setInterval((function(){e.getResult()}),2e3)):e.getResult()}));case 4:case"end":return t.stop()}}),t)})))()},getResult:function(){var e=this;return(0,c.default)((0,n.default)().mark((function t(){return(0,n.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$u.api.marketOrderResult({order_id:e.orderId}).then((function(t){t?(e.$u.toast("支付成功"),e.showConfirmResult=!0,uni.$emit("updateUserInfo"),uni.switchTab({url:"/pages/my/my"})):e.$u.toast("支付失败")}));case 1:case"end":return t.stop()}}),t)})))()},showPop:function(){this.isShowPop=!0},getData:function(){var e=this;return(0,c.default)((0,n.default)().mark((function t(){var a;return(0,n.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$u.api.marketRechargeList();case 2:a=t.sent,a&&(e.priceList=a.data,e.vipPack=a.data[0]);case 4:case"end":return t.stop()}}),t)})))()},countDown:function(){var e=this,t=36e3;this.timer1=setInterval((function(){if(t>=0){var a=Math.floor(t/60/60),i=Math.floor((t-60*a*60)/60),n=(t-60*a*60)%60;a.toString().length<2&&(a="0"+a),i.toString().length<2&&(i="0"+i),n.toString().length<2&&(n="0"+n),e.msg=a+":"+i+":"+n,--t}else clearInterval(e.timer1)}),1e3/60)},goBack:function(){this.isShowPop=!0},scroll:function(){var e=document.getElementById("scroll").scrollWidth;this.timer=setInterval((function(){e>document.getElementById("scroll").scrollLeft+400?document.getElementById("scroll").scrollLeft+=1:document.getElementById("scroll").scrollLeft=0}),50)},formatPrice:function(e){return Number(e)===Math.round(e)?Number(e).toFixed():e}}};t.default=p},de6c:function(e,t,a){e.exports=a.p+"static/img/vip-decoration.26f3eb53.svg"},f5ce:function(e,t,a){var i=a("24fb"),n=a("1de5"),r=a("de6c"),c=a("ab21");t=i(!1);var o=n(r),s=n(c);t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\r\n * 使用的时候，请将下面的一行复制到您的uniapp项目根目录的uni.scss中即可\r\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \r\n */.recharge[data-v-e6eb21ce]{display:flex;flex-direction:column;height:100%}.page-header[data-v-e6eb21ce]{color:#fff;background:#3c3733}.page-content[data-v-e6eb21ce]{padding-top:15px;flex:1;overflow-y:overlay;overflow-x:hidden}.rechage-tip[data-v-e6eb21ce]{padding:15px 20px 0;text-align:center}.rechage-tip .rechage-title[data-v-e6eb21ce]{font-size:20px;color:#333;margin-bottom:6px}.rechage-tip .rechage-desc[data-v-e6eb21ce]{color:#958475;font-size:.94em}.rechage-tip .rechage-decoration[data-v-e6eb21ce]{height:3px;width:50px;background:#e9c27e;margin:17px auto;border-radius:10px}.card-wrapper[data-v-e6eb21ce]{position:relative;z-index:0;padding-bottom:20px}.card-wrapper[data-v-e6eb21ce]:before{content:"";display:block;position:absolute;left:-20px;right:-20px;bottom:0;top:50px;background:#fff;z-index:-1;border-radius:100px 100px 0 0}.card-wrapper[data-v-e6eb21ce]:after{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;top:-30px;background:#3c3733;z-index:-2}.card-wrapper .vip-card[data-v-e6eb21ce]{display:flex;align-items:center;margin:10px 20px 0;padding:20px;color:#584131;border-radius:25px 25px;background-image:url('+o+"),linear-gradient(93.67deg,#f4e8da .46%,#f3e7d9 21.88%,#e3ceb9 58.3%,#f4e6cc 103.29%);background-repeat:no-repeat,repeat;background-position:92%,50%;background-size:auto 98%,auto;position:relative;box-shadow:0 8px 8px rgba(244,232,218,.38823529411764707)}.card-wrapper .vip-card .vip-text[data-v-e6eb21ce]{flex:1}.card-wrapper .vip-card .vip-text .vip[data-v-e6eb21ce]{display:flex;align-items:center;margin-bottom:9px}.card-wrapper .vip-card .vip-text .vip .vip-title[data-v-e6eb21ce]{font-size:15px;display:flex}.card-wrapper .vip-card .vip-text .vip .vip-title .leftCount[data-v-e6eb21ce]{font-weight:800;color:#fe4f2f;margin-right:30px;-webkit-transform:scale(1.8);transform:scale(1.8);-webkit-transform-origin:0 70%;transform-origin:0 70%}.card-wrapper .vip-card .vip-text .vip-desc[data-v-e6eb21ce]{font-size:.9em;opacity:.8}.card-wrapper .vip-card .vip-hat[data-v-e6eb21ce]{z-index:10;right:0;position:absolute;-webkit-transform:translate(2%,-20px);transform:translate(2%,-20px);width:170px;height:170px;background-position:50%;background-repeat:no-repeat;background-size:contain;background-image:url("+s+')}.vip-package[data-v-e6eb21ce]{display:flex;padding:15px 20px;overflow-y:overlay}.vip-package .package-item[data-v-e6eb21ce]{text-align:center;display:flex;flex-direction:column;align-items:center;justify-content:center;margin-right:10px;height:136px;width:120px;min-width:120px;border:2px solid rgba(231,189,117,.2);color:#dda45d;border-radius:16px;position:relative}.vip-package .package-item.selected[data-v-e6eb21ce]{border:2px solid #e7bd75;background:linear-gradient(180deg,rgba(254,229,201,.3),rgba(253,216,176,.3) 72.43%)}.vip-package .package-item.selected .pack-price[data-v-e6eb21ce]{color:#dda45d}.vip-package .package-item .pack-name[data-v-e6eb21ce]{font-size:1.2em}.vip-package .package-item .pack-price[data-v-e6eb21ce]{font-size:28px;font-weight:600;display:flex;color:#fe4f2f}.vip-package .package-item .pack-orginal[data-v-e6eb21ce]{font-size:12px;text-decoration:line-through;color:rgba(219,178,134,.8)}.vip-package .package-item .pack-recommend[data-v-e6eb21ce]{padding:5px 10px;border-radius:20px 20px 20px 0;position:absolute;left:0;top:0;color:#ffefd3;-webkit-transform:translate(-3px,-50%);transform:translate(-3px,-50%);background:linear-gradient(95.09deg,#f68435 2.2%,#f4653b 103.77%)}.vip-package .package-item .pack-price-day[data-v-e6eb21ce]{margin-top:.8em;font-size:12px}.pay-btn[data-v-e6eb21ce]{position:-webkit-sticky;position:sticky;bottom:20px;text-align:center;font-size:18px;padding:13px;color:#fff;border-radius:25px;margin:20px;z-index:10;box-shadow:0 3px 6px rgba(242,213,163,.4);background:linear-gradient(91.43deg,#3c3733,#d6bfa4 106.26%)}.confirm-dialog[data-v-e6eb21ce]{text-align:center}.confirm-dialog .confirm-content[data-v-e6eb21ce]{z-index:0;font-size:20px;line-height:1.8em;padding:50px 20px;position:relative;color:#dda45d}.confirm-dialog .confirm-content[data-v-e6eb21ce]::before{content:"";display:block;position:absolute;top:0;left:-20px;right:-20px;background:#3c3733;bottom:0;z-index:-1;border-radius:0 0 50% 50%}.confirm-dialog .confirm-btns[data-v-e6eb21ce]{display:flex;padding:40px 20px}.confirm-dialog .confirm-btns .confirm-btn[data-v-e6eb21ce]{flex:1;color:#fff;font-size:18px;padding:10px 30px;border-radius:40px;background:linear-gradient(91.43deg,#3c3733,#d6bfa4 106.26%)}.confirm-dialog .confirm-btns .confirm-btn[data-v-e6eb21ce]:first-child{margin-right:20px}.confirm-dialog .confirm-btns .confirm-btn.confirm[data-v-e6eb21ce]{background:linear-gradient(91.43deg,#3c3733,#d6bfa4 106.26%)}',""]),e.exports=t}}]);